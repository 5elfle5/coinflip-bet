var h0=Object.defineProperty;var d0=(n,t,e)=>t in n?h0(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Te=(n,t,e)=>d0(n,typeof t!="symbol"?t+"":t,e);var an=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function gi(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Zs(n){if(n.__esModule)return n;var t=n.default;if(typeof t=="function"){var e=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),e}var ke={},Ys={};Ys.byteLength=g0;Ys.toByteArray=_0;Ys.fromByteArray=b0;var Sn=[],ln=[],f0=typeof Uint8Array<"u"?Uint8Array:Array,Wo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var qr=0,p0=Wo.length;qr<p0;++qr)Sn[qr]=Wo[qr],ln[Wo.charCodeAt(qr)]=qr;ln[45]=62;ln[95]=63;function Wl(n){var t=n.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=n.indexOf("=");e===-1&&(e=t);var r=e===t?0:4-e%4;return[e,r]}function g0(n){var t=Wl(n),e=t[0],r=t[1];return(e+r)*3/4-r}function y0(n,t,e){return(t+e)*3/4-e}function _0(n){var t,e=Wl(n),r=e[0],i=e[1],s=new f0(y0(n,r,i)),o=0,a=i>0?r-4:r,u;for(u=0;u<a;u+=4)t=ln[n.charCodeAt(u)]<<18|ln[n.charCodeAt(u+1)]<<12|ln[n.charCodeAt(u+2)]<<6|ln[n.charCodeAt(u+3)],s[o++]=t>>16&255,s[o++]=t>>8&255,s[o++]=t&255;return i===2&&(t=ln[n.charCodeAt(u)]<<2|ln[n.charCodeAt(u+1)]>>4,s[o++]=t&255),i===1&&(t=ln[n.charCodeAt(u)]<<10|ln[n.charCodeAt(u+1)]<<4|ln[n.charCodeAt(u+2)]>>2,s[o++]=t>>8&255,s[o++]=t&255),s}function w0(n){return Sn[n>>18&63]+Sn[n>>12&63]+Sn[n>>6&63]+Sn[n&63]}function m0(n,t,e){for(var r,i=[],s=t;s<e;s+=3)r=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(n[s+2]&255),i.push(w0(r));return i.join("")}function b0(n){for(var t,e=n.length,r=e%3,i=[],s=16383,o=0,a=e-r;o<a;o+=s)i.push(m0(n,o,o+s>a?a:o+s));return r===1?(t=n[e-1],i.push(Sn[t>>2]+Sn[t<<4&63]+"==")):r===2&&(t=(n[e-2]<<8)+n[e-1],i.push(Sn[t>>10]+Sn[t>>4&63]+Sn[t<<2&63]+"=")),i.join("")}var rc={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */rc.read=function(n,t,e,r,i){var s,o,a=i*8-r-1,u=(1<<a)-1,h=u>>1,l=-7,b=e?i-1:0,R=e?-1:1,_=n[t+b];for(b+=R,s=_&(1<<-l)-1,_>>=-l,l+=a;l>0;s=s*256+n[t+b],b+=R,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=r;l>0;o=o*256+n[t+b],b+=R,l-=8);if(s===0)s=1-h;else{if(s===u)return o?NaN:(_?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-h}return(_?-1:1)*o*Math.pow(2,s-r)};rc.write=function(n,t,e,r,i,s){var o,a,u,h=s*8-i-1,l=(1<<h)-1,b=l>>1,R=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=r?0:s-1,S=r?1:-1,N=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+b>=1?t+=R/u:t+=R*Math.pow(2,1-b),t*u>=2&&(o++,u/=2),o+b>=l?(a=0,o=l):o+b>=1?(a=(t*u-1)*Math.pow(2,i),o=o+b):(a=t*Math.pow(2,b-1)*Math.pow(2,i),o=0));i>=8;n[e+_]=a&255,_+=S,a/=256,i-=8);for(o=o<<i|a,h+=i;h>0;n[e+_]=o&255,_+=S,o/=256,h-=8);n[e+_-S]|=N*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const t=Ys,e=rc,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=l,n.SlowBuffer=K,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i;const{Uint8Array:s,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;l.TYPED_ARRAY_SUPPORT=u(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{const m=new s(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,s.prototype),Object.setPrototypeOf(m,f),m.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function h(m){if(m>i)throw new RangeError('The value "'+m+'" is invalid for option "size"');const f=new s(m);return Object.setPrototypeOf(f,l.prototype),f}function l(m,f,p){if(typeof m=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return S(m)}return b(m,f,p)}l.poolSize=8192;function b(m,f,p){if(typeof m=="string")return N(m,f);if(o.isView(m))return C(m);if(m==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m);if(ze(m,o)||m&&ze(m.buffer,o)||typeof a<"u"&&(ze(m,a)||m&&ze(m.buffer,a)))return D(m,f,p);if(typeof m=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const k=m.valueOf&&m.valueOf();if(k!=null&&k!==m)return l.from(k,f,p);const M=x(m);if(M)return M;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof m[Symbol.toPrimitive]=="function")return l.from(m[Symbol.toPrimitive]("string"),f,p);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m)}l.from=function(m,f,p){return b(m,f,p)},Object.setPrototypeOf(l.prototype,s.prototype),Object.setPrototypeOf(l,s);function R(m){if(typeof m!="number")throw new TypeError('"size" argument must be of type number');if(m<0)throw new RangeError('The value "'+m+'" is invalid for option "size"')}function _(m,f,p){return R(m),m<=0?h(m):f!==void 0?typeof p=="string"?h(m).fill(f,p):h(m).fill(f):h(m)}l.alloc=function(m,f,p){return _(m,f,p)};function S(m){return R(m),h(m<0?0:L(m)|0)}l.allocUnsafe=function(m){return S(m)},l.allocUnsafeSlow=function(m){return S(m)};function N(m,f){if((typeof f!="string"||f==="")&&(f="utf8"),!l.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const p=Y(m,f)|0;let k=h(p);const M=k.write(m,f);return M!==p&&(k=k.slice(0,M)),k}function A(m){const f=m.length<0?0:L(m.length)|0,p=h(f);for(let k=0;k<f;k+=1)p[k]=m[k]&255;return p}function C(m){if(ze(m,s)){const f=new s(m);return D(f.buffer,f.byteOffset,f.byteLength)}return A(m)}function D(m,f,p){if(f<0||m.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(m.byteLength<f+(p||0))throw new RangeError('"length" is outside of buffer bounds');let k;return f===void 0&&p===void 0?k=new s(m):p===void 0?k=new s(m,f):k=new s(m,f,p),Object.setPrototypeOf(k,l.prototype),k}function x(m){if(l.isBuffer(m)){const f=L(m.length)|0,p=h(f);return p.length===0||m.copy(p,0,0,f),p}if(m.length!==void 0)return typeof m.length!="number"||qt(m.length)?h(0):A(m);if(m.type==="Buffer"&&Array.isArray(m.data))return A(m.data)}function L(m){if(m>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return m|0}function K(m){return+m!=m&&(m=0),l.alloc(+m)}l.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==l.prototype},l.compare=function(f,p){if(ze(f,s)&&(f=l.from(f,f.offset,f.byteLength)),ze(p,s)&&(p=l.from(p,p.offset,p.byteLength)),!l.isBuffer(f)||!l.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===p)return 0;let k=f.length,M=p.length;for(let P=0,F=Math.min(k,M);P<F;++P)if(f[P]!==p[P]){k=f[P],M=p[P];break}return k<M?-1:M<k?1:0},l.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(f,p){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return l.alloc(0);let k;if(p===void 0)for(p=0,k=0;k<f.length;++k)p+=f[k].length;const M=l.allocUnsafe(p);let P=0;for(k=0;k<f.length;++k){let F=f[k];if(ze(F,s))P+F.length>M.length?(l.isBuffer(F)||(F=l.from(F)),F.copy(M,P)):s.prototype.set.call(M,F,P);else if(l.isBuffer(F))F.copy(M,P);else throw new TypeError('"list" argument must be an Array of Buffers');P+=F.length}return M};function Y(m,f){if(l.isBuffer(m))return m.length;if(o.isView(m)||ze(m,o))return m.byteLength;if(typeof m!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof m);const p=m.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&p===0)return 0;let M=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return Kt(m).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p*2;case"hex":return p>>>1;case"base64":return Wt(m).length;default:if(M)return k?-1:Kt(m).length;f=(""+f).toLowerCase(),M=!0}}l.byteLength=Y;function $(m,f,p){let k=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((p===void 0||p>this.length)&&(p=this.length),p<=0)||(p>>>=0,f>>>=0,p<=f))return"";for(m||(m="utf8");;)switch(m){case"hex":return g(this,f,p);case"utf8":case"utf-8":return w(this,f,p);case"ascii":return B(this,f,p);case"latin1":case"binary":return I(this,f,p);case"base64":return y(this,f,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,f,p);default:if(k)throw new TypeError("Unknown encoding: "+m);m=(m+"").toLowerCase(),k=!0}}l.prototype._isBuffer=!0;function G(m,f,p){const k=m[f];m[f]=m[p],m[p]=k}l.prototype.swap16=function(){const f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let p=0;p<f;p+=2)G(this,p,p+1);return this},l.prototype.swap32=function(){const f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let p=0;p<f;p+=4)G(this,p,p+3),G(this,p+1,p+2);return this},l.prototype.swap64=function(){const f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let p=0;p<f;p+=8)G(this,p,p+7),G(this,p+1,p+6),G(this,p+2,p+5),G(this,p+3,p+4);return this},l.prototype.toString=function(){const f=this.length;return f===0?"":arguments.length===0?w(this,0,f):$.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(f){if(!l.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:l.compare(this,f)===0},l.prototype.inspect=function(){let f="";const p=n.INSPECT_MAX_BYTES;return f=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(f+=" ... "),"<Buffer "+f+">"},r&&(l.prototype[r]=l.prototype.inspect),l.prototype.compare=function(f,p,k,M,P){if(ze(f,s)&&(f=l.from(f,f.offset,f.byteLength)),!l.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(p===void 0&&(p=0),k===void 0&&(k=f?f.length:0),M===void 0&&(M=0),P===void 0&&(P=this.length),p<0||k>f.length||M<0||P>this.length)throw new RangeError("out of range index");if(M>=P&&p>=k)return 0;if(M>=P)return-1;if(p>=k)return 1;if(p>>>=0,k>>>=0,M>>>=0,P>>>=0,this===f)return 0;let F=P-M,Et=k-p;const yt=Math.min(F,Et),pt=this.slice(M,P),Yt=f.slice(p,k);for(let dt=0;dt<yt;++dt)if(pt[dt]!==Yt[dt]){F=pt[dt],Et=Yt[dt];break}return F<Et?-1:Et<F?1:0};function j(m,f,p,k,M){if(m.length===0)return-1;if(typeof p=="string"?(k=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),p=+p,qt(p)&&(p=M?0:m.length-1),p<0&&(p=m.length+p),p>=m.length){if(M)return-1;p=m.length-1}else if(p<0)if(M)p=0;else return-1;if(typeof f=="string"&&(f=l.from(f,k)),l.isBuffer(f))return f.length===0?-1:tt(m,f,p,k,M);if(typeof f=="number")return f=f&255,typeof s.prototype.indexOf=="function"?M?s.prototype.indexOf.call(m,f,p):s.prototype.lastIndexOf.call(m,f,p):tt(m,[f],p,k,M);throw new TypeError("val must be string, number or Buffer")}function tt(m,f,p,k,M){let P=1,F=m.length,Et=f.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(m.length<2||f.length<2)return-1;P=2,F/=2,Et/=2,p/=2}function yt(Yt,dt){return P===1?Yt[dt]:Yt.readUInt16BE(dt*P)}let pt;if(M){let Yt=-1;for(pt=p;pt<F;pt++)if(yt(m,pt)===yt(f,Yt===-1?0:pt-Yt)){if(Yt===-1&&(Yt=pt),pt-Yt+1===Et)return Yt*P}else Yt!==-1&&(pt-=pt-Yt),Yt=-1}else for(p+Et>F&&(p=F-Et),pt=p;pt>=0;pt--){let Yt=!0;for(let dt=0;dt<Et;dt++)if(yt(m,pt+dt)!==yt(f,dt)){Yt=!1;break}if(Yt)return pt}return-1}l.prototype.includes=function(f,p,k){return this.indexOf(f,p,k)!==-1},l.prototype.indexOf=function(f,p,k){return j(this,f,p,k,!0)},l.prototype.lastIndexOf=function(f,p,k){return j(this,f,p,k,!1)};function W(m,f,p,k){p=Number(p)||0;const M=m.length-p;k?(k=Number(k),k>M&&(k=M)):k=M;const P=f.length;k>P/2&&(k=P/2);let F;for(F=0;F<k;++F){const Et=parseInt(f.substr(F*2,2),16);if(qt(Et))return F;m[p+F]=Et}return F}function V(m,f,p,k){return Ft(Kt(f,m.length-p),m,p,k)}function v(m,f,p,k){return Ft(jt(f),m,p,k)}function c(m,f,p,k){return Ft(Wt(f),m,p,k)}function d(m,f,p,k){return Ft(Qn(f,m.length-p),m,p,k)}l.prototype.write=function(f,p,k,M){if(p===void 0)M="utf8",k=this.length,p=0;else if(k===void 0&&typeof p=="string")M=p,k=this.length,p=0;else if(isFinite(p))p=p>>>0,isFinite(k)?(k=k>>>0,M===void 0&&(M="utf8")):(M=k,k=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const P=this.length-p;if((k===void 0||k>P)&&(k=P),f.length>0&&(k<0||p<0)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");M||(M="utf8");let F=!1;for(;;)switch(M){case"hex":return W(this,f,p,k);case"utf8":case"utf-8":return V(this,f,p,k);case"ascii":case"latin1":case"binary":return v(this,f,p,k);case"base64":return c(this,f,p,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d(this,f,p,k);default:if(F)throw new TypeError("Unknown encoding: "+M);M=(""+M).toLowerCase(),F=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function y(m,f,p){return f===0&&p===m.length?t.fromByteArray(m):t.fromByteArray(m.slice(f,p))}function w(m,f,p){p=Math.min(m.length,p);const k=[];let M=f;for(;M<p;){const P=m[M];let F=null,Et=P>239?4:P>223?3:P>191?2:1;if(M+Et<=p){let yt,pt,Yt,dt;switch(Et){case 1:P<128&&(F=P);break;case 2:yt=m[M+1],(yt&192)===128&&(dt=(P&31)<<6|yt&63,dt>127&&(F=dt));break;case 3:yt=m[M+1],pt=m[M+2],(yt&192)===128&&(pt&192)===128&&(dt=(P&15)<<12|(yt&63)<<6|pt&63,dt>2047&&(dt<55296||dt>57343)&&(F=dt));break;case 4:yt=m[M+1],pt=m[M+2],Yt=m[M+3],(yt&192)===128&&(pt&192)===128&&(Yt&192)===128&&(dt=(P&15)<<18|(yt&63)<<12|(pt&63)<<6|Yt&63,dt>65535&&dt<1114112&&(F=dt))}}F===null?(F=65533,Et=1):F>65535&&(F-=65536,k.push(F>>>10&1023|55296),F=56320|F&1023),k.push(F),M+=Et}return T(k)}const E=4096;function T(m){const f=m.length;if(f<=E)return String.fromCharCode.apply(String,m);let p="",k=0;for(;k<f;)p+=String.fromCharCode.apply(String,m.slice(k,k+=E));return p}function B(m,f,p){let k="";p=Math.min(m.length,p);for(let M=f;M<p;++M)k+=String.fromCharCode(m[M]&127);return k}function I(m,f,p){let k="";p=Math.min(m.length,p);for(let M=f;M<p;++M)k+=String.fromCharCode(m[M]);return k}function g(m,f,p){const k=m.length;(!f||f<0)&&(f=0),(!p||p<0||p>k)&&(p=k);let M="";for(let P=f;P<p;++P)M+=Zt[m[P]];return M}function O(m,f,p){const k=m.slice(f,p);let M="";for(let P=0;P<k.length-1;P+=2)M+=String.fromCharCode(k[P]+k[P+1]*256);return M}l.prototype.slice=function(f,p){const k=this.length;f=~~f,p=p===void 0?k:~~p,f<0?(f+=k,f<0&&(f=0)):f>k&&(f=k),p<0?(p+=k,p<0&&(p=0)):p>k&&(p=k),p<f&&(p=f);const M=this.subarray(f,p);return Object.setPrototypeOf(M,l.prototype),M};function q(m,f,p){if(m%1!==0||m<0)throw new RangeError("offset is not uint");if(m+f>p)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(f,p,k){f=f>>>0,p=p>>>0,k||q(f,p,this.length);let M=this[f],P=1,F=0;for(;++F<p&&(P*=256);)M+=this[f+F]*P;return M},l.prototype.readUintBE=l.prototype.readUIntBE=function(f,p,k){f=f>>>0,p=p>>>0,k||q(f,p,this.length);let M=this[f+--p],P=1;for(;p>0&&(P*=256);)M+=this[f+--p]*P;return M},l.prototype.readUint8=l.prototype.readUInt8=function(f,p){return f=f>>>0,p||q(f,1,this.length),this[f]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(f,p){return f=f>>>0,p||q(f,2,this.length),this[f]|this[f+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(f,p){return f=f>>>0,p||q(f,2,this.length),this[f]<<8|this[f+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(f,p){return f=f>>>0,p||q(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(f,p){return f=f>>>0,p||q(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},l.prototype.readBigUInt64LE=tn(function(f){f=f>>>0,_n(f,"offset");const p=this[f],k=this[f+7];(p===void 0||k===void 0)&&Ht(f,this.length-8);const M=p+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,P=this[++f]+this[++f]*2**8+this[++f]*2**16+k*2**24;return BigInt(M)+(BigInt(P)<<BigInt(32))}),l.prototype.readBigUInt64BE=tn(function(f){f=f>>>0,_n(f,"offset");const p=this[f],k=this[f+7];(p===void 0||k===void 0)&&Ht(f,this.length-8);const M=p*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],P=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+k;return(BigInt(M)<<BigInt(32))+BigInt(P)}),l.prototype.readIntLE=function(f,p,k){f=f>>>0,p=p>>>0,k||q(f,p,this.length);let M=this[f],P=1,F=0;for(;++F<p&&(P*=256);)M+=this[f+F]*P;return P*=128,M>=P&&(M-=Math.pow(2,8*p)),M},l.prototype.readIntBE=function(f,p,k){f=f>>>0,p=p>>>0,k||q(f,p,this.length);let M=p,P=1,F=this[f+--M];for(;M>0&&(P*=256);)F+=this[f+--M]*P;return P*=128,F>=P&&(F-=Math.pow(2,8*p)),F},l.prototype.readInt8=function(f,p){return f=f>>>0,p||q(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},l.prototype.readInt16LE=function(f,p){f=f>>>0,p||q(f,2,this.length);const k=this[f]|this[f+1]<<8;return k&32768?k|4294901760:k},l.prototype.readInt16BE=function(f,p){f=f>>>0,p||q(f,2,this.length);const k=this[f+1]|this[f]<<8;return k&32768?k|4294901760:k},l.prototype.readInt32LE=function(f,p){return f=f>>>0,p||q(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},l.prototype.readInt32BE=function(f,p){return f=f>>>0,p||q(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},l.prototype.readBigInt64LE=tn(function(f){f=f>>>0,_n(f,"offset");const p=this[f],k=this[f+7];(p===void 0||k===void 0)&&Ht(f,this.length-8);const M=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(k<<24);return(BigInt(M)<<BigInt(32))+BigInt(p+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),l.prototype.readBigInt64BE=tn(function(f){f=f>>>0,_n(f,"offset");const p=this[f],k=this[f+7];(p===void 0||k===void 0)&&Ht(f,this.length-8);const M=(p<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(M)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+k)}),l.prototype.readFloatLE=function(f,p){return f=f>>>0,p||q(f,4,this.length),e.read(this,f,!0,23,4)},l.prototype.readFloatBE=function(f,p){return f=f>>>0,p||q(f,4,this.length),e.read(this,f,!1,23,4)},l.prototype.readDoubleLE=function(f,p){return f=f>>>0,p||q(f,8,this.length),e.read(this,f,!0,52,8)},l.prototype.readDoubleBE=function(f,p){return f=f>>>0,p||q(f,8,this.length),e.read(this,f,!1,52,8)};function J(m,f,p,k,M,P){if(!l.isBuffer(m))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>M||f<P)throw new RangeError('"value" argument is out of bounds');if(p+k>m.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(f,p,k,M){if(f=+f,p=p>>>0,k=k>>>0,!M){const Et=Math.pow(2,8*k)-1;J(this,f,p,k,Et,0)}let P=1,F=0;for(this[p]=f&255;++F<k&&(P*=256);)this[p+F]=f/P&255;return p+k},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(f,p,k,M){if(f=+f,p=p>>>0,k=k>>>0,!M){const Et=Math.pow(2,8*k)-1;J(this,f,p,k,Et,0)}let P=k-1,F=1;for(this[p+P]=f&255;--P>=0&&(F*=256);)this[p+P]=f/F&255;return p+k},l.prototype.writeUint8=l.prototype.writeUInt8=function(f,p,k){return f=+f,p=p>>>0,k||J(this,f,p,1,255,0),this[p]=f&255,p+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(f,p,k){return f=+f,p=p>>>0,k||J(this,f,p,2,65535,0),this[p]=f&255,this[p+1]=f>>>8,p+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(f,p,k){return f=+f,p=p>>>0,k||J(this,f,p,2,65535,0),this[p]=f>>>8,this[p+1]=f&255,p+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(f,p,k){return f=+f,p=p>>>0,k||J(this,f,p,4,4294967295,0),this[p+3]=f>>>24,this[p+2]=f>>>16,this[p+1]=f>>>8,this[p]=f&255,p+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(f,p,k){return f=+f,p=p>>>0,k||J(this,f,p,4,4294967295,0),this[p]=f>>>24,this[p+1]=f>>>16,this[p+2]=f>>>8,this[p+3]=f&255,p+4};function it(m,f,p,k,M){Nt(f,k,M,m,p,7);let P=Number(f&BigInt(4294967295));m[p++]=P,P=P>>8,m[p++]=P,P=P>>8,m[p++]=P,P=P>>8,m[p++]=P;let F=Number(f>>BigInt(32)&BigInt(4294967295));return m[p++]=F,F=F>>8,m[p++]=F,F=F>>8,m[p++]=F,F=F>>8,m[p++]=F,p}function It(m,f,p,k,M){Nt(f,k,M,m,p,7);let P=Number(f&BigInt(4294967295));m[p+7]=P,P=P>>8,m[p+6]=P,P=P>>8,m[p+5]=P,P=P>>8,m[p+4]=P;let F=Number(f>>BigInt(32)&BigInt(4294967295));return m[p+3]=F,F=F>>8,m[p+2]=F,F=F>>8,m[p+1]=F,F=F>>8,m[p]=F,p+8}l.prototype.writeBigUInt64LE=tn(function(f,p=0){return it(this,f,p,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=tn(function(f,p=0){return It(this,f,p,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(f,p,k,M){if(f=+f,p=p>>>0,!M){const yt=Math.pow(2,8*k-1);J(this,f,p,k,yt-1,-yt)}let P=0,F=1,Et=0;for(this[p]=f&255;++P<k&&(F*=256);)f<0&&Et===0&&this[p+P-1]!==0&&(Et=1),this[p+P]=(f/F>>0)-Et&255;return p+k},l.prototype.writeIntBE=function(f,p,k,M){if(f=+f,p=p>>>0,!M){const yt=Math.pow(2,8*k-1);J(this,f,p,k,yt-1,-yt)}let P=k-1,F=1,Et=0;for(this[p+P]=f&255;--P>=0&&(F*=256);)f<0&&Et===0&&this[p+P+1]!==0&&(Et=1),this[p+P]=(f/F>>0)-Et&255;return p+k},l.prototype.writeInt8=function(f,p,k){return f=+f,p=p>>>0,k||J(this,f,p,1,127,-128),f<0&&(f=255+f+1),this[p]=f&255,p+1},l.prototype.writeInt16LE=function(f,p,k){return f=+f,p=p>>>0,k||J(this,f,p,2,32767,-32768),this[p]=f&255,this[p+1]=f>>>8,p+2},l.prototype.writeInt16BE=function(f,p,k){return f=+f,p=p>>>0,k||J(this,f,p,2,32767,-32768),this[p]=f>>>8,this[p+1]=f&255,p+2},l.prototype.writeInt32LE=function(f,p,k){return f=+f,p=p>>>0,k||J(this,f,p,4,2147483647,-2147483648),this[p]=f&255,this[p+1]=f>>>8,this[p+2]=f>>>16,this[p+3]=f>>>24,p+4},l.prototype.writeInt32BE=function(f,p,k){return f=+f,p=p>>>0,k||J(this,f,p,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[p]=f>>>24,this[p+1]=f>>>16,this[p+2]=f>>>8,this[p+3]=f&255,p+4},l.prototype.writeBigInt64LE=tn(function(f,p=0){return it(this,f,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=tn(function(f,p=0){return It(this,f,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ft(m,f,p,k,M,P){if(p+k>m.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("Index out of range")}function gt(m,f,p,k,M){return f=+f,p=p>>>0,M||ft(m,f,p,4),e.write(m,f,p,k,23,4),p+4}l.prototype.writeFloatLE=function(f,p,k){return gt(this,f,p,!0,k)},l.prototype.writeFloatBE=function(f,p,k){return gt(this,f,p,!1,k)};function se(m,f,p,k,M){return f=+f,p=p>>>0,M||ft(m,f,p,8),e.write(m,f,p,k,52,8),p+8}l.prototype.writeDoubleLE=function(f,p,k){return se(this,f,p,!0,k)},l.prototype.writeDoubleBE=function(f,p,k){return se(this,f,p,!1,k)},l.prototype.copy=function(f,p,k,M){if(!l.isBuffer(f))throw new TypeError("argument should be a Buffer");if(k||(k=0),!M&&M!==0&&(M=this.length),p>=f.length&&(p=f.length),p||(p=0),M>0&&M<k&&(M=k),M===k||f.length===0||this.length===0)return 0;if(p<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("Index out of range");if(M<0)throw new RangeError("sourceEnd out of bounds");M>this.length&&(M=this.length),f.length-p<M-k&&(M=f.length-p+k);const P=M-k;return this===f&&typeof s.prototype.copyWithin=="function"?this.copyWithin(p,k,M):s.prototype.set.call(f,this.subarray(k,M),p),P},l.prototype.fill=function(f,p,k,M){if(typeof f=="string"){if(typeof p=="string"?(M=p,p=0,k=this.length):typeof k=="string"&&(M=k,k=this.length),M!==void 0&&typeof M!="string")throw new TypeError("encoding must be a string");if(typeof M=="string"&&!l.isEncoding(M))throw new TypeError("Unknown encoding: "+M);if(f.length===1){const F=f.charCodeAt(0);(M==="utf8"&&F<128||M==="latin1")&&(f=F)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(p<0||this.length<p||this.length<k)throw new RangeError("Out of range index");if(k<=p)return this;p=p>>>0,k=k===void 0?this.length:k>>>0,f||(f=0);let P;if(typeof f=="number")for(P=p;P<k;++P)this[P]=f;else{const F=l.isBuffer(f)?f:l.from(f,M),Et=F.length;if(Et===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(P=0;P<k-p;++P)this[P+p]=F[P%Et]}return this};const wt={};function bt(m,f,p){wt[m]=class extends p{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${m}]`,this.stack,delete this.name}get code(){return m}set code(M){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:M,writable:!0})}toString(){return`${this.name} [${m}]: ${this.message}`}}}bt("ERR_BUFFER_OUT_OF_BOUNDS",function(m){return m?`${m} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),bt("ERR_INVALID_ARG_TYPE",function(m,f){return`The "${m}" argument must be of type number. Received type ${typeof f}`},TypeError),bt("ERR_OUT_OF_RANGE",function(m,f,p){let k=`The value of "${m}" is out of range.`,M=p;return Number.isInteger(p)&&Math.abs(p)>2**32?M=De(String(p)):typeof p=="bigint"&&(M=String(p),(p>BigInt(2)**BigInt(32)||p<-(BigInt(2)**BigInt(32)))&&(M=De(M)),M+="n"),k+=` It must be ${f}. Received ${M}`,k},RangeError);function De(m){let f="",p=m.length;const k=m[0]==="-"?1:0;for(;p>=k+4;p-=3)f=`_${m.slice(p-3,p)}${f}`;return`${m.slice(0,p)}${f}`}function Lt(m,f,p){_n(f,"offset"),(m[f]===void 0||m[f+p]===void 0)&&Ht(f,m.length-(p+1))}function Nt(m,f,p,k,M,P){if(m>p||m<f){const F=typeof f=="bigint"?"n":"";let Et;throw f===0||f===BigInt(0)?Et=`>= 0${F} and < 2${F} ** ${(P+1)*8}${F}`:Et=`>= -(2${F} ** ${(P+1)*8-1}${F}) and < 2 ** ${(P+1)*8-1}${F}`,new wt.ERR_OUT_OF_RANGE("value",Et,m)}Lt(k,M,P)}function _n(m,f){if(typeof m!="number")throw new wt.ERR_INVALID_ARG_TYPE(f,"number",m)}function Ht(m,f,p){throw Math.floor(m)!==m?(_n(m,p),new wt.ERR_OUT_OF_RANGE("offset","an integer",m)):f<0?new wt.ERR_BUFFER_OUT_OF_BOUNDS:new wt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${f}`,m)}const Jt=/[^+/0-9A-Za-z-_]/g;function Kr(m){if(m=m.split("=")[0],m=m.trim().replace(Jt,""),m.length<2)return"";for(;m.length%4!==0;)m=m+"=";return m}function Kt(m,f){f=f||1/0;let p;const k=m.length;let M=null;const P=[];for(let F=0;F<k;++F){if(p=m.charCodeAt(F),p>55295&&p<57344){if(!M){if(p>56319){(f-=3)>-1&&P.push(239,191,189);continue}else if(F+1===k){(f-=3)>-1&&P.push(239,191,189);continue}M=p;continue}if(p<56320){(f-=3)>-1&&P.push(239,191,189),M=p;continue}p=(M-55296<<10|p-56320)+65536}else M&&(f-=3)>-1&&P.push(239,191,189);if(M=null,p<128){if((f-=1)<0)break;P.push(p)}else if(p<2048){if((f-=2)<0)break;P.push(p>>6|192,p&63|128)}else if(p<65536){if((f-=3)<0)break;P.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<1114112){if((f-=4)<0)break;P.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return P}function jt(m){const f=[];for(let p=0;p<m.length;++p)f.push(m.charCodeAt(p)&255);return f}function Qn(m,f){let p,k,M;const P=[];for(let F=0;F<m.length&&!((f-=2)<0);++F)p=m.charCodeAt(F),k=p>>8,M=p%256,P.push(M),P.push(k);return P}function Wt(m){return t.toByteArray(Kr(m))}function Ft(m,f,p,k){let M;for(M=0;M<k&&!(M+p>=f.length||M>=m.length);++M)f[M+p]=m[M];return M}function ze(m,f){return m instanceof f||m!=null&&m.constructor!=null&&m.constructor.name!=null&&m.constructor.name===f.name}function qt(m){return m!==m}const Zt=function(){const m="0123456789abcdef",f=new Array(256);for(let p=0;p<16;++p){const k=p*16;for(let M=0;M<16;++M)f[k+M]=m[p]+m[M]}return f}();function tn(m){return typeof BigInt>"u"?Qt:m}function Qt(){throw new Error("BigInt not supported")}})(ke);const _t=ke.Buffer,E0=ke.Blob,R0=ke.BlobOptions,ut=ke.Buffer,A0=ke.File,v0=ke.FileOptions,I0=ke.INSPECT_MAX_BYTES,S0=ke.SlowBuffer,k0=ke.TranscodeEncoding,T0=ke.atob,O0=ke.btoa,N0=ke.constants,x0=ke.isAscii,C0=ke.isUtf8,B0=ke.kMaxLength,M0=ke.kStringMaxLength,L0=ke.resolveObjectURL,P0=ke.transcode,U0=Object.freeze(Object.defineProperty({__proto__:null,Blob:E0,BlobOptions:R0,Buffer:ut,File:A0,FileOptions:v0,INSPECT_MAX_BYTES:I0,SlowBuffer:S0,TranscodeEncoding:k0,atob:T0,btoa:O0,constants:N0,default:_t,isAscii:x0,isUtf8:C0,kMaxLength:B0,kStringMaxLength:M0,resolveObjectURL:L0,transcode:P0},Symbol.toStringTag,{value:"Module"}));function Bs(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function D0(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function ts(n,...t){if(!D0(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error("Uint8Array expected of length "+t+", got length="+n.length)}function z0(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Bs(n.outputLen),Bs(n.blockLen)}function oi(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function Vl(n,t){ts(n);const e=t.outputLen;if(n.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}const Wr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const H0=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),Vo=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),An=(n,t)=>n<<32-t|n>>>t,lu=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,F0=n=>n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255;function hu(n){for(let t=0;t<n.length;t++)n[t]=F0(n[t])}function $0(n){if(typeof n!="string")throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array(new TextEncoder().encode(n))}function Xs(n){return typeof n=="string"&&(n=$0(n)),ts(n),n}function K0(...n){let t=0;for(let r=0;r<n.length;r++){const i=n[r];ts(i),t+=i.length}const e=new Uint8Array(t);for(let r=0,i=0;r<n.length;r++){const s=n[r];e.set(s,i),i+=s.length}return e}class ic{clone(){return this._cloneInto()}}function sc(n){const t=r=>n().update(Xs(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function Gl(n=32){if(Wr&&typeof Wr.getRandomValues=="function")return Wr.getRandomValues(new Uint8Array(n));if(Wr&&typeof Wr.randomBytes=="function")return Wr.randomBytes(n);throw new Error("crypto.getRandomValues must be defined")}function q0(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(e>>i&s),a=Number(e&s),u=r?4:0,h=r?0:4;n.setUint32(t+u,o,r),n.setUint32(t+h,a,r)}const W0=(n,t,e)=>n&t^~n&e,V0=(n,t,e)=>n&t^n&e^t&e;class jl extends ic{constructor(t,e,r,i){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Vo(this.buffer)}update(t){oi(this);const{view:e,buffer:r,blockLen:i}=this;t=Xs(t);const s=t.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const u=Vo(t);for(;i<=s-o;o+=i)this.process(u,o);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){oi(this),Vl(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let b=o;b<i;b++)e[b]=0;q0(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=Vo(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=u/4,l=this.get();if(h>l.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<h;b++)a.setUint32(4*b,l[b],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return t.length=i,t.pos=a,t.finished=s,t.destroyed=o,i%e&&t.buffer.set(r),t}}const gs=BigInt(2**32-1),Oa=BigInt(32);function Zl(n,t=!1){return t?{h:Number(n&gs),l:Number(n>>Oa&gs)}:{h:Number(n>>Oa&gs)|0,l:Number(n&gs)|0}}function Yl(n,t=!1){let e=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let i=0;i<n.length;i++){const{h:s,l:o}=Zl(n[i],t);[e[i],r[i]]=[s,o]}return[e,r]}const G0=(n,t)=>BigInt(n>>>0)<<Oa|BigInt(t>>>0),j0=(n,t,e)=>n>>>e,Z0=(n,t,e)=>n<<32-e|t>>>e,Y0=(n,t,e)=>n>>>e|t<<32-e,X0=(n,t,e)=>n<<32-e|t>>>e,J0=(n,t,e)=>n<<64-e|t>>>e-32,Q0=(n,t,e)=>n>>>e-32|t<<64-e,tg=(n,t)=>t,eg=(n,t)=>n,Xl=(n,t,e)=>n<<e|t>>>32-e,Jl=(n,t,e)=>t<<e|n>>>32-e,Ql=(n,t,e)=>t<<e-32|n>>>64-e,th=(n,t,e)=>n<<e-32|t>>>64-e;function ng(n,t,e,r){const i=(t>>>0)+(r>>>0);return{h:n+e+(i/2**32|0)|0,l:i|0}}const rg=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),ig=(n,t,e,r)=>t+e+r+(n/2**32|0)|0,sg=(n,t,e,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0),og=(n,t,e,r,i)=>t+e+r+i+(n/2**32|0)|0,ag=(n,t,e,r,i)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(i>>>0),cg=(n,t,e,r,i,s)=>t+e+r+i+s+(n/2**32|0)|0,Rt={fromBig:Zl,split:Yl,toBig:G0,shrSH:j0,shrSL:Z0,rotrSH:Y0,rotrSL:X0,rotrBH:J0,rotrBL:Q0,rotr32H:tg,rotr32L:eg,rotlSH:Xl,rotlSL:Jl,rotlBH:Ql,rotlBL:th,add:ng,add3L:rg,add3H:ig,add4L:sg,add4H:og,add5H:cg,add5L:ag},[ug,lg]=Rt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),tr=new Uint32Array(80),er=new Uint32Array(80);class hg extends jl{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:u,Eh:h,El:l,Fh:b,Fl:R,Gh:_,Gl:S,Hh:N,Hl:A}=this;return[t,e,r,i,s,o,a,u,h,l,b,R,_,S,N,A]}set(t,e,r,i,s,o,a,u,h,l,b,R,_,S,N,A){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=u|0,this.Eh=h|0,this.El=l|0,this.Fh=b|0,this.Fl=R|0,this.Gh=_|0,this.Gl=S|0,this.Hh=N|0,this.Hl=A|0}process(t,e){for(let x=0;x<16;x++,e+=4)tr[x]=t.getUint32(e),er[x]=t.getUint32(e+=4);for(let x=16;x<80;x++){const L=tr[x-15]|0,K=er[x-15]|0,Y=Rt.rotrSH(L,K,1)^Rt.rotrSH(L,K,8)^Rt.shrSH(L,K,7),$=Rt.rotrSL(L,K,1)^Rt.rotrSL(L,K,8)^Rt.shrSL(L,K,7),G=tr[x-2]|0,j=er[x-2]|0,tt=Rt.rotrSH(G,j,19)^Rt.rotrBH(G,j,61)^Rt.shrSH(G,j,6),W=Rt.rotrSL(G,j,19)^Rt.rotrBL(G,j,61)^Rt.shrSL(G,j,6),V=Rt.add4L($,W,er[x-7],er[x-16]),v=Rt.add4H(V,Y,tt,tr[x-7],tr[x-16]);tr[x]=v|0,er[x]=V|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:u,Dh:h,Dl:l,Eh:b,El:R,Fh:_,Fl:S,Gh:N,Gl:A,Hh:C,Hl:D}=this;for(let x=0;x<80;x++){const L=Rt.rotrSH(b,R,14)^Rt.rotrSH(b,R,18)^Rt.rotrBH(b,R,41),K=Rt.rotrSL(b,R,14)^Rt.rotrSL(b,R,18)^Rt.rotrBL(b,R,41),Y=b&_^~b&N,$=R&S^~R&A,G=Rt.add5L(D,K,$,lg[x],er[x]),j=Rt.add5H(G,C,L,Y,ug[x],tr[x]),tt=G|0,W=Rt.rotrSH(r,i,28)^Rt.rotrBH(r,i,34)^Rt.rotrBH(r,i,39),V=Rt.rotrSL(r,i,28)^Rt.rotrBL(r,i,34)^Rt.rotrBL(r,i,39),v=r&s^r&a^s&a,c=i&o^i&u^o&u;C=N|0,D=A|0,N=_|0,A=S|0,_=b|0,S=R|0,{h:b,l:R}=Rt.add(h|0,l|0,j|0,tt|0),h=a|0,l=u|0,a=s|0,u=o|0,s=r|0,o=i|0;const d=Rt.add3L(tt,V,c);r=Rt.add3H(d,j,W,v),i=d|0}({h:r,l:i}=Rt.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Rt.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:u}=Rt.add(this.Ch|0,this.Cl|0,a|0,u|0),{h,l}=Rt.add(this.Dh|0,this.Dl|0,h|0,l|0),{h:b,l:R}=Rt.add(this.Eh|0,this.El|0,b|0,R|0),{h:_,l:S}=Rt.add(this.Fh|0,this.Fl|0,_|0,S|0),{h:N,l:A}=Rt.add(this.Gh|0,this.Gl|0,N|0,A|0),{h:C,l:D}=Rt.add(this.Hh|0,this.Hl|0,C|0,D|0),this.set(r,i,s,o,a,u,h,l,b,R,_,S,N,A,C,D)}roundClean(){tr.fill(0),er.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const dg=sc(()=>new hg);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Js=BigInt(0),Qs=BigInt(1),fg=BigInt(2);function Nr(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function es(n){if(!Nr(n))throw new Error("Uint8Array expected")}function Yn(n,t){if(typeof t!="boolean")throw new Error(n+" boolean expected, got "+t)}const pg=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function xr(n){es(n);let t="";for(let e=0;e<n.length;e++)t+=pg[n[e]];return t}function Yr(n){const t=n.toString(16);return t.length&1?"0"+t:t}function oc(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?Js:BigInt("0x"+n)}const zn={_0:48,_9:57,A:65,F:70,a:97,f:102};function du(n){if(n>=zn._0&&n<=zn._9)return n-zn._0;if(n>=zn.A&&n<=zn.F)return n-(zn.A-10);if(n>=zn.a&&n<=zn.f)return n-(zn.a-10)}function ai(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const t=n.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(e);for(let i=0,s=0;i<e;i++,s+=2){const o=du(n.charCodeAt(s)),a=du(n.charCodeAt(s+1));if(o===void 0||a===void 0){const u=n[s]+n[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}r[i]=o*16+a}return r}function Or(n){return oc(xr(n))}function ei(n){return es(n),oc(xr(Uint8Array.from(n).reverse()))}function ci(n,t){return ai(n.toString(16).padStart(t*2,"0"))}function zi(n,t){return ci(n,t).reverse()}function gg(n){return ai(Yr(n))}function ve(n,t,e){let r;if(typeof t=="string")try{r=ai(t)}catch(s){throw new Error(n+" must be hex string or Uint8Array, cause: "+s)}else if(Nr(t))r=Uint8Array.from(t);else throw new Error(n+" must be hex string or Uint8Array");const i=r.length;if(typeof e=="number"&&i!==e)throw new Error(n+" of length "+e+" expected, got "+i);return r}function Cr(...n){let t=0;for(let r=0;r<n.length;r++){const i=n[r];es(i),t+=i.length}const e=new Uint8Array(t);for(let r=0,i=0;r<n.length;r++){const s=n[r];e.set(s,i),i+=s.length}return e}function yg(n,t){if(n.length!==t.length)return!1;let e=0;for(let r=0;r<n.length;r++)e|=n[r]^t[r];return e===0}function _g(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}const Go=n=>typeof n=="bigint"&&Js<=n;function to(n,t,e){return Go(n)&&Go(t)&&Go(e)&&t<=n&&n<e}function dn(n,t,e,r){if(!to(t,e,r))throw new Error("expected valid "+n+": "+e+" <= n < "+r+", got "+t)}function eh(n){let t;for(t=0;n>Js;n>>=Qs,t+=1);return t}function wg(n,t){return n>>BigInt(t)&Qs}function mg(n,t,e){return n|(e?Qs:Js)<<BigInt(t)}const ac=n=>(fg<<BigInt(n-1))-Qs,jo=n=>new Uint8Array(n),fu=n=>Uint8Array.from(n);function nh(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let r=jo(n),i=jo(n),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...b)=>e(i,r,...b),u=(b=jo())=>{i=a(fu([0]),b),r=a(),b.length!==0&&(i=a(fu([1]),b),r=a())},h=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let b=0;const R=[];for(;b<t;){r=a();const _=r.slice();R.push(_),b+=r.length}return Cr(...R)};return(b,R)=>{o(),u(b);let _;for(;!(_=R(h()));)u();return o(),_}}const bg={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||Nr(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,t)=>t.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function yi(n,t,e={}){const r=(i,s,o)=>{const a=bg[s];if(typeof a!="function")throw new Error("invalid validator function");const u=n[i];if(!(o&&u===void 0)&&!a(u,n))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+u)};for(const[i,s]of Object.entries(t))r(i,s,!1);for(const[i,s]of Object.entries(e))r(i,s,!0);return n}const Eg=()=>{throw new Error("not implemented")};function Hi(n){const t=new WeakMap;return(e,...r)=>{const i=t.get(e);if(i!==void 0)return i;const s=n(e,...r);return t.set(e,s),s}}const Rg=Object.freeze(Object.defineProperty({__proto__:null,aInRange:dn,abool:Yn,abytes:es,bitGet:wg,bitLen:eh,bitMask:ac,bitSet:mg,bytesToHex:xr,bytesToNumberBE:Or,bytesToNumberLE:ei,concatBytes:Cr,createHmacDrbg:nh,ensureBytes:ve,equalBytes:yg,hexToBytes:ai,hexToNumber:oc,inRange:to,isBytes:Nr,memoized:Hi,notImplemented:Eg,numberToBytesBE:ci,numberToBytesLE:zi,numberToHexUnpadded:Yr,numberToVarBytesBE:gg,utf8ToBytes:_g,validateObject:yi},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ce=BigInt(0),re=BigInt(1),mr=BigInt(2),Ag=BigInt(3),Na=BigInt(4),pu=BigInt(5),gu=BigInt(8);function ee(n,t){const e=n%t;return e>=Ce?e:t+e}function vg(n,t,e){if(t<Ce)throw new Error("invalid exponent, negatives unsupported");if(e<=Ce)throw new Error("invalid modulus");if(e===re)return Ce;let r=re;for(;t>Ce;)t&re&&(r=r*n%e),n=n*n%e,t>>=re;return r}function oe(n,t,e){let r=n;for(;t-- >Ce;)r*=r,r%=e;return r}function xa(n,t){if(n===Ce)throw new Error("invert: expected non-zero number");if(t<=Ce)throw new Error("invert: expected positive modulus, got "+t);let e=ee(n,t),r=t,i=Ce,s=re;for(;e!==Ce;){const a=r/e,u=r%e,h=i-s*a;r=e,e=u,i=s,s=h}if(r!==re)throw new Error("invert: does not exist");return ee(i,t)}function Ig(n){const t=(n-re)/mr;let e,r,i;for(e=n-re,r=0;e%mr===Ce;e/=mr,r++);for(i=mr;i<n&&vg(i,t,n)!==n-re;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(n+re)/Na;return function(u,h){const l=u.pow(h,o);if(!u.eql(u.sqr(l),h))throw new Error("Cannot find square root");return l}}const s=(e+re)/mr;return function(a,u){if(a.pow(u,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let h=r,l=a.pow(a.mul(a.ONE,i),e),b=a.pow(u,s),R=a.pow(u,e);for(;!a.eql(R,a.ONE);){if(a.eql(R,a.ZERO))return a.ZERO;let _=1;for(let N=a.sqr(R);_<h&&!a.eql(N,a.ONE);_++)N=a.sqr(N);const S=a.pow(l,re<<BigInt(h-_-1));l=a.sqr(S),b=a.mul(b,S),R=a.mul(R,l),h=_}return b}}function Sg(n){if(n%Na===Ag){const t=(n+re)/Na;return function(r,i){const s=r.pow(i,t);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(n%gu===pu){const t=(n-pu)/gu;return function(r,i){const s=r.mul(i,mr),o=r.pow(s,t),a=r.mul(i,o),u=r.mul(r.mul(a,mr),o),h=r.mul(a,r.sub(u,r.ONE));if(!r.eql(r.sqr(h),i))throw new Error("Cannot find square root");return h}}return Ig(n)}const kg=(n,t)=>(ee(n,t)&re)===re,Tg=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Og(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=Tg.reduce((r,i)=>(r[i]="function",r),t);return yi(n,e)}function Ng(n,t,e){if(e<Ce)throw new Error("invalid exponent, negatives unsupported");if(e===Ce)return n.ONE;if(e===re)return t;let r=n.ONE,i=t;for(;e>Ce;)e&re&&(r=n.mul(r,i)),i=n.sqr(i),e>>=re;return r}function xg(n,t){const e=new Array(t.length),r=t.reduce((s,o,a)=>n.is0(o)?s:(e[a]=s,n.mul(s,o)),n.ONE),i=n.inv(r);return t.reduceRight((s,o,a)=>n.is0(o)?s:(e[a]=n.mul(s,e[a]),n.mul(s,o)),i),e}function rh(n,t){const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function eo(n,t,e=!1,r={}){if(n<=Ce)throw new Error("invalid field: expected ORDER > 0, got "+n);const{nBitLength:i,nByteLength:s}=rh(n,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:n,isLE:e,BITS:i,BYTES:s,MASK:ac(i),ZERO:Ce,ONE:re,create:u=>ee(u,n),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return Ce<=u&&u<n},is0:u=>u===Ce,isOdd:u=>(u&re)===re,neg:u=>ee(-u,n),eql:(u,h)=>u===h,sqr:u=>ee(u*u,n),add:(u,h)=>ee(u+h,n),sub:(u,h)=>ee(u-h,n),mul:(u,h)=>ee(u*h,n),pow:(u,h)=>Ng(a,u,h),div:(u,h)=>ee(u*xa(h,n),n),sqrN:u=>u*u,addN:(u,h)=>u+h,subN:(u,h)=>u-h,mulN:(u,h)=>u*h,inv:u=>xa(u,n),sqrt:r.sqrt||(u=>(o||(o=Sg(n)),o(a,u))),invertBatch:u=>xg(a,u),cmov:(u,h,l)=>l?h:u,toBytes:u=>e?zi(u,s):ci(u,s),fromBytes:u=>{if(u.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+u.length);return e?ei(u):Or(u)}});return Object.freeze(a)}function ih(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function sh(n){const t=ih(n);return t+Math.ceil(t/2)}function Cg(n,t,e=!1){const r=n.length,i=ih(t),s=sh(t);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=e?ei(n):Or(n),a=ee(o,t-re)+re;return e?zi(a,i):ci(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yu=BigInt(0),ys=BigInt(1);function Zo(n,t){const e=t.negate();return n?e:t}function oh(n,t){if(!Number.isSafeInteger(n)||n<=0||n>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+n)}function Yo(n,t){oh(n,t);const e=Math.ceil(t/n)+1,r=2**(n-1);return{windows:e,windowSize:r}}function Bg(n,t){if(!Array.isArray(n))throw new Error("array expected");n.forEach((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)})}function Mg(n,t){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)})}const Xo=new WeakMap,ah=new WeakMap;function Jo(n){return ah.get(n)||1}function ch(n,t){return{constTimeNegate:Zo,hasPrecomputes(e){return Jo(e)!==1},unsafeLadder(e,r,i=n.ZERO){let s=e;for(;r>yu;)r&ys&&(i=i.add(s)),s=s.double(),r>>=ys;return i},precomputeWindow(e,r){const{windows:i,windowSize:s}=Yo(r,t),o=[];let a=e,u=a;for(let h=0;h<i;h++){u=a,o.push(u);for(let l=1;l<s;l++)u=u.add(a),o.push(u);a=u.double()}return o},wNAF(e,r,i){const{windows:s,windowSize:o}=Yo(e,t);let a=n.ZERO,u=n.BASE;const h=BigInt(2**e-1),l=2**e,b=BigInt(e);for(let R=0;R<s;R++){const _=R*o;let S=Number(i&h);i>>=b,S>o&&(S-=l,i+=ys);const N=_,A=_+Math.abs(S)-1,C=R%2!==0,D=S<0;S===0?u=u.add(Zo(C,r[N])):a=a.add(Zo(D,r[A]))}return{p:a,f:u}},wNAFUnsafe(e,r,i,s=n.ZERO){const{windows:o,windowSize:a}=Yo(e,t),u=BigInt(2**e-1),h=2**e,l=BigInt(e);for(let b=0;b<o;b++){const R=b*a;if(i===yu)break;let _=Number(i&u);if(i>>=l,_>a&&(_-=h,i+=ys),_===0)continue;let S=r[R+Math.abs(_)-1];_<0&&(S=S.negate()),s=s.add(S)}return s},getPrecomputes(e,r,i){let s=Xo.get(r);return s||(s=this.precomputeWindow(r,e),e!==1&&Xo.set(r,i(s))),s},wNAFCached(e,r,i){const s=Jo(e);return this.wNAF(s,this.getPrecomputes(s,e,i),r)},wNAFCachedUnsafe(e,r,i,s){const o=Jo(e);return o===1?this.unsafeLadder(e,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,e,i),r,s)},setWindowSize(e,r){oh(r,t),ah.set(e,r),Xo.delete(e)}}}function uh(n,t,e,r){if(Bg(e,n),Mg(r,t),e.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=n.ZERO,s=eh(BigInt(e.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,u=new Array(a+1).fill(i),h=Math.floor((t.BITS-1)/o)*o;let l=i;for(let b=h;b>=0;b-=o){u.fill(i);for(let _=0;_<r.length;_++){const S=r[_],N=Number(S>>BigInt(b)&BigInt(a));u[N]=u[N].add(e[_])}let R=i;for(let _=u.length-1,S=i;_>0;_--)S=S.add(u[_]),R=R.add(S);if(l=l.add(R),b!==0)for(let _=0;_<o;_++)l=l.double()}return l}function cc(n){return Og(n.Fp),yi(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...rh(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wn=BigInt(0),Ge=BigInt(1),_s=BigInt(2),Lg=BigInt(8),Pg={zip215:!0};function Ug(n){const t=cc(n);return yi(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function Dg(n){const t=Ug(n),{Fp:e,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:u}=t,h=_s<<BigInt(a*8)-Ge,l=e.create,b=eo(t.n,t.nBitLength),R=t.uvRatio||((y,w)=>{try{return{isValid:!0,value:e.sqrt(y*e.inv(w))}}catch{return{isValid:!1,value:wn}}}),_=t.adjustScalarBytes||(y=>y),S=t.domain||((y,w,E)=>{if(Yn("phflag",E),w.length||E)throw new Error("Contexts/pre-hash are not supported");return y});function N(y,w){dn("coordinate "+y,w,wn,h)}function A(y){if(!(y instanceof x))throw new Error("ExtendedPoint expected")}const C=Hi((y,w)=>{const{ex:E,ey:T,ez:B}=y,I=y.is0();w==null&&(w=I?Lg:e.inv(B));const g=l(E*w),O=l(T*w),q=l(B*w);if(I)return{x:wn,y:Ge};if(q!==Ge)throw new Error("invZ was invalid");return{x:g,y:O}}),D=Hi(y=>{const{a:w,d:E}=t;if(y.is0())throw new Error("bad point: ZERO");const{ex:T,ey:B,ez:I,et:g}=y,O=l(T*T),q=l(B*B),J=l(I*I),it=l(J*J),It=l(O*w),ft=l(J*l(It+q)),gt=l(it+l(E*l(O*q)));if(ft!==gt)throw new Error("bad point: equation left != right (1)");const se=l(T*B),wt=l(I*g);if(se!==wt)throw new Error("bad point: equation left != right (2)");return!0});class x{constructor(w,E,T,B){this.ex=w,this.ey=E,this.ez=T,this.et=B,N("x",w),N("y",E),N("z",T),N("t",B),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(w){if(w instanceof x)throw new Error("extended point not allowed");const{x:E,y:T}=w||{};return N("x",E),N("y",T),new x(E,T,Ge,l(E*T))}static normalizeZ(w){const E=e.invertBatch(w.map(T=>T.ez));return w.map((T,B)=>T.toAffine(E[B])).map(x.fromAffine)}static msm(w,E){return uh(x,b,w,E)}_setWindowSize(w){Y.setWindowSize(this,w)}assertValidity(){D(this)}equals(w){A(w);const{ex:E,ey:T,ez:B}=this,{ex:I,ey:g,ez:O}=w,q=l(E*O),J=l(I*B),it=l(T*O),It=l(g*B);return q===J&&it===It}is0(){return this.equals(x.ZERO)}negate(){return new x(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:w}=t,{ex:E,ey:T,ez:B}=this,I=l(E*E),g=l(T*T),O=l(_s*l(B*B)),q=l(w*I),J=E+T,it=l(l(J*J)-I-g),It=q+g,ft=It-O,gt=q-g,se=l(it*ft),wt=l(It*gt),bt=l(it*gt),De=l(ft*It);return new x(se,wt,De,bt)}add(w){A(w);const{a:E,d:T}=t,{ex:B,ey:I,ez:g,et:O}=this,{ex:q,ey:J,ez:it,et:It}=w;if(E===BigInt(-1)){const Kt=l((I-B)*(J+q)),jt=l((I+B)*(J-q)),Qn=l(jt-Kt);if(Qn===wn)return this.double();const Wt=l(g*_s*It),Ft=l(O*_s*it),ze=Ft+Wt,qt=jt+Kt,Zt=Ft-Wt,tn=l(ze*Qn),Qt=l(qt*Zt),m=l(ze*Zt),f=l(Qn*qt);return new x(tn,Qt,f,m)}const ft=l(B*q),gt=l(I*J),se=l(O*T*It),wt=l(g*it),bt=l((B+I)*(q+J)-ft-gt),De=wt-se,Lt=wt+se,Nt=l(gt-E*ft),_n=l(bt*De),Ht=l(Lt*Nt),Jt=l(bt*Nt),Kr=l(De*Lt);return new x(_n,Ht,Kr,Jt)}subtract(w){return this.add(w.negate())}wNAF(w){return Y.wNAFCached(this,w,x.normalizeZ)}multiply(w){const E=w;dn("scalar",E,Ge,r);const{p:T,f:B}=this.wNAF(E);return x.normalizeZ([T,B])[0]}multiplyUnsafe(w,E=x.ZERO){const T=w;return dn("scalar",T,wn,r),T===wn?K:this.is0()||T===Ge?this:Y.wNAFCachedUnsafe(this,T,x.normalizeZ,E)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return Y.unsafeLadder(this,r).is0()}toAffine(w){return C(this,w)}clearCofactor(){const{h:w}=t;return w===Ge?this:this.multiplyUnsafe(w)}static fromHex(w,E=!1){const{d:T,a:B}=t,I=e.BYTES;w=ve("pointHex",w,I),Yn("zip215",E);const g=w.slice(),O=w[I-1];g[I-1]=O&-129;const q=ei(g),J=E?h:e.ORDER;dn("pointHex.y",q,wn,J);const it=l(q*q),It=l(it-Ge),ft=l(T*it-B);let{isValid:gt,value:se}=R(It,ft);if(!gt)throw new Error("Point.fromHex: invalid y coordinate");const wt=(se&Ge)===Ge,bt=(O&128)!==0;if(!E&&se===wn&&bt)throw new Error("Point.fromHex: x=0 and x_0=1");return bt!==wt&&(se=l(-se)),x.fromAffine({x:se,y:q})}static fromPrivateKey(w){return j(w).point}toRawBytes(){const{x:w,y:E}=this.toAffine(),T=zi(E,e.BYTES);return T[T.length-1]|=w&Ge?128:0,T}toHex(){return xr(this.toRawBytes())}}x.BASE=new x(t.Gx,t.Gy,Ge,l(t.Gx*t.Gy)),x.ZERO=new x(wn,Ge,Ge,wn);const{BASE:L,ZERO:K}=x,Y=ch(x,a*8);function $(y){return ee(y,r)}function G(y){return $(ei(y))}function j(y){const w=e.BYTES;y=ve("private key",y,w);const E=ve("hashed private key",s(y),2*w),T=_(E.slice(0,w)),B=E.slice(w,2*w),I=G(T),g=L.multiply(I),O=g.toRawBytes();return{head:T,prefix:B,scalar:I,point:g,pointBytes:O}}function tt(y){return j(y).pointBytes}function W(y=new Uint8Array,...w){const E=Cr(...w);return G(s(S(E,ve("context",y),!!i)))}function V(y,w,E={}){y=ve("message",y),i&&(y=i(y));const{prefix:T,scalar:B,pointBytes:I}=j(w),g=W(E.context,T,y),O=L.multiply(g).toRawBytes(),q=W(E.context,O,I,y),J=$(g+q*B);dn("signature.s",J,wn,r);const it=Cr(O,zi(J,e.BYTES));return ve("result",it,e.BYTES*2)}const v=Pg;function c(y,w,E,T=v){const{context:B,zip215:I}=T,g=e.BYTES;y=ve("signature",y,2*g),w=ve("message",w),E=ve("publicKey",E,g),I!==void 0&&Yn("zip215",I),i&&(w=i(w));const O=ei(y.slice(g,2*g));let q,J,it;try{q=x.fromHex(E,I),J=x.fromHex(y.slice(0,g),I),it=L.multiplyUnsafe(O)}catch{return!1}if(!I&&q.isSmallOrder())return!1;const It=W(B,J.toRawBytes(),q.toRawBytes(),w);return J.add(q.multiplyUnsafe(It)).subtract(it).clearCofactor().equals(x.ZERO)}return L._setWindowSize(8),{CURVE:t,getPublicKey:tt,sign:V,verify:c,ExtendedPoint:x,utils:{getExtendedPublicKey:j,randomPrivateKey:()=>o(e.BYTES),precompute(y=8,w=x.BASE){return w._setWindowSize(y),w.multiply(BigInt(3)),w}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const uc=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),_u=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const zg=BigInt(1),wu=BigInt(2);BigInt(3);const Hg=BigInt(5),Fg=BigInt(8);function $g(n){const t=BigInt(10),e=BigInt(20),r=BigInt(40),i=BigInt(80),s=uc,a=n*n%s*n%s,u=oe(a,wu,s)*a%s,h=oe(u,zg,s)*n%s,l=oe(h,Hg,s)*h%s,b=oe(l,t,s)*l%s,R=oe(b,e,s)*b%s,_=oe(R,r,s)*R%s,S=oe(_,i,s)*_%s,N=oe(S,i,s)*_%s,A=oe(N,t,s)*l%s;return{pow_p_5_8:oe(A,wu,s)*n%s,b2:a}}function Kg(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function qg(n,t){const e=uc,r=ee(t*t*t,e),i=ee(r*r*t,e),s=$g(n*i).pow_p_5_8;let o=ee(n*r*s,e);const a=ee(t*o*o,e),u=o,h=ee(o*_u,e),l=a===n,b=a===ee(-n,e),R=a===ee(-n*_u,e);return l&&(o=u),(b||R)&&(o=h),kg(o,e)&&(o=ee(-o,e)),{isValid:l||b,value:o}}const Wg=eo(uc,void 0,!0),Vg={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Wg,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Fg,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:dg,randomBytes:Gl,adjustScalarBytes:Kg,uvRatio:qg},_i=Dg(Vg);var lc={exports:{}};const hc=Zs(U0);lc.exports;(function(n){(function(t,e){function r(v,c){if(!v)throw new Error(c||"Assertion failed")}function i(v,c){v.super_=c;var d=function(){};d.prototype=c.prototype,v.prototype=new d,v.prototype.constructor=v}function s(v,c,d){if(s.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&((c==="le"||c==="be")&&(d=c,c=10),this._init(v||0,c||10,d||"be"))}typeof t=="object"?t.exports=s:e.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=hc.Buffer}catch{}s.isBN=function(c){return c instanceof s?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===s.wordSize&&Array.isArray(c.words)},s.max=function(c,d){return c.cmp(d)>0?c:d},s.min=function(c,d){return c.cmp(d)<0?c:d},s.prototype._init=function(c,d,y){if(typeof c=="number")return this._initNumber(c,d,y);if(typeof c=="object")return this._initArray(c,d,y);d==="hex"&&(d=16),r(d===(d|0)&&d>=2&&d<=36),c=c.toString().replace(/\s+/g,"");var w=0;c[0]==="-"&&(w++,this.negative=1),w<c.length&&(d===16?this._parseHex(c,w,y):(this._parseBase(c,d,w),y==="le"&&this._initArray(this.toArray(),d,y)))},s.prototype._initNumber=function(c,d,y){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(r(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),d,y)},s.prototype._initArray=function(c,d,y){if(r(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var E,T,B=0;if(y==="be")for(w=c.length-1,E=0;w>=0;w-=3)T=c[w]|c[w-1]<<8|c[w-2]<<16,this.words[E]|=T<<B&67108863,this.words[E+1]=T>>>26-B&67108863,B+=24,B>=26&&(B-=26,E++);else if(y==="le")for(w=0,E=0;w<c.length;w+=3)T=c[w]|c[w+1]<<8|c[w+2]<<16,this.words[E]|=T<<B&67108863,this.words[E+1]=T>>>26-B&67108863,B+=24,B>=26&&(B-=26,E++);return this._strip()};function a(v,c){var d=v.charCodeAt(c);if(d>=48&&d<=57)return d-48;if(d>=65&&d<=70)return d-55;if(d>=97&&d<=102)return d-87;r(!1,"Invalid character in "+v)}function u(v,c,d){var y=a(v,d);return d-1>=c&&(y|=a(v,d-1)<<4),y}s.prototype._parseHex=function(c,d,y){this.length=Math.ceil((c.length-d)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var E=0,T=0,B;if(y==="be")for(w=c.length-1;w>=d;w-=2)B=u(c,d,w)<<E,this.words[T]|=B&67108863,E>=18?(E-=18,T+=1,this.words[T]|=B>>>26):E+=8;else{var I=c.length-d;for(w=I%2===0?d+1:d;w<c.length;w+=2)B=u(c,d,w)<<E,this.words[T]|=B&67108863,E>=18?(E-=18,T+=1,this.words[T]|=B>>>26):E+=8}this._strip()};function h(v,c,d,y){for(var w=0,E=0,T=Math.min(v.length,d),B=c;B<T;B++){var I=v.charCodeAt(B)-48;w*=y,I>=49?E=I-49+10:I>=17?E=I-17+10:E=I,r(I>=0&&E<y,"Invalid character"),w+=E}return w}s.prototype._parseBase=function(c,d,y){this.words=[0],this.length=1;for(var w=0,E=1;E<=67108863;E*=d)w++;w--,E=E/d|0;for(var T=c.length-y,B=T%w,I=Math.min(T,T-B)+y,g=0,O=y;O<I;O+=w)g=h(c,O,O+w,d),this.imuln(E),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g);if(B!==0){var q=1;for(g=h(c,O,c.length,d),O=0;O<B;O++)q*=d;this.imuln(q),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g)}this._strip()},s.prototype.copy=function(c){c.words=new Array(this.length);for(var d=0;d<this.length;d++)c.words[d]=this.words[d];c.length=this.length,c.negative=this.negative,c.red=this.red};function l(v,c){v.words=c.words,v.length=c.length,v.negative=c.negative,v.red=c.red}if(s.prototype._move=function(c){l(c,this)},s.prototype.clone=function(){var c=new s(null);return this.copy(c),c},s.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=b}catch{s.prototype.inspect=b}else s.prototype.inspect=b;function b(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var R=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(c,d){c=c||10,d=d|0||1;var y;if(c===16||c==="hex"){y="";for(var w=0,E=0,T=0;T<this.length;T++){var B=this.words[T],I=((B<<w|E)&16777215).toString(16);E=B>>>24-w&16777215,w+=2,w>=26&&(w-=26,T--),E!==0||T!==this.length-1?y=R[6-I.length]+I+y:y=I+y}for(E!==0&&(y=E.toString(16)+y);y.length%d!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(c===(c|0)&&c>=2&&c<=36){var g=_[c],O=S[c];y="";var q=this.clone();for(q.negative=0;!q.isZero();){var J=q.modrn(O).toString(c);q=q.idivn(O),q.isZero()?y=J+y:y=R[g-J.length]+J+y}for(this.isZero()&&(y="0"+y);y.length%d!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(c,d){return this.toArrayLike(o,c,d)}),s.prototype.toArray=function(c,d){return this.toArrayLike(Array,c,d)};var N=function(c,d){return c.allocUnsafe?c.allocUnsafe(d):new c(d)};s.prototype.toArrayLike=function(c,d,y){this._strip();var w=this.byteLength(),E=y||Math.max(1,w);r(w<=E,"byte array longer than desired length"),r(E>0,"Requested array length <= 0");var T=N(c,E),B=d==="le"?"LE":"BE";return this["_toArrayLike"+B](T,w),T},s.prototype._toArrayLikeLE=function(c,d){for(var y=0,w=0,E=0,T=0;E<this.length;E++){var B=this.words[E]<<T|w;c[y++]=B&255,y<c.length&&(c[y++]=B>>8&255),y<c.length&&(c[y++]=B>>16&255),T===6?(y<c.length&&(c[y++]=B>>24&255),w=0,T=0):(w=B>>>24,T+=2)}if(y<c.length)for(c[y++]=w;y<c.length;)c[y++]=0},s.prototype._toArrayLikeBE=function(c,d){for(var y=c.length-1,w=0,E=0,T=0;E<this.length;E++){var B=this.words[E]<<T|w;c[y--]=B&255,y>=0&&(c[y--]=B>>8&255),y>=0&&(c[y--]=B>>16&255),T===6?(y>=0&&(c[y--]=B>>24&255),w=0,T=0):(w=B>>>24,T+=2)}if(y>=0)for(c[y--]=w;y>=0;)c[y--]=0},Math.clz32?s.prototype._countBits=function(c){return 32-Math.clz32(c)}:s.prototype._countBits=function(c){var d=c,y=0;return d>=4096&&(y+=13,d>>>=13),d>=64&&(y+=7,d>>>=7),d>=8&&(y+=4,d>>>=4),d>=2&&(y+=2,d>>>=2),y+d},s.prototype._zeroBits=function(c){if(c===0)return 26;var d=c,y=0;return d&8191||(y+=13,d>>>=13),d&127||(y+=7,d>>>=7),d&15||(y+=4,d>>>=4),d&3||(y+=2,d>>>=2),d&1||y++,y},s.prototype.bitLength=function(){var c=this.words[this.length-1],d=this._countBits(c);return(this.length-1)*26+d};function A(v){for(var c=new Array(v.bitLength()),d=0;d<c.length;d++){var y=d/26|0,w=d%26;c[d]=v.words[y]>>>w&1}return c}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,d=0;d<this.length;d++){var y=this._zeroBits(this.words[d]);if(c+=y,y!==26)break}return c},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},s.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var d=0;d<c.length;d++)this.words[d]=this.words[d]|c.words[d];return this._strip()},s.prototype.ior=function(c){return r((this.negative|c.negative)===0),this.iuor(c)},s.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},s.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},s.prototype.iuand=function(c){var d;this.length>c.length?d=c:d=this;for(var y=0;y<d.length;y++)this.words[y]=this.words[y]&c.words[y];return this.length=d.length,this._strip()},s.prototype.iand=function(c){return r((this.negative|c.negative)===0),this.iuand(c)},s.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},s.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},s.prototype.iuxor=function(c){var d,y;this.length>c.length?(d=this,y=c):(d=c,y=this);for(var w=0;w<y.length;w++)this.words[w]=d.words[w]^y.words[w];if(this!==d)for(;w<d.length;w++)this.words[w]=d.words[w];return this.length=d.length,this._strip()},s.prototype.ixor=function(c){return r((this.negative|c.negative)===0),this.iuxor(c)},s.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},s.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},s.prototype.inotn=function(c){r(typeof c=="number"&&c>=0);var d=Math.ceil(c/26)|0,y=c%26;this._expand(d),y>0&&d--;for(var w=0;w<d;w++)this.words[w]=~this.words[w]&67108863;return y>0&&(this.words[w]=~this.words[w]&67108863>>26-y),this._strip()},s.prototype.notn=function(c){return this.clone().inotn(c)},s.prototype.setn=function(c,d){r(typeof c=="number"&&c>=0);var y=c/26|0,w=c%26;return this._expand(y+1),d?this.words[y]=this.words[y]|1<<w:this.words[y]=this.words[y]&~(1<<w),this._strip()},s.prototype.iadd=function(c){var d;if(this.negative!==0&&c.negative===0)return this.negative=0,d=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,d=this.isub(c),c.negative=1,d._normSign();var y,w;this.length>c.length?(y=this,w=c):(y=c,w=this);for(var E=0,T=0;T<w.length;T++)d=(y.words[T]|0)+(w.words[T]|0)+E,this.words[T]=d&67108863,E=d>>>26;for(;E!==0&&T<y.length;T++)d=(y.words[T]|0)+E,this.words[T]=d&67108863,E=d>>>26;if(this.length=y.length,E!==0)this.words[this.length]=E,this.length++;else if(y!==this)for(;T<y.length;T++)this.words[T]=y.words[T];return this},s.prototype.add=function(c){var d;return c.negative!==0&&this.negative===0?(c.negative=0,d=this.sub(c),c.negative^=1,d):c.negative===0&&this.negative!==0?(this.negative=0,d=c.sub(this),this.negative=1,d):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},s.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var d=this.iadd(c);return c.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var y=this.cmp(c);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var w,E;y>0?(w=this,E=c):(w=c,E=this);for(var T=0,B=0;B<E.length;B++)d=(w.words[B]|0)-(E.words[B]|0)+T,T=d>>26,this.words[B]=d&67108863;for(;T!==0&&B<w.length;B++)d=(w.words[B]|0)+T,T=d>>26,this.words[B]=d&67108863;if(T===0&&B<w.length&&w!==this)for(;B<w.length;B++)this.words[B]=w.words[B];return this.length=Math.max(this.length,B),w!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(c){return this.clone().isub(c)};function C(v,c,d){d.negative=c.negative^v.negative;var y=v.length+c.length|0;d.length=y,y=y-1|0;var w=v.words[0]|0,E=c.words[0]|0,T=w*E,B=T&67108863,I=T/67108864|0;d.words[0]=B;for(var g=1;g<y;g++){for(var O=I>>>26,q=I&67108863,J=Math.min(g,c.length-1),it=Math.max(0,g-v.length+1);it<=J;it++){var It=g-it|0;w=v.words[It]|0,E=c.words[it]|0,T=w*E+q,O+=T/67108864|0,q=T&67108863}d.words[g]=q|0,I=O|0}return I!==0?d.words[g]=I|0:d.length--,d._strip()}var D=function(c,d,y){var w=c.words,E=d.words,T=y.words,B=0,I,g,O,q=w[0]|0,J=q&8191,it=q>>>13,It=w[1]|0,ft=It&8191,gt=It>>>13,se=w[2]|0,wt=se&8191,bt=se>>>13,De=w[3]|0,Lt=De&8191,Nt=De>>>13,_n=w[4]|0,Ht=_n&8191,Jt=_n>>>13,Kr=w[5]|0,Kt=Kr&8191,jt=Kr>>>13,Qn=w[6]|0,Wt=Qn&8191,Ft=Qn>>>13,ze=w[7]|0,qt=ze&8191,Zt=ze>>>13,tn=w[8]|0,Qt=tn&8191,m=tn>>>13,f=w[9]|0,p=f&8191,k=f>>>13,M=E[0]|0,P=M&8191,F=M>>>13,Et=E[1]|0,yt=Et&8191,pt=Et>>>13,Yt=E[2]|0,dt=Yt&8191,ue=Yt>>>13,ru=E[3]|0,le=ru&8191,he=ru>>>13,iu=E[4]|0,de=iu&8191,fe=iu>>>13,su=E[5]|0,pe=su&8191,ge=su>>>13,ou=E[6]|0,ye=ou&8191,_e=ou>>>13,au=E[7]|0,we=au&8191,me=au>>>13,cu=E[8]|0,be=cu&8191,Ee=cu>>>13,uu=E[9]|0,Re=uu&8191,Ae=uu>>>13;y.negative=c.negative^d.negative,y.length=19,I=Math.imul(J,P),g=Math.imul(J,F),g=g+Math.imul(it,P)|0,O=Math.imul(it,F);var So=(B+I|0)+((g&8191)<<13)|0;B=(O+(g>>>13)|0)+(So>>>26)|0,So&=67108863,I=Math.imul(ft,P),g=Math.imul(ft,F),g=g+Math.imul(gt,P)|0,O=Math.imul(gt,F),I=I+Math.imul(J,yt)|0,g=g+Math.imul(J,pt)|0,g=g+Math.imul(it,yt)|0,O=O+Math.imul(it,pt)|0;var ko=(B+I|0)+((g&8191)<<13)|0;B=(O+(g>>>13)|0)+(ko>>>26)|0,ko&=67108863,I=Math.imul(wt,P),g=Math.imul(wt,F),g=g+Math.imul(bt,P)|0,O=Math.imul(bt,F),I=I+Math.imul(ft,yt)|0,g=g+Math.imul(ft,pt)|0,g=g+Math.imul(gt,yt)|0,O=O+Math.imul(gt,pt)|0,I=I+Math.imul(J,dt)|0,g=g+Math.imul(J,ue)|0,g=g+Math.imul(it,dt)|0,O=O+Math.imul(it,ue)|0;var To=(B+I|0)+((g&8191)<<13)|0;B=(O+(g>>>13)|0)+(To>>>26)|0,To&=67108863,I=Math.imul(Lt,P),g=Math.imul(Lt,F),g=g+Math.imul(Nt,P)|0,O=Math.imul(Nt,F),I=I+Math.imul(wt,yt)|0,g=g+Math.imul(wt,pt)|0,g=g+Math.imul(bt,yt)|0,O=O+Math.imul(bt,pt)|0,I=I+Math.imul(ft,dt)|0,g=g+Math.imul(ft,ue)|0,g=g+Math.imul(gt,dt)|0,O=O+Math.imul(gt,ue)|0,I=I+Math.imul(J,le)|0,g=g+Math.imul(J,he)|0,g=g+Math.imul(it,le)|0,O=O+Math.imul(it,he)|0;var Oo=(B+I|0)+((g&8191)<<13)|0;B=(O+(g>>>13)|0)+(Oo>>>26)|0,Oo&=67108863,I=Math.imul(Ht,P),g=Math.imul(Ht,F),g=g+Math.imul(Jt,P)|0,O=Math.imul(Jt,F),I=I+Math.imul(Lt,yt)|0,g=g+Math.imul(Lt,pt)|0,g=g+Math.imul(Nt,yt)|0,O=O+Math.imul(Nt,pt)|0,I=I+Math.imul(wt,dt)|0,g=g+Math.imul(wt,ue)|0,g=g+Math.imul(bt,dt)|0,O=O+Math.imul(bt,ue)|0,I=I+Math.imul(ft,le)|0,g=g+Math.imul(ft,he)|0,g=g+Math.imul(gt,le)|0,O=O+Math.imul(gt,he)|0,I=I+Math.imul(J,de)|0,g=g+Math.imul(J,fe)|0,g=g+Math.imul(it,de)|0,O=O+Math.imul(it,fe)|0;var No=(B+I|0)+((g&8191)<<13)|0;B=(O+(g>>>13)|0)+(No>>>26)|0,No&=67108863,I=Math.imul(Kt,P),g=Math.imul(Kt,F),g=g+Math.imul(jt,P)|0,O=Math.imul(jt,F),I=I+Math.imul(Ht,yt)|0,g=g+Math.imul(Ht,pt)|0,g=g+Math.imul(Jt,yt)|0,O=O+Math.imul(Jt,pt)|0,I=I+Math.imul(Lt,dt)|0,g=g+Math.imul(Lt,ue)|0,g=g+Math.imul(Nt,dt)|0,O=O+Math.imul(Nt,ue)|0,I=I+Math.imul(wt,le)|0,g=g+Math.imul(wt,he)|0,g=g+Math.imul(bt,le)|0,O=O+Math.imul(bt,he)|0,I=I+Math.imul(ft,de)|0,g=g+Math.imul(ft,fe)|0,g=g+Math.imul(gt,de)|0,O=O+Math.imul(gt,fe)|0,I=I+Math.imul(J,pe)|0,g=g+Math.imul(J,ge)|0,g=g+Math.imul(it,pe)|0,O=O+Math.imul(it,ge)|0;var xo=(B+I|0)+((g&8191)<<13)|0;B=(O+(g>>>13)|0)+(xo>>>26)|0,xo&=67108863,I=Math.imul(Wt,P),g=Math.imul(Wt,F),g=g+Math.imul(Ft,P)|0,O=Math.imul(Ft,F),I=I+Math.imul(Kt,yt)|0,g=g+Math.imul(Kt,pt)|0,g=g+Math.imul(jt,yt)|0,O=O+Math.imul(jt,pt)|0,I=I+Math.imul(Ht,dt)|0,g=g+Math.imul(Ht,ue)|0,g=g+Math.imul(Jt,dt)|0,O=O+Math.imul(Jt,ue)|0,I=I+Math.imul(Lt,le)|0,g=g+Math.imul(Lt,he)|0,g=g+Math.imul(Nt,le)|0,O=O+Math.imul(Nt,he)|0,I=I+Math.imul(wt,de)|0,g=g+Math.imul(wt,fe)|0,g=g+Math.imul(bt,de)|0,O=O+Math.imul(bt,fe)|0,I=I+Math.imul(ft,pe)|0,g=g+Math.imul(ft,ge)|0,g=g+Math.imul(gt,pe)|0,O=O+Math.imul(gt,ge)|0,I=I+Math.imul(J,ye)|0,g=g+Math.imul(J,_e)|0,g=g+Math.imul(it,ye)|0,O=O+Math.imul(it,_e)|0;var Co=(B+I|0)+((g&8191)<<13)|0;B=(O+(g>>>13)|0)+(Co>>>26)|0,Co&=67108863,I=Math.imul(qt,P),g=Math.imul(qt,F),g=g+Math.imul(Zt,P)|0,O=Math.imul(Zt,F),I=I+Math.imul(Wt,yt)|0,g=g+Math.imul(Wt,pt)|0,g=g+Math.imul(Ft,yt)|0,O=O+Math.imul(Ft,pt)|0,I=I+Math.imul(Kt,dt)|0,g=g+Math.imul(Kt,ue)|0,g=g+Math.imul(jt,dt)|0,O=O+Math.imul(jt,ue)|0,I=I+Math.imul(Ht,le)|0,g=g+Math.imul(Ht,he)|0,g=g+Math.imul(Jt,le)|0,O=O+Math.imul(Jt,he)|0,I=I+Math.imul(Lt,de)|0,g=g+Math.imul(Lt,fe)|0,g=g+Math.imul(Nt,de)|0,O=O+Math.imul(Nt,fe)|0,I=I+Math.imul(wt,pe)|0,g=g+Math.imul(wt,ge)|0,g=g+Math.imul(bt,pe)|0,O=O+Math.imul(bt,ge)|0,I=I+Math.imul(ft,ye)|0,g=g+Math.imul(ft,_e)|0,g=g+Math.imul(gt,ye)|0,O=O+Math.imul(gt,_e)|0,I=I+Math.imul(J,we)|0,g=g+Math.imul(J,me)|0,g=g+Math.imul(it,we)|0,O=O+Math.imul(it,me)|0;var Bo=(B+I|0)+((g&8191)<<13)|0;B=(O+(g>>>13)|0)+(Bo>>>26)|0,Bo&=67108863,I=Math.imul(Qt,P),g=Math.imul(Qt,F),g=g+Math.imul(m,P)|0,O=Math.imul(m,F),I=I+Math.imul(qt,yt)|0,g=g+Math.imul(qt,pt)|0,g=g+Math.imul(Zt,yt)|0,O=O+Math.imul(Zt,pt)|0,I=I+Math.imul(Wt,dt)|0,g=g+Math.imul(Wt,ue)|0,g=g+Math.imul(Ft,dt)|0,O=O+Math.imul(Ft,ue)|0,I=I+Math.imul(Kt,le)|0,g=g+Math.imul(Kt,he)|0,g=g+Math.imul(jt,le)|0,O=O+Math.imul(jt,he)|0,I=I+Math.imul(Ht,de)|0,g=g+Math.imul(Ht,fe)|0,g=g+Math.imul(Jt,de)|0,O=O+Math.imul(Jt,fe)|0,I=I+Math.imul(Lt,pe)|0,g=g+Math.imul(Lt,ge)|0,g=g+Math.imul(Nt,pe)|0,O=O+Math.imul(Nt,ge)|0,I=I+Math.imul(wt,ye)|0,g=g+Math.imul(wt,_e)|0,g=g+Math.imul(bt,ye)|0,O=O+Math.imul(bt,_e)|0,I=I+Math.imul(ft,we)|0,g=g+Math.imul(ft,me)|0,g=g+Math.imul(gt,we)|0,O=O+Math.imul(gt,me)|0,I=I+Math.imul(J,be)|0,g=g+Math.imul(J,Ee)|0,g=g+Math.imul(it,be)|0,O=O+Math.imul(it,Ee)|0;var Mo=(B+I|0)+((g&8191)<<13)|0;B=(O+(g>>>13)|0)+(Mo>>>26)|0,Mo&=67108863,I=Math.imul(p,P),g=Math.imul(p,F),g=g+Math.imul(k,P)|0,O=Math.imul(k,F),I=I+Math.imul(Qt,yt)|0,g=g+Math.imul(Qt,pt)|0,g=g+Math.imul(m,yt)|0,O=O+Math.imul(m,pt)|0,I=I+Math.imul(qt,dt)|0,g=g+Math.imul(qt,ue)|0,g=g+Math.imul(Zt,dt)|0,O=O+Math.imul(Zt,ue)|0,I=I+Math.imul(Wt,le)|0,g=g+Math.imul(Wt,he)|0,g=g+Math.imul(Ft,le)|0,O=O+Math.imul(Ft,he)|0,I=I+Math.imul(Kt,de)|0,g=g+Math.imul(Kt,fe)|0,g=g+Math.imul(jt,de)|0,O=O+Math.imul(jt,fe)|0,I=I+Math.imul(Ht,pe)|0,g=g+Math.imul(Ht,ge)|0,g=g+Math.imul(Jt,pe)|0,O=O+Math.imul(Jt,ge)|0,I=I+Math.imul(Lt,ye)|0,g=g+Math.imul(Lt,_e)|0,g=g+Math.imul(Nt,ye)|0,O=O+Math.imul(Nt,_e)|0,I=I+Math.imul(wt,we)|0,g=g+Math.imul(wt,me)|0,g=g+Math.imul(bt,we)|0,O=O+Math.imul(bt,me)|0,I=I+Math.imul(ft,be)|0,g=g+Math.imul(ft,Ee)|0,g=g+Math.imul(gt,be)|0,O=O+Math.imul(gt,Ee)|0,I=I+Math.imul(J,Re)|0,g=g+Math.imul(J,Ae)|0,g=g+Math.imul(it,Re)|0,O=O+Math.imul(it,Ae)|0;var Lo=(B+I|0)+((g&8191)<<13)|0;B=(O+(g>>>13)|0)+(Lo>>>26)|0,Lo&=67108863,I=Math.imul(p,yt),g=Math.imul(p,pt),g=g+Math.imul(k,yt)|0,O=Math.imul(k,pt),I=I+Math.imul(Qt,dt)|0,g=g+Math.imul(Qt,ue)|0,g=g+Math.imul(m,dt)|0,O=O+Math.imul(m,ue)|0,I=I+Math.imul(qt,le)|0,g=g+Math.imul(qt,he)|0,g=g+Math.imul(Zt,le)|0,O=O+Math.imul(Zt,he)|0,I=I+Math.imul(Wt,de)|0,g=g+Math.imul(Wt,fe)|0,g=g+Math.imul(Ft,de)|0,O=O+Math.imul(Ft,fe)|0,I=I+Math.imul(Kt,pe)|0,g=g+Math.imul(Kt,ge)|0,g=g+Math.imul(jt,pe)|0,O=O+Math.imul(jt,ge)|0,I=I+Math.imul(Ht,ye)|0,g=g+Math.imul(Ht,_e)|0,g=g+Math.imul(Jt,ye)|0,O=O+Math.imul(Jt,_e)|0,I=I+Math.imul(Lt,we)|0,g=g+Math.imul(Lt,me)|0,g=g+Math.imul(Nt,we)|0,O=O+Math.imul(Nt,me)|0,I=I+Math.imul(wt,be)|0,g=g+Math.imul(wt,Ee)|0,g=g+Math.imul(bt,be)|0,O=O+Math.imul(bt,Ee)|0,I=I+Math.imul(ft,Re)|0,g=g+Math.imul(ft,Ae)|0,g=g+Math.imul(gt,Re)|0,O=O+Math.imul(gt,Ae)|0;var Po=(B+I|0)+((g&8191)<<13)|0;B=(O+(g>>>13)|0)+(Po>>>26)|0,Po&=67108863,I=Math.imul(p,dt),g=Math.imul(p,ue),g=g+Math.imul(k,dt)|0,O=Math.imul(k,ue),I=I+Math.imul(Qt,le)|0,g=g+Math.imul(Qt,he)|0,g=g+Math.imul(m,le)|0,O=O+Math.imul(m,he)|0,I=I+Math.imul(qt,de)|0,g=g+Math.imul(qt,fe)|0,g=g+Math.imul(Zt,de)|0,O=O+Math.imul(Zt,fe)|0,I=I+Math.imul(Wt,pe)|0,g=g+Math.imul(Wt,ge)|0,g=g+Math.imul(Ft,pe)|0,O=O+Math.imul(Ft,ge)|0,I=I+Math.imul(Kt,ye)|0,g=g+Math.imul(Kt,_e)|0,g=g+Math.imul(jt,ye)|0,O=O+Math.imul(jt,_e)|0,I=I+Math.imul(Ht,we)|0,g=g+Math.imul(Ht,me)|0,g=g+Math.imul(Jt,we)|0,O=O+Math.imul(Jt,me)|0,I=I+Math.imul(Lt,be)|0,g=g+Math.imul(Lt,Ee)|0,g=g+Math.imul(Nt,be)|0,O=O+Math.imul(Nt,Ee)|0,I=I+Math.imul(wt,Re)|0,g=g+Math.imul(wt,Ae)|0,g=g+Math.imul(bt,Re)|0,O=O+Math.imul(bt,Ae)|0;var Uo=(B+I|0)+((g&8191)<<13)|0;B=(O+(g>>>13)|0)+(Uo>>>26)|0,Uo&=67108863,I=Math.imul(p,le),g=Math.imul(p,he),g=g+Math.imul(k,le)|0,O=Math.imul(k,he),I=I+Math.imul(Qt,de)|0,g=g+Math.imul(Qt,fe)|0,g=g+Math.imul(m,de)|0,O=O+Math.imul(m,fe)|0,I=I+Math.imul(qt,pe)|0,g=g+Math.imul(qt,ge)|0,g=g+Math.imul(Zt,pe)|0,O=O+Math.imul(Zt,ge)|0,I=I+Math.imul(Wt,ye)|0,g=g+Math.imul(Wt,_e)|0,g=g+Math.imul(Ft,ye)|0,O=O+Math.imul(Ft,_e)|0,I=I+Math.imul(Kt,we)|0,g=g+Math.imul(Kt,me)|0,g=g+Math.imul(jt,we)|0,O=O+Math.imul(jt,me)|0,I=I+Math.imul(Ht,be)|0,g=g+Math.imul(Ht,Ee)|0,g=g+Math.imul(Jt,be)|0,O=O+Math.imul(Jt,Ee)|0,I=I+Math.imul(Lt,Re)|0,g=g+Math.imul(Lt,Ae)|0,g=g+Math.imul(Nt,Re)|0,O=O+Math.imul(Nt,Ae)|0;var Do=(B+I|0)+((g&8191)<<13)|0;B=(O+(g>>>13)|0)+(Do>>>26)|0,Do&=67108863,I=Math.imul(p,de),g=Math.imul(p,fe),g=g+Math.imul(k,de)|0,O=Math.imul(k,fe),I=I+Math.imul(Qt,pe)|0,g=g+Math.imul(Qt,ge)|0,g=g+Math.imul(m,pe)|0,O=O+Math.imul(m,ge)|0,I=I+Math.imul(qt,ye)|0,g=g+Math.imul(qt,_e)|0,g=g+Math.imul(Zt,ye)|0,O=O+Math.imul(Zt,_e)|0,I=I+Math.imul(Wt,we)|0,g=g+Math.imul(Wt,me)|0,g=g+Math.imul(Ft,we)|0,O=O+Math.imul(Ft,me)|0,I=I+Math.imul(Kt,be)|0,g=g+Math.imul(Kt,Ee)|0,g=g+Math.imul(jt,be)|0,O=O+Math.imul(jt,Ee)|0,I=I+Math.imul(Ht,Re)|0,g=g+Math.imul(Ht,Ae)|0,g=g+Math.imul(Jt,Re)|0,O=O+Math.imul(Jt,Ae)|0;var zo=(B+I|0)+((g&8191)<<13)|0;B=(O+(g>>>13)|0)+(zo>>>26)|0,zo&=67108863,I=Math.imul(p,pe),g=Math.imul(p,ge),g=g+Math.imul(k,pe)|0,O=Math.imul(k,ge),I=I+Math.imul(Qt,ye)|0,g=g+Math.imul(Qt,_e)|0,g=g+Math.imul(m,ye)|0,O=O+Math.imul(m,_e)|0,I=I+Math.imul(qt,we)|0,g=g+Math.imul(qt,me)|0,g=g+Math.imul(Zt,we)|0,O=O+Math.imul(Zt,me)|0,I=I+Math.imul(Wt,be)|0,g=g+Math.imul(Wt,Ee)|0,g=g+Math.imul(Ft,be)|0,O=O+Math.imul(Ft,Ee)|0,I=I+Math.imul(Kt,Re)|0,g=g+Math.imul(Kt,Ae)|0,g=g+Math.imul(jt,Re)|0,O=O+Math.imul(jt,Ae)|0;var Ho=(B+I|0)+((g&8191)<<13)|0;B=(O+(g>>>13)|0)+(Ho>>>26)|0,Ho&=67108863,I=Math.imul(p,ye),g=Math.imul(p,_e),g=g+Math.imul(k,ye)|0,O=Math.imul(k,_e),I=I+Math.imul(Qt,we)|0,g=g+Math.imul(Qt,me)|0,g=g+Math.imul(m,we)|0,O=O+Math.imul(m,me)|0,I=I+Math.imul(qt,be)|0,g=g+Math.imul(qt,Ee)|0,g=g+Math.imul(Zt,be)|0,O=O+Math.imul(Zt,Ee)|0,I=I+Math.imul(Wt,Re)|0,g=g+Math.imul(Wt,Ae)|0,g=g+Math.imul(Ft,Re)|0,O=O+Math.imul(Ft,Ae)|0;var Fo=(B+I|0)+((g&8191)<<13)|0;B=(O+(g>>>13)|0)+(Fo>>>26)|0,Fo&=67108863,I=Math.imul(p,we),g=Math.imul(p,me),g=g+Math.imul(k,we)|0,O=Math.imul(k,me),I=I+Math.imul(Qt,be)|0,g=g+Math.imul(Qt,Ee)|0,g=g+Math.imul(m,be)|0,O=O+Math.imul(m,Ee)|0,I=I+Math.imul(qt,Re)|0,g=g+Math.imul(qt,Ae)|0,g=g+Math.imul(Zt,Re)|0,O=O+Math.imul(Zt,Ae)|0;var $o=(B+I|0)+((g&8191)<<13)|0;B=(O+(g>>>13)|0)+($o>>>26)|0,$o&=67108863,I=Math.imul(p,be),g=Math.imul(p,Ee),g=g+Math.imul(k,be)|0,O=Math.imul(k,Ee),I=I+Math.imul(Qt,Re)|0,g=g+Math.imul(Qt,Ae)|0,g=g+Math.imul(m,Re)|0,O=O+Math.imul(m,Ae)|0;var Ko=(B+I|0)+((g&8191)<<13)|0;B=(O+(g>>>13)|0)+(Ko>>>26)|0,Ko&=67108863,I=Math.imul(p,Re),g=Math.imul(p,Ae),g=g+Math.imul(k,Re)|0,O=Math.imul(k,Ae);var qo=(B+I|0)+((g&8191)<<13)|0;return B=(O+(g>>>13)|0)+(qo>>>26)|0,qo&=67108863,T[0]=So,T[1]=ko,T[2]=To,T[3]=Oo,T[4]=No,T[5]=xo,T[6]=Co,T[7]=Bo,T[8]=Mo,T[9]=Lo,T[10]=Po,T[11]=Uo,T[12]=Do,T[13]=zo,T[14]=Ho,T[15]=Fo,T[16]=$o,T[17]=Ko,T[18]=qo,B!==0&&(T[19]=B,y.length++),y};Math.imul||(D=C);function x(v,c,d){d.negative=c.negative^v.negative,d.length=v.length+c.length;for(var y=0,w=0,E=0;E<d.length-1;E++){var T=w;w=0;for(var B=y&67108863,I=Math.min(E,c.length-1),g=Math.max(0,E-v.length+1);g<=I;g++){var O=E-g,q=v.words[O]|0,J=c.words[g]|0,it=q*J,It=it&67108863;T=T+(it/67108864|0)|0,It=It+B|0,B=It&67108863,T=T+(It>>>26)|0,w+=T>>>26,T&=67108863}d.words[E]=B,y=T,T=w}return y!==0?d.words[E]=y:d.length--,d._strip()}function L(v,c,d){return x(v,c,d)}s.prototype.mulTo=function(c,d){var y,w=this.length+c.length;return this.length===10&&c.length===10?y=D(this,c,d):w<63?y=C(this,c,d):w<1024?y=x(this,c,d):y=L(this,c,d),y},s.prototype.mul=function(c){var d=new s(null);return d.words=new Array(this.length+c.length),this.mulTo(c,d)},s.prototype.mulf=function(c){var d=new s(null);return d.words=new Array(this.length+c.length),L(this,c,d)},s.prototype.imul=function(c){return this.clone().mulTo(c,this)},s.prototype.imuln=function(c){var d=c<0;d&&(c=-c),r(typeof c=="number"),r(c<67108864);for(var y=0,w=0;w<this.length;w++){var E=(this.words[w]|0)*c,T=(E&67108863)+(y&67108863);y>>=26,y+=E/67108864|0,y+=T>>>26,this.words[w]=T&67108863}return y!==0&&(this.words[w]=y,this.length++),d?this.ineg():this},s.prototype.muln=function(c){return this.clone().imuln(c)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(c){var d=A(c);if(d.length===0)return new s(1);for(var y=this,w=0;w<d.length&&d[w]===0;w++,y=y.sqr());if(++w<d.length)for(var E=y.sqr();w<d.length;w++,E=E.sqr())d[w]!==0&&(y=y.mul(E));return y},s.prototype.iushln=function(c){r(typeof c=="number"&&c>=0);var d=c%26,y=(c-d)/26,w=67108863>>>26-d<<26-d,E;if(d!==0){var T=0;for(E=0;E<this.length;E++){var B=this.words[E]&w,I=(this.words[E]|0)-B<<d;this.words[E]=I|T,T=B>>>26-d}T&&(this.words[E]=T,this.length++)}if(y!==0){for(E=this.length-1;E>=0;E--)this.words[E+y]=this.words[E];for(E=0;E<y;E++)this.words[E]=0;this.length+=y}return this._strip()},s.prototype.ishln=function(c){return r(this.negative===0),this.iushln(c)},s.prototype.iushrn=function(c,d,y){r(typeof c=="number"&&c>=0);var w;d?w=(d-d%26)/26:w=0;var E=c%26,T=Math.min((c-E)/26,this.length),B=67108863^67108863>>>E<<E,I=y;if(w-=T,w=Math.max(0,w),I){for(var g=0;g<T;g++)I.words[g]=this.words[g];I.length=T}if(T!==0)if(this.length>T)for(this.length-=T,g=0;g<this.length;g++)this.words[g]=this.words[g+T];else this.words[0]=0,this.length=1;var O=0;for(g=this.length-1;g>=0&&(O!==0||g>=w);g--){var q=this.words[g]|0;this.words[g]=O<<26-E|q>>>E,O=q&B}return I&&O!==0&&(I.words[I.length++]=O),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(c,d,y){return r(this.negative===0),this.iushrn(c,d,y)},s.prototype.shln=function(c){return this.clone().ishln(c)},s.prototype.ushln=function(c){return this.clone().iushln(c)},s.prototype.shrn=function(c){return this.clone().ishrn(c)},s.prototype.ushrn=function(c){return this.clone().iushrn(c)},s.prototype.testn=function(c){r(typeof c=="number"&&c>=0);var d=c%26,y=(c-d)/26,w=1<<d;if(this.length<=y)return!1;var E=this.words[y];return!!(E&w)},s.prototype.imaskn=function(c){r(typeof c=="number"&&c>=0);var d=c%26,y=(c-d)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(d!==0&&y++,this.length=Math.min(y,this.length),d!==0){var w=67108863^67108863>>>d<<d;this.words[this.length-1]&=w}return this._strip()},s.prototype.maskn=function(c){return this.clone().imaskn(c)},s.prototype.iaddn=function(c){return r(typeof c=="number"),r(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<=c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},s.prototype._iaddn=function(c){this.words[0]+=c;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},s.prototype.isubn=function(c){if(r(typeof c=="number"),r(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this._strip()},s.prototype.addn=function(c){return this.clone().iaddn(c)},s.prototype.subn=function(c){return this.clone().isubn(c)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(c,d,y){var w=c.length+y,E;this._expand(w);var T,B=0;for(E=0;E<c.length;E++){T=(this.words[E+y]|0)+B;var I=(c.words[E]|0)*d;T-=I&67108863,B=(T>>26)-(I/67108864|0),this.words[E+y]=T&67108863}for(;E<this.length-y;E++)T=(this.words[E+y]|0)+B,B=T>>26,this.words[E+y]=T&67108863;if(B===0)return this._strip();for(r(B===-1),B=0,E=0;E<this.length;E++)T=-(this.words[E]|0)+B,B=T>>26,this.words[E]=T&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(c,d){var y=this.length-c.length,w=this.clone(),E=c,T=E.words[E.length-1]|0,B=this._countBits(T);y=26-B,y!==0&&(E=E.ushln(y),w.iushln(y),T=E.words[E.length-1]|0);var I=w.length-E.length,g;if(d!=="mod"){g=new s(null),g.length=I+1,g.words=new Array(g.length);for(var O=0;O<g.length;O++)g.words[O]=0}var q=w.clone()._ishlnsubmul(E,1,I);q.negative===0&&(w=q,g&&(g.words[I]=1));for(var J=I-1;J>=0;J--){var it=(w.words[E.length+J]|0)*67108864+(w.words[E.length+J-1]|0);for(it=Math.min(it/T|0,67108863),w._ishlnsubmul(E,it,J);w.negative!==0;)it--,w.negative=0,w._ishlnsubmul(E,1,J),w.isZero()||(w.negative^=1);g&&(g.words[J]=it)}return g&&g._strip(),w._strip(),d!=="div"&&y!==0&&w.iushrn(y),{div:g||null,mod:w}},s.prototype.divmod=function(c,d,y){if(r(!c.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var w,E,T;return this.negative!==0&&c.negative===0?(T=this.neg().divmod(c,d),d!=="mod"&&(w=T.div.neg()),d!=="div"&&(E=T.mod.neg(),y&&E.negative!==0&&E.iadd(c)),{div:w,mod:E}):this.negative===0&&c.negative!==0?(T=this.divmod(c.neg(),d),d!=="mod"&&(w=T.div.neg()),{div:w,mod:T.mod}):this.negative&c.negative?(T=this.neg().divmod(c.neg(),d),d!=="div"&&(E=T.mod.neg(),y&&E.negative!==0&&E.isub(c)),{div:T.div,mod:E}):c.length>this.length||this.cmp(c)<0?{div:new s(0),mod:this}:c.length===1?d==="div"?{div:this.divn(c.words[0]),mod:null}:d==="mod"?{div:null,mod:new s(this.modrn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new s(this.modrn(c.words[0]))}:this._wordDiv(c,d)},s.prototype.div=function(c){return this.divmod(c,"div",!1).div},s.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},s.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},s.prototype.divRound=function(c){var d=this.divmod(c);if(d.mod.isZero())return d.div;var y=d.div.negative!==0?d.mod.isub(c):d.mod,w=c.ushrn(1),E=c.andln(1),T=y.cmp(w);return T<0||E===1&&T===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},s.prototype.modrn=function(c){var d=c<0;d&&(c=-c),r(c<=67108863);for(var y=(1<<26)%c,w=0,E=this.length-1;E>=0;E--)w=(y*w+(this.words[E]|0))%c;return d?-w:w},s.prototype.modn=function(c){return this.modrn(c)},s.prototype.idivn=function(c){var d=c<0;d&&(c=-c),r(c<=67108863);for(var y=0,w=this.length-1;w>=0;w--){var E=(this.words[w]|0)+y*67108864;this.words[w]=E/c|0,y=E%c}return this._strip(),d?this.ineg():this},s.prototype.divn=function(c){return this.clone().idivn(c)},s.prototype.egcd=function(c){r(c.negative===0),r(!c.isZero());var d=this,y=c.clone();d.negative!==0?d=d.umod(c):d=d.clone();for(var w=new s(1),E=new s(0),T=new s(0),B=new s(1),I=0;d.isEven()&&y.isEven();)d.iushrn(1),y.iushrn(1),++I;for(var g=y.clone(),O=d.clone();!d.isZero();){for(var q=0,J=1;!(d.words[0]&J)&&q<26;++q,J<<=1);if(q>0)for(d.iushrn(q);q-- >0;)(w.isOdd()||E.isOdd())&&(w.iadd(g),E.isub(O)),w.iushrn(1),E.iushrn(1);for(var it=0,It=1;!(y.words[0]&It)&&it<26;++it,It<<=1);if(it>0)for(y.iushrn(it);it-- >0;)(T.isOdd()||B.isOdd())&&(T.iadd(g),B.isub(O)),T.iushrn(1),B.iushrn(1);d.cmp(y)>=0?(d.isub(y),w.isub(T),E.isub(B)):(y.isub(d),T.isub(w),B.isub(E))}return{a:T,b:B,gcd:y.iushln(I)}},s.prototype._invmp=function(c){r(c.negative===0),r(!c.isZero());var d=this,y=c.clone();d.negative!==0?d=d.umod(c):d=d.clone();for(var w=new s(1),E=new s(0),T=y.clone();d.cmpn(1)>0&&y.cmpn(1)>0;){for(var B=0,I=1;!(d.words[0]&I)&&B<26;++B,I<<=1);if(B>0)for(d.iushrn(B);B-- >0;)w.isOdd()&&w.iadd(T),w.iushrn(1);for(var g=0,O=1;!(y.words[0]&O)&&g<26;++g,O<<=1);if(g>0)for(y.iushrn(g);g-- >0;)E.isOdd()&&E.iadd(T),E.iushrn(1);d.cmp(y)>=0?(d.isub(y),w.isub(E)):(y.isub(d),E.isub(w))}var q;return d.cmpn(1)===0?q=w:q=E,q.cmpn(0)<0&&q.iadd(c),q},s.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var d=this.clone(),y=c.clone();d.negative=0,y.negative=0;for(var w=0;d.isEven()&&y.isEven();w++)d.iushrn(1),y.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;y.isEven();)y.iushrn(1);var E=d.cmp(y);if(E<0){var T=d;d=y,y=T}else if(E===0||y.cmpn(1)===0)break;d.isub(y)}while(!0);return y.iushln(w)},s.prototype.invm=function(c){return this.egcd(c).a.umod(c)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(c){return this.words[0]&c},s.prototype.bincn=function(c){r(typeof c=="number");var d=c%26,y=(c-d)/26,w=1<<d;if(this.length<=y)return this._expand(y+1),this.words[y]|=w,this;for(var E=w,T=y;E!==0&&T<this.length;T++){var B=this.words[T]|0;B+=E,E=B>>>26,B&=67108863,this.words[T]=B}return E!==0&&(this.words[T]=E,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(c){var d=c<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this._strip();var y;if(this.length>1)y=1;else{d&&(c=-c),r(c<=67108863,"Number is too big");var w=this.words[0]|0;y=w===c?0:w<c?-1:1}return this.negative!==0?-y|0:y},s.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var d=this.ucmp(c);return this.negative!==0?-d|0:d},s.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var d=0,y=this.length-1;y>=0;y--){var w=this.words[y]|0,E=c.words[y]|0;if(w!==E){w<E?d=-1:w>E&&(d=1);break}}return d},s.prototype.gtn=function(c){return this.cmpn(c)===1},s.prototype.gt=function(c){return this.cmp(c)===1},s.prototype.gten=function(c){return this.cmpn(c)>=0},s.prototype.gte=function(c){return this.cmp(c)>=0},s.prototype.ltn=function(c){return this.cmpn(c)===-1},s.prototype.lt=function(c){return this.cmp(c)===-1},s.prototype.lten=function(c){return this.cmpn(c)<=0},s.prototype.lte=function(c){return this.cmp(c)<=0},s.prototype.eqn=function(c){return this.cmpn(c)===0},s.prototype.eq=function(c){return this.cmp(c)===0},s.red=function(c){return new W(c)},s.prototype.toRed=function(c){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(c){return this.red=c,this},s.prototype.forceRed=function(c){return r(!this.red,"Already a number in reduction context"),this._forceRed(c)},s.prototype.redAdd=function(c){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},s.prototype.redIAdd=function(c){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},s.prototype.redSub=function(c){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},s.prototype.redISub=function(c){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},s.prototype.redShl=function(c){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},s.prototype.redMul=function(c){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},s.prototype.redIMul=function(c){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(c){return r(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var K={k256:null,p224:null,p192:null,p25519:null};function Y(v,c){this.name=v,this.p=new s(c,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Y.prototype._tmp=function(){var c=new s(null);return c.words=new Array(Math.ceil(this.n/13)),c},Y.prototype.ireduce=function(c){var d=c,y;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),y=d.bitLength();while(y>this.n);var w=y<this.n?-1:d.ucmp(this.p);return w===0?(d.words[0]=0,d.length=1):w>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},Y.prototype.split=function(c,d){c.iushrn(this.n,0,d)},Y.prototype.imulK=function(c){return c.imul(this.k)};function $(){Y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i($,Y),$.prototype.split=function(c,d){for(var y=4194303,w=Math.min(c.length,9),E=0;E<w;E++)d.words[E]=c.words[E];if(d.length=w,c.length<=9){c.words[0]=0,c.length=1;return}var T=c.words[9];for(d.words[d.length++]=T&y,E=10;E<c.length;E++){var B=c.words[E]|0;c.words[E-10]=(B&y)<<4|T>>>22,T=B}T>>>=22,c.words[E-10]=T,T===0&&c.length>10?c.length-=10:c.length-=9},$.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var d=0,y=0;y<c.length;y++){var w=c.words[y]|0;d+=w*977,c.words[y]=d&67108863,d=w*64+(d/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function G(){Y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(G,Y);function j(){Y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(j,Y);function tt(){Y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(tt,Y),tt.prototype.imulK=function(c){for(var d=0,y=0;y<c.length;y++){var w=(c.words[y]|0)*19+d,E=w&67108863;w>>>=26,c.words[y]=E,d=w}return d!==0&&(c.words[c.length++]=d),c},s._prime=function(c){if(K[c])return K[c];var d;if(c==="k256")d=new $;else if(c==="p224")d=new G;else if(c==="p192")d=new j;else if(c==="p25519")d=new tt;else throw new Error("Unknown prime "+c);return K[c]=d,d};function W(v){if(typeof v=="string"){var c=s._prime(v);this.m=c.p,this.prime=c}else r(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}W.prototype._verify1=function(c){r(c.negative===0,"red works only with positives"),r(c.red,"red works only with red numbers")},W.prototype._verify2=function(c,d){r((c.negative|d.negative)===0,"red works only with positives"),r(c.red&&c.red===d.red,"red works only with red numbers")},W.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):(l(c,c.umod(this.m)._forceRed(this)),c)},W.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},W.prototype.add=function(c,d){this._verify2(c,d);var y=c.add(d);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},W.prototype.iadd=function(c,d){this._verify2(c,d);var y=c.iadd(d);return y.cmp(this.m)>=0&&y.isub(this.m),y},W.prototype.sub=function(c,d){this._verify2(c,d);var y=c.sub(d);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},W.prototype.isub=function(c,d){this._verify2(c,d);var y=c.isub(d);return y.cmpn(0)<0&&y.iadd(this.m),y},W.prototype.shl=function(c,d){return this._verify1(c),this.imod(c.ushln(d))},W.prototype.imul=function(c,d){return this._verify2(c,d),this.imod(c.imul(d))},W.prototype.mul=function(c,d){return this._verify2(c,d),this.imod(c.mul(d))},W.prototype.isqr=function(c){return this.imul(c,c.clone())},W.prototype.sqr=function(c){return this.mul(c,c)},W.prototype.sqrt=function(c){if(c.isZero())return c.clone();var d=this.m.andln(3);if(r(d%2===1),d===3){var y=this.m.add(new s(1)).iushrn(2);return this.pow(c,y)}for(var w=this.m.subn(1),E=0;!w.isZero()&&w.andln(1)===0;)E++,w.iushrn(1);r(!w.isZero());var T=new s(1).toRed(this),B=T.redNeg(),I=this.m.subn(1).iushrn(1),g=this.m.bitLength();for(g=new s(2*g*g).toRed(this);this.pow(g,I).cmp(B)!==0;)g.redIAdd(B);for(var O=this.pow(g,w),q=this.pow(c,w.addn(1).iushrn(1)),J=this.pow(c,w),it=E;J.cmp(T)!==0;){for(var It=J,ft=0;It.cmp(T)!==0;ft++)It=It.redSqr();r(ft<it);var gt=this.pow(O,new s(1).iushln(it-ft-1));q=q.redMul(gt),O=gt.redSqr(),J=J.redMul(O),it=ft}return q},W.prototype.invm=function(c){var d=c._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},W.prototype.pow=function(c,d){if(d.isZero())return new s(1).toRed(this);if(d.cmpn(1)===0)return c.clone();var y=4,w=new Array(1<<y);w[0]=new s(1).toRed(this),w[1]=c;for(var E=2;E<w.length;E++)w[E]=this.mul(w[E-1],c);var T=w[0],B=0,I=0,g=d.bitLength()%26;for(g===0&&(g=26),E=d.length-1;E>=0;E--){for(var O=d.words[E],q=g-1;q>=0;q--){var J=O>>q&1;if(T!==w[0]&&(T=this.sqr(T)),J===0&&B===0){I=0;continue}B<<=1,B|=J,I++,!(I!==y&&(E!==0||q!==0))&&(T=this.mul(T,w[B]),I=0,B=0)}g=26}return T},W.prototype.convertTo=function(c){var d=c.umod(this.m);return d===c?d.clone():d},W.prototype.convertFrom=function(c){var d=c.clone();return d.red=null,d},s.mont=function(c){return new V(c)};function V(v){W.call(this,v),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(V,W),V.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},V.prototype.convertFrom=function(c){var d=this.imod(c.mul(this.rinv));return d.red=null,d},V.prototype.imul=function(c,d){if(c.isZero()||d.isZero())return c.words[0]=0,c.length=1,c;var y=c.imul(d),w=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=y.isub(w).iushrn(this.shift),T=E;return E.cmp(this.m)>=0?T=E.isub(this.m):E.cmpn(0)<0&&(T=E.iadd(this.m)),T._forceRed(this)},V.prototype.mul=function(c,d){if(c.isZero()||d.isZero())return new s(0)._forceRed(this);var y=c.mul(d),w=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=y.isub(w).iushrn(this.shift),T=E;return E.cmp(this.m)>=0?T=E.isub(this.m):E.cmpn(0)<0&&(T=E.iadd(this.m)),T._forceRed(this)},V.prototype.invm=function(c){var d=this.imod(c._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(n,an)})(lc);var dc=lc.exports;const Wn=gi(dc);var Ca={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(n,t){var e=hc,r=e.Buffer;function i(o,a){for(var u in o)a[u]=o[u]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=e:(i(e,t),t.Buffer=s);function s(o,a,u){return r(o,a,u)}s.prototype=Object.create(r.prototype),i(r,s),s.from=function(o,a,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,u)},s.alloc=function(o,a,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var h=r(o);return a!==void 0?typeof u=="string"?h.fill(a,u):h.fill(a):h.fill(0),h},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}})(Ca,Ca.exports);var Gg=Ca.exports,ws=Gg.Buffer;function jg(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<n.length;r++){var i=n.charAt(r),s=i.charCodeAt(0);if(t[s]!==255)throw new TypeError(i+" is ambiguous");t[s]=r}var o=n.length,a=n.charAt(0),u=Math.log(o)/Math.log(256),h=Math.log(256)/Math.log(o);function l(_){if((Array.isArray(_)||_ instanceof Uint8Array)&&(_=ws.from(_)),!ws.isBuffer(_))throw new TypeError("Expected Buffer");if(_.length===0)return"";for(var S=0,N=0,A=0,C=_.length;A!==C&&_[A]===0;)A++,S++;for(var D=(C-A)*h+1>>>0,x=new Uint8Array(D);A!==C;){for(var L=_[A],K=0,Y=D-1;(L!==0||K<N)&&Y!==-1;Y--,K++)L+=256*x[Y]>>>0,x[Y]=L%o>>>0,L=L/o>>>0;if(L!==0)throw new Error("Non-zero carry");N=K,A++}for(var $=D-N;$!==D&&x[$]===0;)$++;for(var G=a.repeat(S);$<D;++$)G+=n.charAt(x[$]);return G}function b(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return ws.alloc(0);for(var S=0,N=0,A=0;_[S]===a;)N++,S++;for(var C=(_.length-S)*u+1>>>0,D=new Uint8Array(C);S<_.length;){var x=t[_.charCodeAt(S)];if(x===255)return;for(var L=0,K=C-1;(x!==0||L<A)&&K!==-1;K--,L++)x+=o*D[K]>>>0,D[K]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");A=L,S++}for(var Y=C-A;Y!==C&&D[Y]===0;)Y++;var $=ws.allocUnsafe(N+(C-Y));$.fill(0,0,N);for(var G=N;Y!==C;)$[G++]=D[Y++];return $}function R(_){var S=b(_);if(S)return S;throw new Error("Non-base"+o+" character")}return{encode:l,decodeUnsafe:b,decode:R}}var Zg=jg,Yg=Zg,Xg="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",lh=Yg(Xg);const ae=gi(lh),Jg=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),nr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),rr=new Uint32Array(64);class Qg extends jl{constructor(){super(64,32,8,!1),this.A=nr[0]|0,this.B=nr[1]|0,this.C=nr[2]|0,this.D=nr[3]|0,this.E=nr[4]|0,this.F=nr[5]|0,this.G=nr[6]|0,this.H=nr[7]|0}get(){const{A:t,B:e,C:r,D:i,E:s,F:o,G:a,H:u}=this;return[t,e,r,i,s,o,a,u]}set(t,e,r,i,s,o,a,u){this.A=t|0,this.B=e|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=u|0}process(t,e){for(let b=0;b<16;b++,e+=4)rr[b]=t.getUint32(e,!1);for(let b=16;b<64;b++){const R=rr[b-15],_=rr[b-2],S=An(R,7)^An(R,18)^R>>>3,N=An(_,17)^An(_,19)^_>>>10;rr[b]=N+rr[b-7]+S+rr[b-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:u,G:h,H:l}=this;for(let b=0;b<64;b++){const R=An(a,6)^An(a,11)^An(a,25),_=l+R+W0(a,u,h)+Jg[b]+rr[b]|0,N=(An(r,2)^An(r,13)^An(r,22))+V0(r,i,s)|0;l=h,h=u,u=a,a=o+_|0,o=s,s=i,i=r,r=_+N|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,h=h+this.G|0,l=l+this.H|0,this.set(r,i,s,o,a,u,h,l)}roundClean(){rr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ba=sc(()=>new Qg);var Pe={};function Vn(n,t,e){return t<=n&&n<=e}function no(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function ty(n){for(var t=String(n),e=t.length,r=0,i=[];r<e;){var s=t.charCodeAt(r);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(r===e-1)i.push(65533);else{var o=n.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=s&1023,u=o&1023;i.push(65536+(a<<10)+u),r+=1}else i.push(65533)}r+=1}return i}function ey(n){for(var t="",e=0;e<n.length;++e){var r=n[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var Ms=-1;function fc(n){this.tokens=[].slice.call(n)}fc.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Ms},prepend:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.push(t.shift());else this.tokens.push(n)}};var ui=-1;function Qo(n,t){if(n)throw TypeError("Decoder error");return t||65533}var Ls="utf-8";function Ps(n,t){if(!(this instanceof Ps))return new Ps(n,t);if(n=n!==void 0?String(n).toLowerCase():Ls,n!==Ls)throw new Error("Encoding not supported. Only utf-8 is supported");t=no(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Ps.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=no(e),this._streaming||(this._decoder=new ny({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var i=new fc(r),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==ui);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===ui)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),ey(s)}};function Us(n,t){if(!(this instanceof Us))return new Us(n,t);if(n=n!==void 0?String(n).toLowerCase():Ls,n!==Ls)throw new Error("Encoding not supported. Only utf-8 is supported");t=no(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Us.prototype={encode:function(t,e){t=t?String(t):"",e=no(e),this._streaming||(this._encoder=new ry(this._options)),this._streaming=!!e.stream;for(var r=[],i=new fc(ty(t)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==ui);)Array.isArray(s)?r.push.apply(r,s):r.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==ui;)Array.isArray(s)?r.push.apply(r,s):r.push(s);this._encoder=null}return new Uint8Array(r)}};function ny(n){var t=n.fatal,e=0,r=0,i=0,s=128,o=191;this.handler=function(a,u){if(u===Ms&&i!==0)return i=0,Qo(t);if(u===Ms)return ui;if(i===0){if(Vn(u,0,127))return u;if(Vn(u,194,223))i=1,e=u-192;else if(Vn(u,224,239))u===224&&(s=160),u===237&&(o=159),i=2,e=u-224;else if(Vn(u,240,244))u===240&&(s=144),u===244&&(o=143),i=3,e=u-240;else return Qo(t);return e=e<<6*i,null}if(!Vn(u,s,o))return e=i=r=0,s=128,o=191,a.prepend(u),Qo(t);if(s=128,o=191,r+=1,e+=u-128<<6*(i-r),r!==i)return null;var h=e;return e=i=r=0,h}}function ry(n){n.fatal,this.handler=function(t,e){if(e===Ms)return ui;if(Vn(e,0,127))return e;var r,i;Vn(e,128,2047)?(r=1,i=192):Vn(e,2048,65535)?(r=2,i=224):Vn(e,65536,1114111)&&(r=3,i=240);for(var s=[(e>>6*r)+i];r>0;){var o=e>>6*(r-1);s.push(128|o&63),r-=1}return s}}const iy=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Ps,TextEncoder:Us},Symbol.toStringTag,{value:"Module"})),sy=Zs(iy);var oy=an&&an.__createBinding||(Object.create?function(n,t,e,r){r===void 0&&(r=e),Object.defineProperty(n,r,{enumerable:!0,get:function(){return t[e]}})}:function(n,t,e,r){r===void 0&&(r=e),n[r]=t[e]}),ay=an&&an.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),Ln=an&&an.__decorate||function(n,t,e,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,t,e,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(t,e,s):o(t,e))||s);return i>3&&s&&Object.defineProperty(t,e,s),s},cy=an&&an.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e in n)e!=="default"&&Object.hasOwnProperty.call(n,e)&&oy(t,n,e);return ay(t,n),t},hh=an&&an.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Pe,"__esModule",{value:!0});var dh=Pe.deserializeUnchecked=wh=Pe.deserialize=_h=Pe.serialize=Pe.BinaryReader=Pe.BinaryWriter=Pe.BorshError=Pe.baseDecode=Pe.baseEncode=void 0;const or=hh(dc),fh=hh(lh),uy=cy(sy),ly=typeof TextDecoder!="function"?uy.TextDecoder:TextDecoder,hy=new ly("utf-8",{fatal:!0});function dy(n){return typeof n=="string"&&(n=_t.from(n,"utf8")),fh.default.encode(_t.from(n))}Pe.baseEncode=dy;function fy(n){return _t.from(fh.default.decode(n))}Pe.baseDecode=fy;const ta=1024;class qe extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Pe.BorshError=qe;class ph{constructor(){this.buf=_t.alloc(ta),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=_t.concat([this.buf,_t.alloc(ta)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(_t.from(new or.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(_t.from(new or.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(_t.from(new or.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(_t.from(new or.default(t).toArray("le",64)))}writeBuffer(t){this.buf=_t.concat([_t.from(this.buf.subarray(0,this.length)),t,_t.alloc(ta)]),this.length+=t.length}writeString(t){this.maybeResize();const e=_t.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(_t.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const r of t)this.maybeResize(),e(r)}toArray(){return this.buf.subarray(0,this.length)}}Pe.BinaryWriter=ph;function Pn(n,t,e){const r=e.value;e.value=function(...i){try{return r.apply(this,i)}catch(s){if(s instanceof RangeError){const o=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new qe("Reached the end of buffer when deserializing")}throw s}}}class cn{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new or.default(t,"le")}readU128(){const t=this.readBuffer(16);return new or.default(t,"le")}readU256(){const t=this.readBuffer(32);return new or.default(t,"le")}readU512(){const t=this.readBuffer(64);return new or.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new qe(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return hy.decode(e)}catch(r){throw new qe(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),r=Array();for(let i=0;i<e;++i)r.push(t());return r}}Ln([Pn],cn.prototype,"readU8",null);Ln([Pn],cn.prototype,"readU16",null);Ln([Pn],cn.prototype,"readU32",null);Ln([Pn],cn.prototype,"readU64",null);Ln([Pn],cn.prototype,"readU128",null);Ln([Pn],cn.prototype,"readU256",null);Ln([Pn],cn.prototype,"readU512",null);Ln([Pn],cn.prototype,"readString",null);Ln([Pn],cn.prototype,"readFixedArray",null);Ln([Pn],cn.prototype,"readArray",null);Pe.BinaryReader=cn;function gh(n){return n.charAt(0).toUpperCase()+n.slice(1)}function br(n,t,e,r,i){try{if(typeof r=="string")i[`write${gh(r)}`](e);else if(r instanceof Array)if(typeof r[0]=="number"){if(e.length!==r[0])throw new qe(`Expecting byte array of length ${r[0]}, but got ${e.length} bytes`);i.writeFixedArray(e)}else if(r.length===2&&typeof r[1]=="number"){if(e.length!==r[1])throw new qe(`Expecting byte array of length ${r[1]}, but got ${e.length} bytes`);for(let s=0;s<r[1];s++)br(n,null,e[s],r[0],i)}else i.writeArray(e,s=>{br(n,t,s,r[0],i)});else if(r.kind!==void 0)switch(r.kind){case"option":{e==null?i.writeU8(0):(i.writeU8(1),br(n,t,e,r.type,i));break}case"map":{i.writeU32(e.size),e.forEach((s,o)=>{br(n,t,o,r.key,i),br(n,t,s,r.value,i)});break}default:throw new qe(`FieldType ${r} unrecognized`)}else yh(n,e,i)}catch(s){throw s instanceof qe&&s.addToFieldPath(t),s}}function yh(n,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const r=n.get(t.constructor);if(!r)throw new qe(`Class ${t.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([i,s])=>{br(n,i,t[i],s,e)});else if(r.kind==="enum"){const i=t[r.field];for(let s=0;s<r.values.length;++s){const[o,a]=r.values[s];if(o===i){e.writeU8(s),br(n,o,t[o],a,e);break}}}else throw new qe(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function py(n,t,e=ph){const r=new e;return yh(n,t,r),r.toArray()}var _h=Pe.serialize=py;function Er(n,t,e,r){try{if(typeof e=="string")return r[`read${gh(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return r.readFixedArray(e[0]);if(typeof e[1]=="number"){const i=[];for(let s=0;s<e[1];s++)i.push(Er(n,null,e[0],r));return i}else return r.readArray(()=>Er(n,t,e[0],r))}if(e.kind==="option")return r.readU8()?Er(n,t,e.type,r):void 0;if(e.kind==="map"){let i=new Map;const s=r.readU32();for(let o=0;o<s;o++){const a=Er(n,t,e.key,r),u=Er(n,t,e.value,r);i.set(a,u)}return i}return pc(n,e,r)}catch(i){throw i instanceof qe&&i.addToFieldPath(t),i}}function pc(n,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const r=n.get(t);if(!r)throw new qe(`Class ${t.name} is missing in schema`);if(r.kind==="struct"){const i={};for(const[s,o]of n.get(t).fields)i[s]=Er(n,s,o,e);return new t(i)}if(r.kind==="enum"){const i=e.readU8();if(i>=r.values.length)throw new qe(`Enum index: ${i} is out of range`);const[s,o]=r.values[i],a=Er(n,s,o,e);return new t({[s]:a})}throw new qe(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function gy(n,t,e,r=cn){const i=new r(e),s=pc(n,t,i);if(i.offset<e.length)throw new qe(`Unexpected ${e.length-i.offset} bytes after deserialized data`);return s}var wh=Pe.deserialize=gy;function yy(n,t,e,r=cn){const i=new r(e);return pc(n,t,i)}dh=Pe.deserializeUnchecked=yy;var H={};Object.defineProperty(H,"__esModule",{value:!0});H.s16=H.s8=H.nu64be=H.u48be=H.u40be=H.u32be=H.u24be=H.u16be=Me=H.nu64=H.u48=H.u40=at=H.u32=H.u24=hn=H.u16=xt=H.u8=ur=H.offset=H.greedy=H.Constant=H.UTF8=H.CString=H.Blob=H.Boolean=H.BitField=H.BitStructure=H.VariantLayout=H.Union=H.UnionLayoutDiscriminator=H.UnionDiscriminator=H.Structure=H.Sequence=H.DoubleBE=H.Double=H.FloatBE=H.Float=H.NearInt64BE=H.NearInt64=H.NearUInt64BE=H.NearUInt64=H.IntBE=H.Int=H.UIntBE=H.UInt=H.OffsetLayout=H.GreedyCount=H.ExternalLayout=H.bindConstructorLayout=H.nameWithProperty=H.Layout=H.uint8ArrayToBuffer=H.checkUint8Array=void 0;H.constant=H.utf8=H.cstr=Xt=H.blob=H.unionLayoutDiscriminator=H.union=Ue=H.seq=H.bits=ct=H.struct=H.f64be=H.f64=H.f32be=H.f32=H.ns64be=H.s48be=H.s40be=H.s32be=H.s24be=H.s16be=rn=H.ns64=H.s48=H.s40=H.s32=H.s24=void 0;const gc=hc;function wi(n){if(!(n instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}H.checkUint8Array=wi;function Mt(n){return wi(n),gc.Buffer.from(n.buffer,n.byteOffset,n.length)}H.uint8ArrayToBuffer=Mt;let Dt=class{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}};H.Layout=Dt;function yc(n,t){return t.property?n+"["+t.property+"]":n}H.nameWithProperty=yc;function _y(n,t){if(typeof n!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(n,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof Dt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");n.layout_=t,t.boundConstructor_=n,t.makeDestinationObject=()=>new n,Object.defineProperty(n.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(n,"decode",{value(e,r){return t.decode(e,r)},writable:!0})}H.bindConstructorLayout=_y;let Ye=class extends Dt{isCount(){throw new Error("ExternalLayout is abstract")}};H.ExternalLayout=Ye;let mh=class extends Ye{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){wi(t);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}};H.GreedyCount=mh;let _c=class extends Ye{constructor(t,e=0,r){if(!(t instanceof Dt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof pn||this.layout instanceof bn}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}};H.OffsetLayout=_c;let pn=class extends Dt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Mt(t).readUIntLE(e,this.span)}encode(t,e,r=0){return Mt(e).writeUIntLE(t,r,this.span),this.span}};H.UInt=pn;let bn=class extends Dt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Mt(t).readUIntBE(e,this.span)}encode(t,e,r=0){return Mt(e).writeUIntBE(t,r,this.span),this.span}};H.UIntBE=bn;let Ur=class extends Dt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Mt(t).readIntLE(e,this.span)}encode(t,e,r=0){return Mt(e).writeIntLE(t,r,this.span),this.span}};H.Int=Ur;let mi=class extends Dt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Mt(t).readIntBE(e,this.span)}encode(t,e,r=0){return Mt(e).writeIntBE(t,r,this.span),this.span}};H.IntBE=mi;const Ma=Math.pow(2,32);function ro(n){const t=Math.floor(n/Ma),e=n-t*Ma;return{hi32:t,lo32:e}}function io(n,t){return n*Ma+t}let bh=class extends Dt{constructor(t){super(8,t)}decode(t,e=0){const r=Mt(t),i=r.readUInt32LE(e),s=r.readUInt32LE(e+4);return io(s,i)}encode(t,e,r=0){const i=ro(t),s=Mt(e);return s.writeUInt32LE(i.lo32,r),s.writeUInt32LE(i.hi32,r+4),8}};H.NearUInt64=bh;let Eh=class extends Dt{constructor(t){super(8,t)}decode(t,e=0){const r=Mt(t),i=r.readUInt32BE(e),s=r.readUInt32BE(e+4);return io(i,s)}encode(t,e,r=0){const i=ro(t),s=Mt(e);return s.writeUInt32BE(i.hi32,r),s.writeUInt32BE(i.lo32,r+4),8}};H.NearUInt64BE=Eh;let Rh=class extends Dt{constructor(t){super(8,t)}decode(t,e=0){const r=Mt(t),i=r.readUInt32LE(e),s=r.readInt32LE(e+4);return io(s,i)}encode(t,e,r=0){const i=ro(t),s=Mt(e);return s.writeUInt32LE(i.lo32,r),s.writeInt32LE(i.hi32,r+4),8}};H.NearInt64=Rh;let Ah=class extends Dt{constructor(t){super(8,t)}decode(t,e=0){const r=Mt(t),i=r.readInt32BE(e),s=r.readUInt32BE(e+4);return io(i,s)}encode(t,e,r=0){const i=ro(t),s=Mt(e);return s.writeInt32BE(i.hi32,r),s.writeUInt32BE(i.lo32,r+4),8}};H.NearInt64BE=Ah;let vh=class extends Dt{constructor(t){super(4,t)}decode(t,e=0){return Mt(t).readFloatLE(e)}encode(t,e,r=0){return Mt(e).writeFloatLE(t,r),4}};H.Float=vh;let Ih=class extends Dt{constructor(t){super(4,t)}decode(t,e=0){return Mt(t).readFloatBE(e)}encode(t,e,r=0){return Mt(e).writeFloatBE(t,r),4}};H.FloatBE=Ih;let Sh=class extends Dt{constructor(t){super(8,t)}decode(t,e=0){return Mt(t).readDoubleLE(e)}encode(t,e,r=0){return Mt(e).writeDoubleLE(t,r),8}};H.Double=Sh;let kh=class extends Dt{constructor(t){super(8,t)}decode(t,e=0){return Mt(t).readDoubleBE(e)}encode(t,e,r=0){return Mt(e).writeDoubleBE(t,r),8}};H.DoubleBE=kh;let Th=class extends Dt{constructor(t,e,r){if(!(t instanceof Dt))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof Ye&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(e instanceof Ye)&&0<t.span&&(i=e*t.span),super(i,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,i=this.count;if(i instanceof Ye&&(i=i.decode(t,e)),0<this.elementLayout.span)r=i*this.elementLayout.span;else{let s=0;for(;s<i;)r+=this.elementLayout.getSpan(t,e+r),++s}return r}decode(t,e=0){const r=[];let i=0,s=this.count;for(s instanceof Ye&&(s=s.decode(t,e));i<s;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),i+=1;return r}encode(t,e,r=0){const i=this.elementLayout,s=t.reduce((o,a)=>o+i.encode(a,e,r+o),0);return this.count instanceof Ye&&this.count.encode(t.length,e,r),s}};H.Sequence=Th;let Oh=class extends Dt{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((s,o)=>s&&o instanceof Dt,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const s of t)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=t.reduce((s,o)=>s+o.getSpan(),0)}catch{}super(i,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((i,s)=>{const o=s.getSpan(t,e);return e+=o,i+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e=0){wi(t);const r=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(r[i.property]=i.decode(t,e)),e+=i.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){const i=r;let s=0,o=0;for(const a of this.fields){let u=a.span;if(o=0<u?u:0,a.property!==void 0){const h=t[a.property];h!==void 0&&(o=a.encode(h,e,r),0>u&&(u=a.getSpan(e,r)))}s=r,r+=u}return s+o-i}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}};H.Structure=Oh;let wc=class{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}};H.UnionDiscriminator=wc;let Ds=class extends wc{constructor(t,e){if(!(t instanceof Ye&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}};H.UnionLayoutDiscriminator=Ds;let mc=class extends Dt{constructor(t,e,r){let i;if(t instanceof pn||t instanceof bn)i=new Ds(new _c(t));else if(t instanceof Ye&&t.isCount())i=new Ds(t);else if(t instanceof wc)i=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof Dt))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let s=-1;e&&(s=e.span,0<=s&&(t instanceof pn||t instanceof bn)&&(s+=i.layout.span)),super(s,r),this.discriminator=i,this.usesPrefixDiscriminator=t instanceof pn||t instanceof bn,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r;const i=this.discriminator,s=i.decode(t,e),o=this.registry[s];if(o===void 0){const a=this.defaultLayout;let u=0;this.usesPrefixDiscriminator&&(u=i.layout.span),r=this.makeDestinationObject(),r[i.property]=s,r[a.property]=a.decode(t,e+u)}else r=o.decode(t,e);return r}encode(t,e,r=0){const i=this.getSourceVariant(t);if(i===void 0){const s=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=s.layout.span),s.encode(t[s.property],e,r),a+o.encode(t[o.property],e,r+a)}return i.encode(t,e,r)}addVariant(t,e,r){const i=new Nh(this,t,e,r);return this.registry[t]=i,i}getVariant(t,e=0){let r;return t instanceof Uint8Array?r=this.discriminator.decode(t,e):r=t,this.registry[r]}};H.Union=mc;let Nh=class extends Dt{constructor(t,e,r,i){if(!(t instanceof mc))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&i===void 0&&(i=r,r=null),r){if(!(r instanceof Dt))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=t.span;0>t.span&&(s=r?r.span:0,0<=s&&t.usesPrefixDiscriminator&&(s+=t.discriminator.layout.span)),super(s,i),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(t,e+r)),r+i}decode(t,e=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+i):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let s=i;if(this.layout&&(this.layout.encode(t[this.property],e,r+i),s+=this.layout.getSpan(e,r+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(t){if(this.layout)return this.layout.fromArray(t)}};H.VariantLayout=Nh;function jr(n){return 0>n&&(n+=4294967296),n}let bc=class extends Dt{constructor(t,e,r){if(!(t instanceof pn||t instanceof bn))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&r===void 0&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let i=0;this._packedSetValue=function(s){return i=jr(s),this},this._packedGetValue=function(){return i}}decode(t,e=0){const r=this.makeDestinationObject(),i=this.word.decode(t,e);this._packedSetValue(i);for(const s of this.fields)s.property!==void 0&&(r[s.property]=s.decode(t));return r}encode(t,e,r=0){const i=this.word.decode(e,r);this._packedSetValue(i);for(const s of this.fields)if(s.property!==void 0){const o=t[s.property];o!==void 0&&s.encode(o)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new Ec(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new xh(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}};H.BitStructure=bc;let Ec=class{constructor(t,e,r){if(!(t instanceof bc))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const i=8*t.span,s=t.fields.reduce((o,a)=>o+a.bits,0);if(e+s>i)throw new Error("bits too long for span remainder ("+(i-s)+" of "+i+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=s,this.container.msb&&(this.start=i-s-e),this.wordMask=jr(this.valueMask<<this.start),this.property=r}decode(t,e){const r=this.container._packedGetValue();return jr(r&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==jr(t&this.valueMask))throw new TypeError(yc("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=jr(t<<this.start);this.container._packedSetValue(jr(e&~this.wordMask)|r)}};H.BitField=Ec;let xh=class extends Ec{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};H.Boolean=xh;let Ch=class extends Dt{constructor(t,e){if(!(t instanceof Ye&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof Ye||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),Mt(t).slice(e,e+r)}encode(t,e,r){let i=this.length;if(this.length instanceof Ye&&(i=t.length),!(t instanceof Uint8Array&&i===t.length))throw new TypeError(yc("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(r+i>e.length)throw new RangeError("encoding overruns Uint8Array");const s=Mt(t);return Mt(e).write(s.toString("hex"),r,i,"hex"),this.length instanceof Ye&&this.length.encode(i,e,r),i}};H.Blob=Ch;let Bh=class extends Dt{constructor(t){super(-1,t)}getSpan(t,e=0){wi(t);let r=e;for(;r<t.length&&t[r]!==0;)r+=1;return 1+r-e}decode(t,e=0){const r=this.getSpan(t,e);return Mt(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const i=gc.Buffer.from(t,"utf8"),s=i.length;if(r+s>e.length)throw new RangeError("encoding overruns Buffer");const o=Mt(e);return i.copy(o,r),o[r+s]=0,s+1}};H.CString=Bh;let Mh=class extends Dt{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return wi(t),t.length-e}decode(t,e=0){const r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return Mt(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const i=gc.Buffer.from(t,"utf8"),s=i.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(r+s>e.length)throw new RangeError("encoding overruns Buffer");return i.copy(Mt(e),r),s}};H.UTF8=Mh;let Lh=class extends Dt{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}};H.Constant=Lh;H.greedy=(n,t)=>new mh(n,t);var ur=H.offset=(n,t,e)=>new _c(n,t,e),xt=H.u8=n=>new pn(1,n),hn=H.u16=n=>new pn(2,n);H.u24=n=>new pn(3,n);var at=H.u32=n=>new pn(4,n);H.u40=n=>new pn(5,n);H.u48=n=>new pn(6,n);var Me=H.nu64=n=>new bh(n);H.u16be=n=>new bn(2,n);H.u24be=n=>new bn(3,n);H.u32be=n=>new bn(4,n);H.u40be=n=>new bn(5,n);H.u48be=n=>new bn(6,n);H.nu64be=n=>new Eh(n);H.s8=n=>new Ur(1,n);H.s16=n=>new Ur(2,n);H.s24=n=>new Ur(3,n);H.s32=n=>new Ur(4,n);H.s40=n=>new Ur(5,n);H.s48=n=>new Ur(6,n);var rn=H.ns64=n=>new Rh(n);H.s16be=n=>new mi(2,n);H.s24be=n=>new mi(3,n);H.s32be=n=>new mi(4,n);H.s40be=n=>new mi(5,n);H.s48be=n=>new mi(6,n);H.ns64be=n=>new Ah(n);H.f32=n=>new vh(n);H.f32be=n=>new Ih(n);H.f64=n=>new Sh(n);H.f64be=n=>new kh(n);var ct=H.struct=(n,t,e)=>new Oh(n,t,e);H.bits=(n,t,e)=>new bc(n,t,e);var Ue=H.seq=(n,t,e)=>new Th(n,t,e);H.union=(n,t,e)=>new mc(n,t,e);H.unionLayoutDiscriminator=(n,t)=>new Ds(n,t);var Xt=H.blob=(n,t)=>new Ch(n,t);H.cstr=n=>new Bh(n);H.utf8=(n,t)=>new Mh(n,t);H.constant=(n,t)=>new Lh(n,t);var ns={};Object.defineProperty(ns,"__esModule",{value:!0});function wy(n){{const t=_t.from(n);t.reverse();const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}var my=ns.toBigIntLE=wy;function by(n){{const t=n.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}ns.toBigIntBE=by;function Ey(n,t){{const e=n.toString(16),r=_t.from(e.padStart(t*2,"0").slice(0,t*2),"hex");return r.reverse(),r}}var Ph=ns.toBufferLE=Ey;function Ry(n,t){{const e=n.toString(16);return _t.from(e.padStart(t*2,"0").slice(0,t*2),"hex")}}ns.toBufferBE=Ry;let Ay=class extends TypeError{constructor(t,e){let r;const{message:i,explanation:s,...o}=t,{path:a}=t,u=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??u),s!=null&&(this.cause=u),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}};function vy(n){return rs(n)&&typeof n[Symbol.iterator]=="function"}function rs(n){return typeof n=="object"&&n!=null}function zs(n){return rs(n)&&!Array.isArray(n)}function En(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function Iy(n){const{done:t,value:e}=n.next();return t?void 0:e}function Sy(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:i,branch:s}=t,{type:o}=e,{refinement:a,message:u=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${En(r)}\``}=n;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...n,message:u}}function*mu(n,t,e,r){vy(n)||(n=[n]);for(const i of n){const s=Sy(i,t,e,r);s&&(yield s)}}function*Rc(n,t,e={}){const{path:r=[],branch:i=[n],coerce:s=!1,mask:o=!1}=e,a={path:r,branch:i,mask:o};s&&(n=t.coercer(n,a));let u="valid";for(const h of t.validator(n,a))h.explanation=e.message,u="not_valid",yield[h,void 0];for(let[h,l,b]of t.entries(n,a)){const R=Rc(l,b,{path:h===void 0?r:[...r,h],branch:h===void 0?i:[...i,l],coerce:s,mask:o,message:e.message});for(const _ of R)_[0]?(u=_[0].refinement!=null?"not_refined":"not_valid",yield[_[0],void 0]):s&&(l=_[1],h===void 0?n=l:n instanceof Map?n.set(h,l):n instanceof Set?n.add(l):rs(n)&&(l!==void 0||h in n)&&(n[h]=l))}if(u!=="not_valid")for(const h of t.refiner(n,a))h.explanation=e.message,u="not_refined",yield[h,void 0];u==="valid"&&(yield[void 0,n])}let Un=class{constructor(t){const{type:e,schema:r,validator:i,refiner:s,coercer:o=u=>u,entries:a=function*(){}}=t;this.type=e,this.schema=r,this.entries=a,this.coercer=o,i?this.validator=(u,h)=>{const l=i(u,h);return mu(l,h,this,u)}:this.validator=()=>[],s?this.refiner=(u,h)=>{const l=s(u,h);return mu(l,h,this,u)}:this.refiner=()=>[]}assert(t,e){return Uh(t,this,e)}create(t,e){return et(t,this,e)}is(t){return Dh(t,this)}mask(t,e){return ky(t,this,e)}validate(t,e={}){return is(t,this,e)}};function Uh(n,t,e){const r=is(n,t,{message:e});if(r[0])throw r[0]}function et(n,t,e){const r=is(n,t,{coerce:!0,message:e});if(r[0])throw r[0];return r[1]}function ky(n,t,e){const r=is(n,t,{coerce:!0,mask:!0,message:e});if(r[0])throw r[0];return r[1]}function Dh(n,t){return!is(n,t)[0]}function is(n,t,e={}){const r=Rc(n,t,e),i=Iy(r);return i[0]?[new Ay(i[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function Dr(n,t){return new Un({type:n,schema:null,validator:t})}function Ty(){return Dr("any",()=>!0)}function rt(n){return new Un({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${En(t)}`}})}function Mn(){return Dr("boolean",n=>typeof n=="boolean")}function Ac(n){return Dr("instance",t=>t instanceof n||`Expected a \`${n.name}\` instance, but received: ${En(t)}`)}function ne(n){const t=En(n),e=typeof n;return new Un({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${t}\`, but received: ${En(r)}`}})}function Oy(){return Dr("never",()=>!1)}function st(n){return new Un({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function U(){return Dr("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${En(n)}`)}function ht(n){return new Un({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function zh(n,t){return new Un({type:"record",schema:null,*entries(e){if(rs(e))for(const r in e){const i=e[r];yield[r,r,n],yield[r,i,t]}},validator(e){return zs(e)||`Expected an object, but received: ${En(e)}`},coercer(e){return zs(e)?{...e}:e}})}function Q(){return Dr("string",n=>typeof n=="string"||`Expected a string, but received: ${En(n)}`)}function vc(n){const t=Oy();return new Un({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(n.length,e.length);for(let i=0;i<r;i++)yield[i,e[i],n[i]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${En(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function Z(n){const t=Object.keys(n);return new Un({type:"type",schema:n,*entries(e){if(rs(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return zs(e)||`Expected an object, but received: ${En(e)}`},coercer(e){return zs(e)?{...e}:e}})}function Ve(n){const t=n.map(e=>e.type).join(" | ");return new Un({type:"union",schema:null,coercer(e,r){for(const i of n){const[s,o]=i.validate(e,{coerce:!0,mask:r.mask});if(!s)return o}return e},validator(e,r){const i=[];for(const s of n){const[...o]=Rc(e,s,r),[a]=o;if(a[0])for(const[u]of o)u&&i.push(u);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${En(e)}`,...i]}})}function bi(){return Dr("unknown",()=>!0)}function ss(n,t,e){return new Un({...n,coercer:(r,i)=>Dh(r,t)?n.coercer(e(r,i),i):n.coercer(r,i)})}var ms,Ny=new Uint8Array(16);function Hh(){if(!ms&&(ms=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ms))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ms(Ny)}const xy=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function so(n){return typeof n=="string"&&xy.test(n)}var Be=[];for(var ea=0;ea<256;++ea)Be.push((ea+256).toString(16).substr(1));function oo(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(Be[n[t+0]]+Be[n[t+1]]+Be[n[t+2]]+Be[n[t+3]]+"-"+Be[n[t+4]]+Be[n[t+5]]+"-"+Be[n[t+6]]+Be[n[t+7]]+"-"+Be[n[t+8]]+Be[n[t+9]]+"-"+Be[n[t+10]]+Be[n[t+11]]+Be[n[t+12]]+Be[n[t+13]]+Be[n[t+14]]+Be[n[t+15]]).toLowerCase();if(!so(e))throw TypeError("Stringified UUID is invalid");return e}var bu,na,ra=0,ia=0;function Cy(n,t,e){var r=t&&e||0,i=t||new Array(16);n=n||{};var s=n.node||bu,o=n.clockseq!==void 0?n.clockseq:na;if(s==null||o==null){var a=n.random||(n.rng||Hh)();s==null&&(s=bu=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=na=(a[6]<<8|a[7])&16383)}var u=n.msecs!==void 0?n.msecs:Date.now(),h=n.nsecs!==void 0?n.nsecs:ia+1,l=u-ra+(h-ia)/1e4;if(l<0&&n.clockseq===void 0&&(o=o+1&16383),(l<0||u>ra)&&n.nsecs===void 0&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ra=u,ia=h,na=o,u+=122192928e5;var b=((u&268435455)*1e4+h)%4294967296;i[r++]=b>>>24&255,i[r++]=b>>>16&255,i[r++]=b>>>8&255,i[r++]=b&255;var R=u/4294967296*1e4&268435455;i[r++]=R>>>8&255,i[r++]=R&255,i[r++]=R>>>24&15|16,i[r++]=R>>>16&255,i[r++]=o>>>8|128,i[r++]=o&255;for(var _=0;_<6;++_)i[r+_]=s[_];return t||oo(i)}function Fh(n){if(!so(n))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function By(n){n=unescape(encodeURIComponent(n));for(var t=[],e=0;e<n.length;++e)t.push(n.charCodeAt(e));return t}var My="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Ly="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function $h(n,t,e){function r(i,s,o,a){if(typeof i=="string"&&(i=By(i)),typeof s=="string"&&(s=Fh(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+i.length);if(u.set(s),u.set(i,s.length),u=e(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,o){a=a||0;for(var h=0;h<16;++h)o[a+h]=u[h];return o}return oo(u)}try{r.name=n}catch{}return r.DNS=My,r.URL=Ly,r}function Py(n){if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}return Uy(Dy(zy(n),n.length*8))}function Uy(n){for(var t=[],e=n.length*32,r="0123456789abcdef",i=0;i<e;i+=8){var s=n[i>>5]>>>i%32&255,o=parseInt(r.charAt(s>>>4&15)+r.charAt(s&15),16);t.push(o)}return t}function Kh(n){return(n+64>>>9<<4)+14+1}function Dy(n,t){n[t>>5]|=128<<t%32,n[Kh(t)-1]=t;for(var e=1732584193,r=-271733879,i=-1732584194,s=271733878,o=0;o<n.length;o+=16){var a=e,u=r,h=i,l=s;e=He(e,r,i,s,n[o],7,-680876936),s=He(s,e,r,i,n[o+1],12,-389564586),i=He(i,s,e,r,n[o+2],17,606105819),r=He(r,i,s,e,n[o+3],22,-1044525330),e=He(e,r,i,s,n[o+4],7,-176418897),s=He(s,e,r,i,n[o+5],12,1200080426),i=He(i,s,e,r,n[o+6],17,-1473231341),r=He(r,i,s,e,n[o+7],22,-45705983),e=He(e,r,i,s,n[o+8],7,1770035416),s=He(s,e,r,i,n[o+9],12,-1958414417),i=He(i,s,e,r,n[o+10],17,-42063),r=He(r,i,s,e,n[o+11],22,-1990404162),e=He(e,r,i,s,n[o+12],7,1804603682),s=He(s,e,r,i,n[o+13],12,-40341101),i=He(i,s,e,r,n[o+14],17,-1502002290),r=He(r,i,s,e,n[o+15],22,1236535329),e=Fe(e,r,i,s,n[o+1],5,-165796510),s=Fe(s,e,r,i,n[o+6],9,-1069501632),i=Fe(i,s,e,r,n[o+11],14,643717713),r=Fe(r,i,s,e,n[o],20,-373897302),e=Fe(e,r,i,s,n[o+5],5,-701558691),s=Fe(s,e,r,i,n[o+10],9,38016083),i=Fe(i,s,e,r,n[o+15],14,-660478335),r=Fe(r,i,s,e,n[o+4],20,-405537848),e=Fe(e,r,i,s,n[o+9],5,568446438),s=Fe(s,e,r,i,n[o+14],9,-1019803690),i=Fe(i,s,e,r,n[o+3],14,-187363961),r=Fe(r,i,s,e,n[o+8],20,1163531501),e=Fe(e,r,i,s,n[o+13],5,-1444681467),s=Fe(s,e,r,i,n[o+2],9,-51403784),i=Fe(i,s,e,r,n[o+7],14,1735328473),r=Fe(r,i,s,e,n[o+12],20,-1926607734),e=$e(e,r,i,s,n[o+5],4,-378558),s=$e(s,e,r,i,n[o+8],11,-2022574463),i=$e(i,s,e,r,n[o+11],16,1839030562),r=$e(r,i,s,e,n[o+14],23,-35309556),e=$e(e,r,i,s,n[o+1],4,-1530992060),s=$e(s,e,r,i,n[o+4],11,1272893353),i=$e(i,s,e,r,n[o+7],16,-155497632),r=$e(r,i,s,e,n[o+10],23,-1094730640),e=$e(e,r,i,s,n[o+13],4,681279174),s=$e(s,e,r,i,n[o],11,-358537222),i=$e(i,s,e,r,n[o+3],16,-722521979),r=$e(r,i,s,e,n[o+6],23,76029189),e=$e(e,r,i,s,n[o+9],4,-640364487),s=$e(s,e,r,i,n[o+12],11,-421815835),i=$e(i,s,e,r,n[o+15],16,530742520),r=$e(r,i,s,e,n[o+2],23,-995338651),e=Ke(e,r,i,s,n[o],6,-198630844),s=Ke(s,e,r,i,n[o+7],10,1126891415),i=Ke(i,s,e,r,n[o+14],15,-1416354905),r=Ke(r,i,s,e,n[o+5],21,-57434055),e=Ke(e,r,i,s,n[o+12],6,1700485571),s=Ke(s,e,r,i,n[o+3],10,-1894986606),i=Ke(i,s,e,r,n[o+10],15,-1051523),r=Ke(r,i,s,e,n[o+1],21,-2054922799),e=Ke(e,r,i,s,n[o+8],6,1873313359),s=Ke(s,e,r,i,n[o+15],10,-30611744),i=Ke(i,s,e,r,n[o+6],15,-1560198380),r=Ke(r,i,s,e,n[o+13],21,1309151649),e=Ke(e,r,i,s,n[o+4],6,-145523070),s=Ke(s,e,r,i,n[o+11],10,-1120210379),i=Ke(i,s,e,r,n[o+2],15,718787259),r=Ke(r,i,s,e,n[o+9],21,-343485551),e=ar(e,a),r=ar(r,u),i=ar(i,h),s=ar(s,l)}return[e,r,i,s]}function zy(n){if(n.length===0)return[];for(var t=n.length*8,e=new Uint32Array(Kh(t)),r=0;r<t;r+=8)e[r>>5]|=(n[r/8]&255)<<r%32;return e}function ar(n,t){var e=(n&65535)+(t&65535),r=(n>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function Hy(n,t){return n<<t|n>>>32-t}function ao(n,t,e,r,i,s){return ar(Hy(ar(ar(t,n),ar(r,s)),i),e)}function He(n,t,e,r,i,s,o){return ao(t&e|~t&r,n,t,i,s,o)}function Fe(n,t,e,r,i,s,o){return ao(t&r|e&~r,n,t,i,s,o)}function $e(n,t,e,r,i,s,o){return ao(t^e^r,n,t,i,s,o)}function Ke(n,t,e,r,i,s,o){return ao(e^(t|~r),n,t,i,s,o)}var Fy=$h("v3",48,Py);function $y(n,t,e){n=n||{};var r=n.random||(n.rng||Hh)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var i=0;i<16;++i)t[e+i]=r[i];return t}return oo(r)}function Ky(n,t,e,r){switch(n){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function sa(n,t){return n<<t|n>>>32-t}function qy(n){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var i=0;i<r.length;++i)n.push(r.charCodeAt(i))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var s=n.length/4+2,o=Math.ceil(s/16),a=new Array(o),u=0;u<o;++u){for(var h=new Uint32Array(16),l=0;l<16;++l)h[l]=n[u*64+l*4]<<24|n[u*64+l*4+1]<<16|n[u*64+l*4+2]<<8|n[u*64+l*4+3];a[u]=h}a[o-1][14]=(n.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(n.length-1)*8&4294967295;for(var b=0;b<o;++b){for(var R=new Uint32Array(80),_=0;_<16;++_)R[_]=a[b][_];for(var S=16;S<80;++S)R[S]=sa(R[S-3]^R[S-8]^R[S-14]^R[S-16],1);for(var N=e[0],A=e[1],C=e[2],D=e[3],x=e[4],L=0;L<80;++L){var K=Math.floor(L/20),Y=sa(N,5)+Ky(K,A,C,D)+x+t[K]+R[L]>>>0;x=D,D=C,C=sa(A,30)>>>0,A=N,N=Y}e[0]=e[0]+N>>>0,e[1]=e[1]+A>>>0,e[2]=e[2]+C>>>0,e[3]=e[3]+D>>>0,e[4]=e[4]+x>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Wy=$h("v5",80,qy);const Vy="00000000-0000-0000-0000-000000000000";function Gy(n){if(!so(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const jy=Object.freeze(Object.defineProperty({__proto__:null,NIL:Vy,parse:Fh,stringify:oo,v1:Cy,v3:Fy,v4:$y,v5:Wy,validate:so,version:Gy},Symbol.toStringTag,{value:"Module"})),qh=Zs(jy),Zy=qh.v4,Yy=function(n,t,e,r){if(typeof n!="string")throw new TypeError(n+" must be a string");r=r||{};const i=typeof r.version=="number"?r.version:2;if(i!==1&&i!==2)throw new TypeError(i+" must be 1 or 2");const s={method:n};if(i===2&&(s.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");s.params=t}if(typeof e>"u"){const o=typeof r.generator=="function"?r.generator:function(){return Zy()};s.id=o(s,r)}else i===2&&e===null?r.notificationIdNull&&(s.id=null):s.id=e;return s};var Xy=Yy;const Jy=qh.v4,Qy=Xy,Fi=function(n,t){if(!(this instanceof Fi))return new Fi(n,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return Jy()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=n};var t_=Fi;Fi.prototype.request=function(n,t,e,r){const i=this;let s=null;const o=Array.isArray(n)&&typeof t=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&n&&typeof n=="object"&&typeof t=="function")r=t,s=n;else{typeof e=="function"&&(r=e,e=void 0);const h=typeof r=="function";try{s=Qy(n,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(l){if(h)return r(l);throw l}if(!h)return s}let u;try{u=JSON.stringify(s,this.options.replacer)}catch(h){return r(h)}return this.callServer(u,function(h,l){i._parseResponse(h,l,r)}),s};Fi.prototype._parseResponse=function(n,t,e){if(n){e(n);return}if(!t)return e();let r;try{r=JSON.parse(t,this.options.reviver)}catch(i){return e(i)}if(e.length===3)if(Array.isArray(r)){const i=function(o){return typeof o.error<"u"},s=function(o){return!i(o)};return e(null,r.filter(i),r.filter(s))}else return e(null,r.error,r.result);e(null,r)};const e_=gi(t_);var Wh={exports:{}};(function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function i(u,h,l){this.fn=u,this.context=h,this.once=l||!1}function s(u,h,l,b,R){if(typeof l!="function")throw new TypeError("The listener must be a function");var _=new i(l,b||u,R),S=e?e+h:h;return u._events[S]?u._events[S].fn?u._events[S]=[u._events[S],_]:u._events[S].push(_):(u._events[S]=_,u._eventsCount++),u}function o(u,h){--u._eventsCount===0?u._events=new r:delete u._events[h]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var h=[],l,b;if(this._eventsCount===0)return h;for(b in l=this._events)t.call(l,b)&&h.push(e?b.slice(1):b);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(l)):h},a.prototype.listeners=function(h){var l=e?e+h:h,b=this._events[l];if(!b)return[];if(b.fn)return[b.fn];for(var R=0,_=b.length,S=new Array(_);R<_;R++)S[R]=b[R].fn;return S},a.prototype.listenerCount=function(h){var l=e?e+h:h,b=this._events[l];return b?b.fn?1:b.length:0},a.prototype.emit=function(h,l,b,R,_,S){var N=e?e+h:h;if(!this._events[N])return!1;var A=this._events[N],C=arguments.length,D,x;if(A.fn){switch(A.once&&this.removeListener(h,A.fn,void 0,!0),C){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,l),!0;case 3:return A.fn.call(A.context,l,b),!0;case 4:return A.fn.call(A.context,l,b,R),!0;case 5:return A.fn.call(A.context,l,b,R,_),!0;case 6:return A.fn.call(A.context,l,b,R,_,S),!0}for(x=1,D=new Array(C-1);x<C;x++)D[x-1]=arguments[x];A.fn.apply(A.context,D)}else{var L=A.length,K;for(x=0;x<L;x++)switch(A[x].once&&this.removeListener(h,A[x].fn,void 0,!0),C){case 1:A[x].fn.call(A[x].context);break;case 2:A[x].fn.call(A[x].context,l);break;case 3:A[x].fn.call(A[x].context,l,b);break;case 4:A[x].fn.call(A[x].context,l,b,R);break;default:if(!D)for(K=1,D=new Array(C-1);K<C;K++)D[K-1]=arguments[K];A[x].fn.apply(A[x].context,D)}}return!0},a.prototype.on=function(h,l,b){return s(this,h,l,b,!1)},a.prototype.once=function(h,l,b){return s(this,h,l,b,!0)},a.prototype.removeListener=function(h,l,b,R){var _=e?e+h:h;if(!this._events[_])return this;if(!l)return o(this,_),this;var S=this._events[_];if(S.fn)S.fn===l&&(!R||S.once)&&(!b||S.context===b)&&o(this,_);else{for(var N=0,A=[],C=S.length;N<C;N++)(S[N].fn!==l||R&&!S[N].once||b&&S[N].context!==b)&&A.push(S[N]);A.length?this._events[_]=A.length===1?A[0]:A:o(this,_)}return this},a.prototype.removeAllListeners=function(h){var l;return h?(l=e?e+h:h,this._events[l]&&o(this,l)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,n.exports=a})(Wh);var n_=Wh.exports;const Vh=gi(n_);var r_=class extends Vh{constructor(t,e,r){super();Te(this,"socket");this.socket=new window.WebSocket(t,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=i=>this.emit("message",i.data),this.socket.onerror=i=>this.emit("error",i),this.socket.onclose=i=>{this.emit("close",i.code,i.reason)}}send(t,e,r){const i=r||e;try{this.socket.send(t),i()}catch(s){i(s)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,r){this.socket.addEventListener(t,e,r)}};function i_(n,t){return new r_(n,t)}var s_=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},o_=class extends Vh{constructor(t,e="ws://localhost:8080",{autoconnect:r=!0,reconnect:i=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...a}={},u,h){super();Te(this,"address");Te(this,"rpc_id");Te(this,"queue");Te(this,"options");Te(this,"autoconnect");Te(this,"ready");Te(this,"reconnect");Te(this,"reconnect_timer_id");Te(this,"reconnect_interval");Te(this,"max_reconnects");Te(this,"rest_options");Te(this,"current_reconnects");Te(this,"generate_request_id");Te(this,"socket");Te(this,"webSocketFactory");Te(this,"dataPack");this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=r,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=u||(()=>++this.rpc_id),h?this.dataPack=h:this.dataPack=new s_,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,r,i){return!i&&typeof r=="object"&&(i=r,r=null),new Promise((s,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(t,e),u={jsonrpc:"2.0",method:t,params:e||void 0,id:a};this.socket.send(this.dataPack.encode(u),i,h=>{if(h)return o(h);this.queue[a]={promise:[s,o]},r&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},r))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((r,i)=>{if(!this.ready)return i(new Error("socket not ready"));const s={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(s),o=>{if(o)return i(o);r()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=ut.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const i=[r.notification];if(r.params.constructor===Object)i.push(r.params);else for(let s=0;s<r.params.length;s++)i.push(r.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",r,i),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}};const Gh=[],jh=[],Zh=[],a_=BigInt(0),ki=BigInt(1),c_=BigInt(2),u_=BigInt(7),l_=BigInt(256),h_=BigInt(113);for(let n=0,t=ki,e=1,r=0;n<24;n++){[e,r]=[r,(2*e+3*r)%5],Gh.push(2*(5*r+e)),jh.push((n+1)*(n+2)/2%64);let i=a_;for(let s=0;s<7;s++)t=(t<<ki^(t>>u_)*h_)%l_,t&c_&&(i^=ki<<(ki<<BigInt(s))-ki);Zh.push(i)}const[d_,f_]=Yl(Zh,!0),Eu=(n,t,e)=>e>32?Ql(n,t,e):Xl(n,t,e),Ru=(n,t,e)=>e>32?th(n,t,e):Jl(n,t,e);function p_(n,t=24){const e=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)e[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,u=(o+2)%10,h=e[u],l=e[u+1],b=Eu(h,l,1)^e[a],R=Ru(h,l,1)^e[a+1];for(let _=0;_<50;_+=10)n[o+_]^=b,n[o+_+1]^=R}let i=n[2],s=n[3];for(let o=0;o<24;o++){const a=jh[o],u=Eu(i,s,a),h=Ru(i,s,a),l=Gh[o];i=n[l],s=n[l+1],n[l]=u,n[l+1]=h}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)e[a]=n[o+a];for(let a=0;a<10;a++)n[o+a]^=~e[(a+2)%10]&e[(a+4)%10]}n[0]^=d_[r],n[1]^=f_[r]}e.fill(0)}class Ic extends ic{constructor(t,e,r,i=!1,s=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Bs(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=H0(this.state)}keccak(){lu||hu(this.state32),p_(this.state32,this.rounds),lu||hu(this.state32),this.posOut=0,this.pos=0}update(t){oi(this);const{blockLen:e,state:r}=this;t=Xs(t);const i=t.length;for(let s=0;s<i;){const o=Math.min(e-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=t[s++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:i}=this;t[r]^=e,e&128&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){oi(this,!1),ts(t),this.finish();const e=this.state,{blockLen:r}=this;for(let i=0,s=t.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);t.set(e.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Bs(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Vl(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return t||(t=new Ic(e,r,i,o,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=r,t.outputLen=i,t.enableXOF=o,t.destroyed=this.destroyed,t}}const g_=(n,t,e)=>sc(()=>new Ic(t,n,e)),Au=g_(1,136,256/8);class Yh extends ic{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,z0(t);const r=Xs(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?t.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(t){return oi(this),this.iHash.update(t),this}digestInto(t){oi(this),ts(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=o,t.outputLen=a,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Xh=(n,t,e)=>new Yh(n,t).update(e).digest();Xh.create=(n,t)=>new Yh(n,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function vu(n){n.lowS!==void 0&&Yn("lowS",n.lowS),n.prehash!==void 0&&Yn("prehash",n.prehash)}function y_(n){const t=cc(n);yi(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:r,a:i}=t;if(e){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:__,hexToBytes:w_}=Rg;class m_ extends Error{constructor(t=""){super(t)}}const $n={Err:m_,_tlv:{encode:(n,t)=>{const{Err:e}=$n;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const r=t.length/2,i=Yr(r);if(i.length/2&128)throw new e("tlv.encode: long form length too big");const s=r>127?Yr(i.length/2|128):"";return Yr(n)+s+i+t},decode(n,t){const{Err:e}=$n;let r=0;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[r++]!==n)throw new e("tlv.decode: wrong tlv");const i=t[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const u=i&127;if(!u)throw new e("tlv.decode(long): indefinite length not supported");if(u>4)throw new e("tlv.decode(long): byte length is too big");const h=t.subarray(r,r+u);if(h.length!==u)throw new e("tlv.decode: length bytes not complete");if(h[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const l of h)o=o<<8|l;if(r+=u,o<128)throw new e("tlv.decode(long): not minimal encoding")}const a=t.subarray(r,r+o);if(a.length!==o)throw new e("tlv.decode: wrong value length");return{v:a,l:t.subarray(r+o)}}},_int:{encode(n){const{Err:t}=$n;if(n<Gn)throw new t("integer: negative integers are not allowed");let e=Yr(n);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(n){const{Err:t}=$n;if(n[0]&128)throw new t("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return __(n)}},toSig(n){const{Err:t,_int:e,_tlv:r}=$n,i=typeof n=="string"?w_(n):n;es(i);const{v:s,l:o}=r.decode(48,i);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:u}=r.decode(2,s),{v:h,l}=r.decode(2,u);if(l.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(a),s:e.decode(h)}},hexFromSig(n){const{_tlv:t,_int:e}=$n,r=t.encode(2,e.encode(n.r)),i=t.encode(2,e.encode(n.s)),s=r+i;return t.encode(48,s)}},Gn=BigInt(0),Oe=BigInt(1);BigInt(2);const Iu=BigInt(3);BigInt(4);function b_(n){const t=y_(n),{Fp:e}=t,r=eo(t.n,t.nBitLength),i=t.toBytes||((N,A,C)=>{const D=A.toAffine();return Cr(Uint8Array.from([4]),e.toBytes(D.x),e.toBytes(D.y))}),s=t.fromBytes||(N=>{const A=N.subarray(1),C=e.fromBytes(A.subarray(0,e.BYTES)),D=e.fromBytes(A.subarray(e.BYTES,2*e.BYTES));return{x:C,y:D}});function o(N){const{a:A,b:C}=t,D=e.sqr(N),x=e.mul(D,N);return e.add(e.add(x,e.mul(N,A)),C)}if(!e.eql(e.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function a(N){return to(N,Oe,t.n)}function u(N){const{allowedPrivateKeyLengths:A,nByteLength:C,wrapPrivateKey:D,n:x}=t;if(A&&typeof N!="bigint"){if(Nr(N)&&(N=xr(N)),typeof N!="string"||!A.includes(N.length))throw new Error("invalid private key");N=N.padStart(C*2,"0")}let L;try{L=typeof N=="bigint"?N:Or(ve("private key",N,C))}catch{throw new Error("invalid private key, expected hex or "+C+" bytes, got "+typeof N)}return D&&(L=ee(L,x)),dn("private key",L,Oe,x),L}function h(N){if(!(N instanceof R))throw new Error("ProjectivePoint expected")}const l=Hi((N,A)=>{const{px:C,py:D,pz:x}=N;if(e.eql(x,e.ONE))return{x:C,y:D};const L=N.is0();A==null&&(A=L?e.ONE:e.inv(x));const K=e.mul(C,A),Y=e.mul(D,A),$=e.mul(x,A);if(L)return{x:e.ZERO,y:e.ZERO};if(!e.eql($,e.ONE))throw new Error("invZ was invalid");return{x:K,y:Y}}),b=Hi(N=>{if(N.is0()){if(t.allowInfinityPoint&&!e.is0(N.py))return;throw new Error("bad point: ZERO")}const{x:A,y:C}=N.toAffine();if(!e.isValid(A)||!e.isValid(C))throw new Error("bad point: x or y not FE");const D=e.sqr(C),x=o(A);if(!e.eql(D,x))throw new Error("bad point: equation left != right");if(!N.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class R{constructor(A,C,D){if(this.px=A,this.py=C,this.pz=D,A==null||!e.isValid(A))throw new Error("x required");if(C==null||!e.isValid(C))throw new Error("y required");if(D==null||!e.isValid(D))throw new Error("z required");Object.freeze(this)}static fromAffine(A){const{x:C,y:D}=A||{};if(!A||!e.isValid(C)||!e.isValid(D))throw new Error("invalid affine point");if(A instanceof R)throw new Error("projective point not allowed");const x=L=>e.eql(L,e.ZERO);return x(C)&&x(D)?R.ZERO:new R(C,D,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(A){const C=e.invertBatch(A.map(D=>D.pz));return A.map((D,x)=>D.toAffine(C[x])).map(R.fromAffine)}static fromHex(A){const C=R.fromAffine(s(ve("pointHex",A)));return C.assertValidity(),C}static fromPrivateKey(A){return R.BASE.multiply(u(A))}static msm(A,C){return uh(R,r,A,C)}_setWindowSize(A){S.setWindowSize(this,A)}assertValidity(){b(this)}hasEvenY(){const{y:A}=this.toAffine();if(e.isOdd)return!e.isOdd(A);throw new Error("Field doesn't support isOdd")}equals(A){h(A);const{px:C,py:D,pz:x}=this,{px:L,py:K,pz:Y}=A,$=e.eql(e.mul(C,Y),e.mul(L,x)),G=e.eql(e.mul(D,Y),e.mul(K,x));return $&&G}negate(){return new R(this.px,e.neg(this.py),this.pz)}double(){const{a:A,b:C}=t,D=e.mul(C,Iu),{px:x,py:L,pz:K}=this;let Y=e.ZERO,$=e.ZERO,G=e.ZERO,j=e.mul(x,x),tt=e.mul(L,L),W=e.mul(K,K),V=e.mul(x,L);return V=e.add(V,V),G=e.mul(x,K),G=e.add(G,G),Y=e.mul(A,G),$=e.mul(D,W),$=e.add(Y,$),Y=e.sub(tt,$),$=e.add(tt,$),$=e.mul(Y,$),Y=e.mul(V,Y),G=e.mul(D,G),W=e.mul(A,W),V=e.sub(j,W),V=e.mul(A,V),V=e.add(V,G),G=e.add(j,j),j=e.add(G,j),j=e.add(j,W),j=e.mul(j,V),$=e.add($,j),W=e.mul(L,K),W=e.add(W,W),j=e.mul(W,V),Y=e.sub(Y,j),G=e.mul(W,tt),G=e.add(G,G),G=e.add(G,G),new R(Y,$,G)}add(A){h(A);const{px:C,py:D,pz:x}=this,{px:L,py:K,pz:Y}=A;let $=e.ZERO,G=e.ZERO,j=e.ZERO;const tt=t.a,W=e.mul(t.b,Iu);let V=e.mul(C,L),v=e.mul(D,K),c=e.mul(x,Y),d=e.add(C,D),y=e.add(L,K);d=e.mul(d,y),y=e.add(V,v),d=e.sub(d,y),y=e.add(C,x);let w=e.add(L,Y);return y=e.mul(y,w),w=e.add(V,c),y=e.sub(y,w),w=e.add(D,x),$=e.add(K,Y),w=e.mul(w,$),$=e.add(v,c),w=e.sub(w,$),j=e.mul(tt,y),$=e.mul(W,c),j=e.add($,j),$=e.sub(v,j),j=e.add(v,j),G=e.mul($,j),v=e.add(V,V),v=e.add(v,V),c=e.mul(tt,c),y=e.mul(W,y),v=e.add(v,c),c=e.sub(V,c),c=e.mul(tt,c),y=e.add(y,c),V=e.mul(v,y),G=e.add(G,V),V=e.mul(w,y),$=e.mul(d,$),$=e.sub($,V),V=e.mul(d,v),j=e.mul(w,j),j=e.add(j,V),new R($,G,j)}subtract(A){return this.add(A.negate())}is0(){return this.equals(R.ZERO)}wNAF(A){return S.wNAFCached(this,A,R.normalizeZ)}multiplyUnsafe(A){const{endo:C,n:D}=t;dn("scalar",A,Gn,D);const x=R.ZERO;if(A===Gn)return x;if(this.is0()||A===Oe)return this;if(!C||S.hasPrecomputes(this))return S.wNAFCachedUnsafe(this,A,R.normalizeZ);let{k1neg:L,k1:K,k2neg:Y,k2:$}=C.splitScalar(A),G=x,j=x,tt=this;for(;K>Gn||$>Gn;)K&Oe&&(G=G.add(tt)),$&Oe&&(j=j.add(tt)),tt=tt.double(),K>>=Oe,$>>=Oe;return L&&(G=G.negate()),Y&&(j=j.negate()),j=new R(e.mul(j.px,C.beta),j.py,j.pz),G.add(j)}multiply(A){const{endo:C,n:D}=t;dn("scalar",A,Oe,D);let x,L;if(C){const{k1neg:K,k1:Y,k2neg:$,k2:G}=C.splitScalar(A);let{p:j,f:tt}=this.wNAF(Y),{p:W,f:V}=this.wNAF(G);j=S.constTimeNegate(K,j),W=S.constTimeNegate($,W),W=new R(e.mul(W.px,C.beta),W.py,W.pz),x=j.add(W),L=tt.add(V)}else{const{p:K,f:Y}=this.wNAF(A);x=K,L=Y}return R.normalizeZ([x,L])[0]}multiplyAndAddUnsafe(A,C,D){const x=R.BASE,L=(Y,$)=>$===Gn||$===Oe||!Y.equals(x)?Y.multiplyUnsafe($):Y.multiply($),K=L(this,C).add(L(A,D));return K.is0()?void 0:K}toAffine(A){return l(this,A)}isTorsionFree(){const{h:A,isTorsionFree:C}=t;if(A===Oe)return!0;if(C)return C(R,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:A,clearCofactor:C}=t;return A===Oe?this:C?C(R,this):this.multiplyUnsafe(t.h)}toRawBytes(A=!0){return Yn("isCompressed",A),this.assertValidity(),i(R,this,A)}toHex(A=!0){return Yn("isCompressed",A),xr(this.toRawBytes(A))}}R.BASE=new R(t.Gx,t.Gy,e.ONE),R.ZERO=new R(e.ZERO,e.ONE,e.ZERO);const _=t.nBitLength,S=ch(R,t.endo?Math.ceil(_/2):_);return{CURVE:t,ProjectivePoint:R,normPrivateKeyToScalar:u,weierstrassEquation:o,isWithinCurveOrder:a}}function E_(n){const t=cc(n);return yi(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function R_(n){const t=E_(n),{Fp:e,n:r}=t,i=e.BYTES+1,s=2*e.BYTES+1;function o(c){return ee(c,r)}function a(c){return xa(c,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:h,weierstrassEquation:l,isWithinCurveOrder:b}=b_({...t,toBytes(c,d,y){const w=d.toAffine(),E=e.toBytes(w.x),T=Cr;return Yn("isCompressed",y),y?T(Uint8Array.from([d.hasEvenY()?2:3]),E):T(Uint8Array.from([4]),E,e.toBytes(w.y))},fromBytes(c){const d=c.length,y=c[0],w=c.subarray(1);if(d===i&&(y===2||y===3)){const E=Or(w);if(!to(E,Oe,e.ORDER))throw new Error("Point is not on curve");const T=l(E);let B;try{B=e.sqrt(T)}catch(O){const q=O instanceof Error?": "+O.message:"";throw new Error("Point is not on curve"+q)}const I=(B&Oe)===Oe;return(y&1)===1!==I&&(B=e.neg(B)),{x:E,y:B}}else if(d===s&&y===4){const E=e.fromBytes(w.subarray(0,e.BYTES)),T=e.fromBytes(w.subarray(e.BYTES,2*e.BYTES));return{x:E,y:T}}else{const E=i,T=s;throw new Error("invalid Point, expected length of "+E+", or uncompressed "+T+", got "+d)}}}),R=c=>xr(ci(c,t.nByteLength));function _(c){const d=r>>Oe;return c>d}function S(c){return _(c)?o(-c):c}const N=(c,d,y)=>Or(c.slice(d,y));class A{constructor(d,y,w){this.r=d,this.s=y,this.recovery=w,this.assertValidity()}static fromCompact(d){const y=t.nByteLength;return d=ve("compactSignature",d,y*2),new A(N(d,0,y),N(d,y,2*y))}static fromDER(d){const{r:y,s:w}=$n.toSig(ve("DER",d));return new A(y,w)}assertValidity(){dn("r",this.r,Oe,r),dn("s",this.s,Oe,r)}addRecoveryBit(d){return new A(this.r,this.s,d)}recoverPublicKey(d){const{r:y,s:w,recovery:E}=this,T=Y(ve("msgHash",d));if(E==null||![0,1,2,3].includes(E))throw new Error("recovery id invalid");const B=E===2||E===3?y+t.n:y;if(B>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const I=E&1?"03":"02",g=u.fromHex(I+R(B)),O=a(B),q=o(-T*O),J=o(w*O),it=u.BASE.multiplyAndAddUnsafe(g,q,J);if(!it)throw new Error("point at infinify");return it.assertValidity(),it}hasHighS(){return _(this.s)}normalizeS(){return this.hasHighS()?new A(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return ai(this.toDERHex())}toDERHex(){return $n.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ai(this.toCompactHex())}toCompactHex(){return R(this.r)+R(this.s)}}const C={isValidPrivateKey(c){try{return h(c),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const c=sh(t.n);return Cg(t.randomBytes(c),t.n)},precompute(c=8,d=u.BASE){return d._setWindowSize(c),d.multiply(BigInt(3)),d}};function D(c,d=!0){return u.fromPrivateKey(c).toRawBytes(d)}function x(c){const d=Nr(c),y=typeof c=="string",w=(d||y)&&c.length;return d?w===i||w===s:y?w===2*i||w===2*s:c instanceof u}function L(c,d,y=!0){if(x(c))throw new Error("first arg must be private key");if(!x(d))throw new Error("second arg must be public key");return u.fromHex(d).multiply(h(c)).toRawBytes(y)}const K=t.bits2int||function(c){if(c.length>8192)throw new Error("input is too large");const d=Or(c),y=c.length*8-t.nBitLength;return y>0?d>>BigInt(y):d},Y=t.bits2int_modN||function(c){return o(K(c))},$=ac(t.nBitLength);function G(c){return dn("num < 2^"+t.nBitLength,c,Gn,$),ci(c,t.nByteLength)}function j(c,d,y=tt){if(["recovered","canonical"].some(ft=>ft in y))throw new Error("sign() legacy options not supported");const{hash:w,randomBytes:E}=t;let{lowS:T,prehash:B,extraEntropy:I}=y;T==null&&(T=!0),c=ve("msgHash",c),vu(y),B&&(c=ve("prehashed msgHash",w(c)));const g=Y(c),O=h(d),q=[G(O),G(g)];if(I!=null&&I!==!1){const ft=I===!0?E(e.BYTES):I;q.push(ve("extraEntropy",ft))}const J=Cr(...q),it=g;function It(ft){const gt=K(ft);if(!b(gt))return;const se=a(gt),wt=u.BASE.multiply(gt).toAffine(),bt=o(wt.x);if(bt===Gn)return;const De=o(se*o(it+bt*O));if(De===Gn)return;let Lt=(wt.x===bt?0:2)|Number(wt.y&Oe),Nt=De;return T&&_(De)&&(Nt=S(De),Lt^=1),new A(bt,Nt,Lt)}return{seed:J,k2sig:It}}const tt={lowS:t.lowS,prehash:!1},W={lowS:t.lowS,prehash:!1};function V(c,d,y=tt){const{seed:w,k2sig:E}=j(c,d,y),T=t;return nh(T.hash.outputLen,T.nByteLength,T.hmac)(w,E)}u.BASE._setWindowSize(8);function v(c,d,y,w=W){var Lt;const E=c;d=ve("msgHash",d),y=ve("publicKey",y);const{lowS:T,prehash:B,format:I}=w;if(vu(w),"strict"in w)throw new Error("options.strict was renamed to lowS");if(I!==void 0&&I!=="compact"&&I!=="der")throw new Error("format must be compact or der");const g=typeof E=="string"||Nr(E),O=!g&&!I&&typeof E=="object"&&E!==null&&typeof E.r=="bigint"&&typeof E.s=="bigint";if(!g&&!O)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let q,J;try{if(O&&(q=new A(E.r,E.s)),g){try{I!=="compact"&&(q=A.fromDER(E))}catch(Nt){if(!(Nt instanceof $n.Err))throw Nt}!q&&I!=="der"&&(q=A.fromCompact(E))}J=u.fromHex(y)}catch{return!1}if(!q||T&&q.hasHighS())return!1;B&&(d=t.hash(d));const{r:it,s:It}=q,ft=Y(d),gt=a(It),se=o(ft*gt),wt=o(it*gt),bt=(Lt=u.BASE.multiplyAndAddUnsafe(J,se,wt))==null?void 0:Lt.toAffine();return bt?o(bt.x)===it:!1}return{CURVE:t,getPublicKey:D,getSharedSecret:L,sign:V,verify:v,ProjectivePoint:u,Signature:A,utils:C}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function A_(n){return{hash:n,hmac:(t,...e)=>Xh(n,t,K0(...e)),randomBytes:Gl}}function v_(n,t){const e=r=>R_({...n,...A_(r)});return{...e(t),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Jh=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Su=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),I_=BigInt(1),La=BigInt(2),ku=(n,t)=>(n+t/La)/t;function S_(n){const t=Jh,e=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),h=n*n*n%t,l=h*h*n%t,b=oe(l,e,t)*l%t,R=oe(b,e,t)*l%t,_=oe(R,La,t)*h%t,S=oe(_,i,t)*_%t,N=oe(S,s,t)*S%t,A=oe(N,a,t)*N%t,C=oe(A,u,t)*A%t,D=oe(C,a,t)*N%t,x=oe(D,e,t)*l%t,L=oe(x,o,t)*S%t,K=oe(L,r,t)*h%t,Y=oe(K,La,t);if(!Pa.eql(Pa.sqr(Y),n))throw new Error("Cannot find square root");return Y}const Pa=eo(Jh,void 0,void 0,{sqrt:S_}),co=v_({a:BigInt(0),b:BigInt(7),Fp:Pa,n:Su,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const t=Su,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-I_*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=e,o=BigInt("0x100000000000000000000000000000000"),a=ku(s*n,t),u=ku(-r*n,t);let h=ee(n-a*e-u*i,t),l=ee(-a*r-u*s,t);const b=h>o,R=l>o;if(b&&(h=t-h),R&&(l=t-l),h>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:b,k1:h,k2neg:R,k2:l}}}},Ba);BigInt(0);co.ProjectivePoint;const k_=_i.utils.randomPrivateKey,Tu=()=>{const n=_i.utils.randomPrivateKey(),t=Hs(n),e=new Uint8Array(64);return e.set(n),e.set(t,32),{publicKey:t,secretKey:e}},Hs=_i.getPublicKey;function Ou(n){try{return _i.ExtendedPoint.fromHex(n),!0}catch{return!1}}const Sc=(n,t)=>_i.sign(n,t.slice(0,32)),T_=_i.verify,vt=n=>ut.isBuffer(n)?n:n instanceof Uint8Array?ut.from(n.buffer,n.byteOffset,n.byteLength):ut.from(n);let kc=class{constructor(t){Object.assign(this,t)}encode(){return ut.from(_h(Bi,this))}static decode(t){return wh(Bi,this,t)}static decodeUnchecked(t){return dh(Bi,this,t)}};class O_ extends kc{constructor(t){if(super(t),this.enum="",Object.keys(t).length!==1)throw new Error("Enum can only take single value");Object.keys(t).map(e=>{this.enum=e})}}const Bi=new Map;var Qh;const td=32,xn=32;function N_(n){return n._bn!==void 0}let Nu=1;class X extends kc{constructor(t){if(super({}),this._bn=void 0,N_(t))this._bn=t._bn;else{if(typeof t=="string"){const e=ae.decode(t);if(e.length!=xn)throw new Error("Invalid public key input");this._bn=new Wn(e)}else this._bn=new Wn(t);if(this._bn.byteLength()>xn)throw new Error("Invalid public key input")}}static unique(){const t=new X(Nu);return Nu+=1,new X(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return ae.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(ut);if(t.length===xn)return t;const e=ut.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const i=ut.concat([t.toBuffer(),ut.from(e),r.toBuffer()]),s=Ba(i);return new X(s)}static createProgramAddressSync(t,e){let r=ut.alloc(0);t.forEach(function(s){if(s.length>td)throw new TypeError("Max seed length exceeded");r=ut.concat([r,vt(s)])}),r=ut.concat([r,e.toBuffer(),ut.from("ProgramDerivedAddress")]);const i=Ba(r);if(Ou(i))throw new Error("Invalid seeds, address must fall off the curve");return new X(i)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,i;for(;r!=0;){try{const s=t.concat(ut.from([r]));i=this.createProgramAddressSync(s,e)}catch(s){if(s instanceof TypeError)throw s;r--;continue}return[i,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new X(t);return Ou(e.toBytes())}}Qh=X;X.default=new Qh("11111111111111111111111111111111");Bi.set(X,{kind:"struct",fields:[["_bn","u256"]]});class x_{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){const e=vt(t);if(t.length!==64)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=vt(k_()),this._publicKey=vt(Hs(this._secretKey))}get publicKey(){return new X(this._publicKey)}get secretKey(){return ut.concat([this._secretKey,this._publicKey],64)}}const C_=new X("BPFLoader1111111111111111111111111111111111"),lr=1232,uo=127,$i=64;class Tc extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Tc.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Oc extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Oc.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Xr extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Xr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Ki{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((s,o)=>{r.set(s.toBase58(),o)});const i=s=>{const o=r.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const St=(n="publicKey")=>Xt(32,n),B_=(n="signature")=>Xt(64,n),Ar=(n="string")=>{const t=ct([at("length"),at("lengthPadding"),Xt(ur(at(),-8),"chars")],n),e=t.decode.bind(t),r=t.encode.bind(t),i=t;return i.decode=(s,o)=>e(s,o).chars.toString(),i.encode=(s,o,a)=>{const u={chars:ut.from(s,"utf8")};return r(u,o,a)},i.alloc=s=>at().span+at().span+ut.from(s,"utf8").length,i},M_=(n="authorized")=>ct([St("staker"),St("withdrawer")],n),L_=(n="lockup")=>ct([rn("unixTimestamp"),rn("epoch"),St("custodian")],n),P_=(n="voteInit")=>ct([St("nodePubkey"),St("authorizedVoter"),St("authorizedWithdrawer"),xt("commission")],n),U_=(n="voteAuthorizeWithSeedArgs")=>ct([at("voteAuthorizationType"),St("currentAuthorityDerivedKeyOwnerPubkey"),Ar("currentAuthorityDerivedKeySeed"),St("newAuthorized")],n);function ed(n,t){const e=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(t[i.property]);if("count"in i&&"elementLayout"in i){const s=t[i.property];if(Array.isArray(s))return s.length*e(i.elementLayout)}else if("fields"in i)return ed({layout:i},t[i.property]);return 0};let r=0;return n.layout.fields.forEach(i=>{r+=e(i)}),r}function je(n){let t=0,e=0;for(;;){let r=n.shift();if(t|=(r&127)<<e*7,e+=1,!(r&128))break}return t}function sn(n,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){n.push(r);break}else r|=128,n.push(r)}}function Bt(n,t){if(!n)throw new Error(t||"Assertion failed")}class lo{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,i=o=>{const a=o.toBase58();let u=r.get(a);return u===void 0&&(u={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(a,u)),u},s=i(e);s.isSigner=!0,s.isWritable=!0;for(const o of t){i(o.programId).isInvoked=!0;for(const a of o.keys){const u=i(a.pubkey);u.isSigner||(u.isSigner=a.isSigner),u.isWritable||(u.isWritable=a.isWritable)}}return new lo(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];Bt(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,u])=>u.isSigner&&u.isWritable),r=t.filter(([,u])=>u.isSigner&&!u.isWritable),i=t.filter(([,u])=>!u.isSigner&&u.isWritable),s=t.filter(([,u])=>!u.isSigner&&!u.isWritable),o={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:s.length};{Bt(e.length>0,"Expected at least one writable signer key");const[u]=e[0];Bt(u===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...e.map(([u])=>new X(u)),...r.map(([u])=>new X(u)),...i.map(([u])=>new X(u)),...s.map(([u])=>new X(u))];return[o,a]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&i.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:i},{writable:r,readonly:s}]}drainKeysFoundInLookupTable(t,e){const r=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(e(o)){const a=new X(s),u=t.findIndex(h=>h.equals(a));u>=0&&(Bt(u<256,"Max lookup table index exceeded"),r.push(u),i.push(a),this.keyMetaMap.delete(s))}return[r,i]}}const nd="Reached end of buffer unexpectedly";function kn(n){if(n.length===0)throw new Error(nd);return n.shift()}function Ze(n,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>n.length:e>=n.length)throw new Error(nd);return n.splice(...t)}class Rn{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new X(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:ae.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Ki(this.staticAccountKeys)}static compile(t){const e=lo.compile(t.instructions,t.payerKey),[r,i]=e.getMessageComponents(),o=new Ki(i).compileInstructions(t.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:ae.encode(a.data)}));return new Rn({header:r,accountKeys:i,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,s=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<s}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];sn(e,t);const r=this.instructions.map(b=>{const{accounts:R,programIdIndex:_}=b,S=Array.from(ae.decode(b.data));let N=[];sn(N,R.length);let A=[];return sn(A,S.length),{programIdIndex:_,keyIndicesCount:ut.from(N),keyIndices:R,dataLength:ut.from(A),data:S}});let i=[];sn(i,r.length);let s=ut.alloc(lr);ut.from(i).copy(s);let o=i.length;r.forEach(b=>{const _=ct([xt("programIdIndex"),Xt(b.keyIndicesCount.length,"keyIndicesCount"),Ue(xt("keyIndex"),b.keyIndices.length,"keyIndices"),Xt(b.dataLength.length,"dataLength"),Ue(xt("userdatum"),b.data.length,"data")]).encode(b,s,o);o+=_}),s=s.slice(0,o);const a=ct([Xt(1,"numRequiredSignatures"),Xt(1,"numReadonlySignedAccounts"),Xt(1,"numReadonlyUnsignedAccounts"),Xt(e.length,"keyCount"),Ue(St("key"),t,"keys"),St("recentBlockhash")]),u={numRequiredSignatures:ut.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ut.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ut.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ut.from(e),keys:this.accountKeys.map(b=>vt(b.toBytes())),recentBlockhash:ae.decode(this.recentBlockhash)};let h=ut.alloc(2048);const l=a.encode(u,h);return s.copy(h,l),h.slice(0,l+s.length)}static from(t){let e=[...t];const r=kn(e);if(r!==(r&uo))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=kn(e),s=kn(e),o=je(e);let a=[];for(let R=0;R<o;R++){const _=Ze(e,0,xn);a.push(new X(ut.from(_)))}const u=Ze(e,0,xn),h=je(e);let l=[];for(let R=0;R<h;R++){const _=kn(e),S=je(e),N=Ze(e,0,S),A=je(e),C=Ze(e,0,A),D=ae.encode(ut.from(C));l.push({programIdIndex:_,accounts:N,data:D})}const b={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:ae.encode(ut.from(u)),accountKeys:a,instructions:l};return new Rn(b)}}class Br{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Ki(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const i=t-r,s=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return i<s}else if(t>=this.header.numRequiredSignatures){const i=t-e,o=r-e-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=e-this.header.numReadonlySignedAccounts;return t<i}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const i=t.find(s=>s.key.equals(r.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const s of r.writableIndexes)if(s<i.state.addresses.length)e.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`);for(const s of r.readonlyIndexes)if(s<i.state.addresses.length)e.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=lo.compile(t.instructions,t.payerKey),r=new Array,i={writable:new Array,readonly:new Array},s=t.addressLookupTableAccounts||[];for(const l of s){const b=e.extractTableLookup(l);if(b!==void 0){const[R,{writable:_,readonly:S}]=b;r.push(R),i.writable.push(..._),i.readonly.push(...S)}}const[o,a]=e.getMessageComponents(),h=new Ki(a,i).compileInstructions(t.instructions);return new Br({header:o,staticAccountKeys:a,recentBlockhash:t.recentBlockhash,compiledInstructions:h,addressTableLookups:r})}serialize(){const t=Array();sn(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();sn(r,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();sn(s,this.addressTableLookups.length);const o=ct([xt("prefix"),ct([xt("numRequiredSignatures"),xt("numReadonlySignedAccounts"),xt("numReadonlyUnsignedAccounts")],"header"),Xt(t.length,"staticAccountKeysLength"),Ue(St(),this.staticAccountKeys.length,"staticAccountKeys"),St("recentBlockhash"),Xt(r.length,"instructionsLength"),Xt(e.length,"serializedInstructions"),Xt(s.length,"addressTableLookupsLength"),Xt(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(lr),h=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(l=>l.toBytes()),recentBlockhash:ae.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},a);return a.slice(0,h)}serializeInstructions(){let t=0;const e=new Uint8Array(lr);for(const r of this.compiledInstructions){const i=Array();sn(i,r.accountKeyIndexes.length);const s=Array();sn(s,r.data.length);const o=ct([xt("programIdIndex"),Xt(i.length,"encodedAccountKeyIndexesLength"),Ue(xt(),r.accountKeyIndexes.length,"accountKeyIndexes"),Xt(s.length,"encodedDataLength"),Xt(r.data.length,"data")]);t+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(lr);for(const r of this.addressTableLookups){const i=Array();sn(i,r.writableIndexes.length);const s=Array();sn(s,r.readonlyIndexes.length);const o=ct([St("accountKey"),Xt(i.length,"encodedWritableIndexesLength"),Ue(xt(),r.writableIndexes.length,"writableIndexes"),Xt(s.length,"encodedReadonlyIndexesLength"),Ue(xt(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=kn(e),i=r&uo;Bt(r!==i,"Expected versioned message but received legacy message");const s=i;Bt(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:kn(e),numReadonlySignedAccounts:kn(e),numReadonlyUnsignedAccounts:kn(e)},a=[],u=je(e);for(let S=0;S<u;S++)a.push(new X(Ze(e,0,xn)));const h=ae.encode(Ze(e,0,xn)),l=je(e),b=[];for(let S=0;S<l;S++){const N=kn(e),A=je(e),C=Ze(e,0,A),D=je(e),x=new Uint8Array(Ze(e,0,D));b.push({programIdIndex:N,accountKeyIndexes:C,data:x})}const R=je(e),_=[];for(let S=0;S<R;S++){const N=new X(Ze(e,0,xn)),A=je(e),C=Ze(e,0,A),D=je(e),x=Ze(e,0,D);_.push({accountKey:N,writableIndexes:C,readonlyIndexes:x})}return new Br({header:o,staticAccountKeys:a,recentBlockhash:h,compiledInstructions:b,addressTableLookups:_})}}const Nc={deserializeMessageVersion(n){const t=n[0],e=t&uo;return e===t?"legacy":e},deserialize:n=>{const t=Nc.deserializeMessageVersion(n);if(t==="legacy")return Rn.from(n);if(t===0)return Br.deserialize(n);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let Fn=function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n}({});const D_=ut.alloc($i).fill(0);class $t{constructor(t){this.keys=void 0,this.programId=void 0,this.data=ut.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class Ct{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new $t(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let N=0;N<e.length;N++)if(e[N].programId===void 0)throw new Error(`Transaction instruction index ${N} has undefined program id`);const i=[],s=[];e.forEach(N=>{N.keys.forEach(C=>{s.push({...C})});const A=N.programId.toString();i.includes(A)||i.push(A)}),i.forEach(N=>{s.push({pubkey:new X(N),isSigner:!1,isWritable:!1})});const o=[];s.forEach(N=>{const A=N.pubkey.toString(),C=o.findIndex(D=>D.pubkey.toString()===A);C>-1?(o[C].isWritable=o[C].isWritable||N.isWritable,o[C].isSigner=o[C].isSigner||N.isSigner):o.push(N)}),o.sort(function(N,A){if(N.isSigner!==A.isSigner)return N.isSigner?-1:1;if(N.isWritable!==A.isWritable)return N.isWritable?-1:1;const C={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return N.pubkey.toBase58().localeCompare(A.pubkey.toBase58(),"en",C)});const a=o.findIndex(N=>N.pubkey.equals(r));if(a>-1){const[N]=o.splice(a,1);N.isSigner=!0,N.isWritable=!0,o.unshift(N)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const N of this.signatures){const A=o.findIndex(C=>C.pubkey.equals(N.publicKey));if(A>-1)o[A].isSigner||(o[A].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${N.publicKey.toString()}`)}let u=0,h=0,l=0;const b=[],R=[];o.forEach(({pubkey:N,isSigner:A,isWritable:C})=>{A?(b.push(N.toString()),u+=1,C||(h+=1)):(R.push(N.toString()),C||(l+=1))});const _=b.concat(R),S=e.map(N=>{const{data:A,programId:C}=N;return{programIdIndex:_.indexOf(C.toString()),accounts:N.keys.map(D=>_.indexOf(D.pubkey.toString())),data:ae.encode(A)}});return S.forEach(N=>{Bt(N.programIdIndex>=0),N.accounts.forEach(A=>Bt(A>=0))}),new Rn({header:{numRequiredSignatures:u,numReadonlySignedAccounts:h,numReadonlyUnsignedAccounts:l},accountKeys:_,recentBlockhash:t,instructions:S})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((i,s)=>e[s].equals(i.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const i=r.toString();return e.has(i)?!1:(e.add(i),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const s of t){const o=s.publicKey.toString();e.has(o)||(e.add(o),r.push(s))}this.signatures=r.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const s of t){const o=s.publicKey.toString();e.has(o)||(e.add(o),r.push(s))}const i=this._compile();this._partialSign(i,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(i=>{const s=Sc(r,i.secretKey);this._addSignature(i.publicKey,vt(s))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){Bt(e.length===64);const r=this.signatures.findIndex(i=>t.equals(i.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=ut.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const r={};for(const{signature:i,publicKey:s}of this.signatures)i===null?e&&(r.missing||(r.missing=[])).push(s):T_(i,t,s.toBytes())||(r.invalid||(r.invalid=[])).push(s);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),i=this.serializeMessage();if(r){const s=this._getMessageSignednessErrors(i,e);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(t){const{signatures:e}=this,r=[];sn(r,e.length);const i=r.length+e.length*64+t.length,s=ut.alloc(i);return Bt(e.length<256),ut.from(r).copy(s,0),e.forEach(({signature:o},a)=>{o!==null&&(Bt(o.length===64,"signature has invalid length"),ut.from(o).copy(s,r.length+a*64))}),t.copy(s,r.length+e.length*64),Bt(s.length<=lr,`Transaction too large: ${s.length} > ${lr}`),s}get keys(){return Bt(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return Bt(this.instructions.length===1),this.instructions[0].programId}get data(){return Bt(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=je(e);let i=[];for(let s=0;s<r;s++){const o=Ze(e,0,$i);i.push(ae.encode(ut.from(o)))}return Ct.populate(Rn.from(e),i)}static populate(t,e=[]){const r=new Ct;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((i,s)=>{const o={signature:i==ae.encode(D_)?null:ae.decode(i),publicKey:t.accountKeys[s]};r.signatures.push(o)}),t.instructions.forEach(i=>{const s=i.accounts.map(o=>{const a=t.accountKeys[o];return{pubkey:a,isSigner:r.signatures.some(u=>u.publicKey.toString()===a.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});r.instructions.push(new $t({keys:s,programId:t.accountKeys[i.programIdIndex],data:ae.decode(i.data)}))}),r._message=t,r._json=r.toJSON(),r}}class xc{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:r,compiledInstructions:i,recentBlockhash:s}=t,{numRequiredSignatures:o,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:u}=r,h=o-a;Bt(h>0,"Message header is invalid");const l=t.staticAccountKeys.length-o-u;Bt(l>=0,"Message header is invalid");const b=t.getAccountKeys(e),R=b.get(0);if(R===void 0)throw new Error("Failed to decompile message because no account keys were found");const _=[];for(const S of i){const N=[];for(const C of S.accountKeyIndexes){const D=b.get(C);if(D===void 0)throw new Error(`Failed to find key for account key index ${C}`);const x=C<o;let L;x?L=C<h:C<b.staticAccountKeys.length?L=C-o<l:L=C-b.staticAccountKeys.length<b.accountKeysFromLookups.writable.length,N.push({pubkey:D,isSigner:C<r.numRequiredSignatures,isWritable:L})}const A=b.get(S.programIdIndex);if(A===void 0)throw new Error(`Failed to find program id for program id index ${S.programIdIndex}`);_.push(new $t({programId:A,data:vt(S.data),keys:N}))}return new xc({payerKey:R,instructions:_,recentBlockhash:s})}compileToLegacyMessage(){return Rn.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return Br.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class Cc{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)Bt(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const r=[];for(let i=0;i<t.header.numRequiredSignatures;i++)r.push(new Uint8Array($i));this.signatures=r}this.message=t}serialize(){const t=this.message.serialize(),e=Array();sn(e,this.signatures.length);const r=ct([Xt(e.length,"encodedSignaturesLength"),Ue(B_(),this.signatures.length,"signatures"),Xt(t.length,"serializedMessage")]),i=new Uint8Array(2048),s=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},i);return i.slice(0,s)}static deserialize(t){let e=[...t];const r=[],i=je(e);for(let o=0;o<i;o++)r.push(new Uint8Array(Ze(e,0,$i)));const s=Nc.deserialize(new Uint8Array(e));return new Cc(s,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of t){const s=r.findIndex(o=>o.equals(i.publicKey));Bt(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=Sc(e,i.secretKey)}}addSignature(t,e){Bt(e.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(t));Bt(i>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=e}}const z_=160,H_=64,F_=z_/H_,rd=1e3/F_,In=new X("SysvarC1ock11111111111111111111111111111111"),$_=new X("SysvarEpochSchedu1e111111111111111111111111"),K_=new X("Sysvar1nstructions1111111111111111111111111"),Ts=new X("SysvarRecentB1ockHashes11111111111111111111"),li=new X("SysvarRent111111111111111111111111111111111"),q_=new X("SysvarRewards111111111111111111111111111111"),W_=new X("SysvarS1otHashes111111111111111111111111111"),V_=new X("SysvarS1otHistory11111111111111111111111111"),Os=new X("SysvarStakeHistory1111111111111111111111111");class gr extends Error{constructor({action:t,signature:e,transactionMessage:r,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(t){case"send":a=`Transaction ${e} resulted in an error. 
${r}. `+s+o;break;case"simulate":a=`Simulation failed. 
Message: ${r}. 
`+s+o;break;default:a=`Unknown action '${(u=>u)(t)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=r,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,r)=>{t.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,e(s)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}const G_={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class lt extends Error{constructor({code:t,message:e,data:r},i){super(i!=null?`${i}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}async function Ua(n,t,e,r){const i=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},s=await n.sendTransaction(t,e,i);let o;if(t.recentBlockhash!=null&&t.lastValidBlockHeight!=null)o=(await n.confirmTransaction({abortSignal:r==null?void 0:r.abortSignal,signature:s,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},r&&r.commitment)).value;else if(t.minNonceContextSlot!=null&&t.nonceInfo!=null){const{nonceInstruction:a}=t.nonceInfo,u=a.keys[0].pubkey;o=(await n.confirmTransaction({abortSignal:r==null?void 0:r.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:u,nonceValue:t.nonceInfo.nonce,signature:s},r&&r.commitment)).value}else(r==null?void 0:r.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await n.confirmTransaction(s,r&&r.commitment)).value;if(o.err)throw s!=null?new gr({action:"send",signature:s,transactionMessage:`Status: (${JSON.stringify(o)})`}):new Error(`Transaction ${s} failed (${JSON.stringify(o)})`);return s}function Rr(n){return new Promise(t=>setTimeout(t,n))}function Ot(n,t){const e=n.layout.span>=0?n.layout.span:ed(n,t),r=ut.alloc(e),i=Object.assign({instruction:n.index},t);return n.layout.encode(i,r),r}function Ut(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.instruction!==n.index)throw new Error(`invalid instruction; instruction index mismatch ${e.instruction} != ${n.index}`);return e}const id=Me("lamportsPerSignature"),sd=ct([at("version"),at("state"),St("authorizedPubkey"),St("nonce"),ct([id],"feeCalculator")]),Da=sd.span;class ho{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=sd.decode(vt(t),0);return new ho({authorizedPubkey:new X(e.authorizedPubkey),nonce:new X(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const j_=n=>{const t=n.decode.bind(n),e=n.encode.bind(n);return{decode:t,encode:e}},Z_=n=>t=>{const e=Xt(n,t),{encode:r,decode:i}=j_(e),s=e;return s.decode=(o,a)=>{const u=i(o,a);return my(ut.from(u))},s.encode=(o,a,u)=>{const h=Ph(o,n);return r(h,a,u)},s},hi=Z_(8);class Y_{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=at("instruction").decode(t.data);let i;for(const[s,o]of Object.entries(Gt))if(o.index==r){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a SystemInstruction");return i}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e,space:r,programId:i}=Ut(Gt.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:r,programId:new X(i)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e}=Ut(Gt.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e,seed:r,programId:i}=Ut(Gt.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:r,programId:new X(i)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{space:e}=Ut(Gt.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,space:i,programId:s}=Ut(Gt.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new X(e),seed:r,space:i,programId:new X(s)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{programId:e}=Ut(Gt.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new X(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,programId:i}=Ut(Gt.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new X(e),seed:r,programId:new X(i)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{base:e,seed:r,lamports:i,space:s,programId:o}=Ut(Gt.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new X(e),seed:r,lamports:i,space:s,programId:new X(o)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{authorized:e}=Ut(Gt.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new X(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Ut(Gt.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=Ut(Gt.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e}=Ut(Gt.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new X(e)}}static checkProgramId(t){if(!t.equals(Ie.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Gt=Object.freeze({Create:{index:0,layout:ct([at("instruction"),rn("lamports"),rn("space"),St("programId")])},Assign:{index:1,layout:ct([at("instruction"),St("programId")])},Transfer:{index:2,layout:ct([at("instruction"),hi("lamports")])},CreateWithSeed:{index:3,layout:ct([at("instruction"),St("base"),Ar("seed"),rn("lamports"),rn("space"),St("programId")])},AdvanceNonceAccount:{index:4,layout:ct([at("instruction")])},WithdrawNonceAccount:{index:5,layout:ct([at("instruction"),rn("lamports")])},InitializeNonceAccount:{index:6,layout:ct([at("instruction"),St("authorized")])},AuthorizeNonceAccount:{index:7,layout:ct([at("instruction"),St("authorized")])},Allocate:{index:8,layout:ct([at("instruction"),rn("space")])},AllocateWithSeed:{index:9,layout:ct([at("instruction"),St("base"),Ar("seed"),rn("space"),St("programId")])},AssignWithSeed:{index:10,layout:ct([at("instruction"),St("base"),Ar("seed"),St("programId")])},TransferWithSeed:{index:11,layout:ct([at("instruction"),hi("lamports"),Ar("seed"),St("programId")])},UpgradeNonceAccount:{index:12,layout:ct([at("instruction")])}});class Ie{constructor(){}static createAccount(t){const e=Gt.Create,r=Ot(e,{lamports:t.lamports,space:t.space,programId:vt(t.programId.toBuffer())});return new $t({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){const i=Gt.TransferWithSeed;e=Ot(i,{lamports:BigInt(t.lamports),seed:t.seed,programId:vt(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=Gt.Transfer;e=Ot(i,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new $t({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){const i=Gt.AssignWithSeed;e=Ot(i,{base:vt(t.basePubkey.toBuffer()),seed:t.seed,programId:vt(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Gt.Assign;e=Ot(i,{programId:vt(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new $t({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=Gt.CreateWithSeed,r=Ot(e,{base:vt(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:vt(t.programId.toBuffer())});let i=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||i.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new $t({keys:i,programId:this.programId,data:r})}static createNonceAccount(t){const e=new Ct;"basePubkey"in t&&"seed"in t?e.add(Ie.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Da,programId:this.programId})):e.add(Ie.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Da,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=Gt.InitializeNonceAccount,r=Ot(e,{authorized:vt(t.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Ts,isSigner:!1,isWritable:!1},{pubkey:li,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new $t(i)}static nonceAdvance(t){const e=Gt.AdvanceNonceAccount,r=Ot(e),i={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Ts,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new $t(i)}static nonceWithdraw(t){const e=Gt.WithdrawNonceAccount,r=Ot(e,{lamports:t.lamports});return new $t({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Ts,isSigner:!1,isWritable:!1},{pubkey:li,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){const e=Gt.AuthorizeNonceAccount,r=Ot(e,{authorized:vt(t.newAuthorizedPubkey.toBuffer())});return new $t({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){const i=Gt.AllocateWithSeed;e=Ot(i,{base:vt(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:vt(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Gt.Allocate;e=Ot(i,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new $t({keys:r,programId:this.programId,data:e})}}Ie.programId=new X("11111111111111111111111111111111");const X_=lr-300;class Mr{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/Mr.chunkSize)+1+1)}static async load(t,e,r,i,s){{const b=await t.getMinimumBalanceForRentExemption(s.length),R=await t.getAccountInfo(r.publicKey,"confirmed");let _=null;if(R!==null){if(R.executable)return console.error("Program load failed, account is already executable"),!1;R.data.length!==s.length&&(_=_||new Ct,_.add(Ie.allocate({accountPubkey:r.publicKey,space:s.length}))),R.owner.equals(i)||(_=_||new Ct,_.add(Ie.assign({accountPubkey:r.publicKey,programId:i}))),R.lamports<b&&(_=_||new Ct,_.add(Ie.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:b-R.lamports})))}else _=new Ct().add(Ie.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:b>0?b:1,space:s.length,programId:i}));_!==null&&await Ua(t,_,[e,r],{commitment:"confirmed"})}const o=ct([at("instruction"),at("offset"),at("bytesLength"),at("bytesLengthPadding"),Ue(xt("byte"),ur(at(),-8),"bytes")]),a=Mr.chunkSize;let u=0,h=s,l=[];for(;h.length>0;){const b=h.slice(0,a),R=ut.alloc(a+16);o.encode({instruction:0,offset:u,bytes:b,bytesLength:0,bytesLengthPadding:0},R);const _=new Ct().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:R});l.push(Ua(t,_,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&await Rr(1e3/4),u+=a,h=h.slice(a)}await Promise.all(l);{const b=ct([at("instruction")]),R=ut.alloc(b.span);b.encode({instruction:1},R);const _=new Ct().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:li,isSigner:!1,isWritable:!1}],programId:i,data:R}),S="processed",N=await t.sendTransaction(_,[e,r],{preflightCommitment:S}),{context:A,value:C}=await t.confirmTransaction({signature:N,lastValidBlockHeight:_.lastValidBlockHeight,blockhash:_.recentBlockhash},S);if(C.err)throw new Error(`Transaction ${N} failed (${JSON.stringify(C)})`);for(;;){try{if(await t.getSlot({commitment:S})>A.slot)break}catch{}await new Promise(D=>setTimeout(D,Math.round(rd/2)))}}return!0}}Mr.chunkSize=X_;const J_=new X("BPFLoader2111111111111111111111111111111111");class Q_{static getMinNumSignatures(t){return Mr.getMinNumSignatures(t)}static load(t,e,r,i,s){return Mr.load(t,e,r,s,i)}}function tw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var oa,xu;function ew(){if(xu)return oa;xu=1;var n=Object.prototype.toString,t=Object.keys||function(r){var i=[];for(var s in r)i.push(s);return i};function e(r,i){var s,o,a,u,h,l,b;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return e(r.toJSON(),i);if(b=n.call(r),b==="[object Array]"){for(a="[",o=r.length-1,s=0;s<o;s++)a+=e(r[s],!0)+",";return o>-1&&(a+=e(r[s],!0)),a+"]"}else if(b==="[object Object]"){for(u=t(r).sort(),o=u.length,a="",s=0;s<o;)h=u[s],l=e(r[h],!1),l!==void 0&&(a&&(a+=","),a+=JSON.stringify(h)+":"+l),s++;return"{"+a+"}"}else return JSON.stringify(r);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return oa=function(r){var i=e(r,!1);if(i!==void 0)return""+i},oa}var nw=ew(),Cu=tw(nw);const Ti=32;function aa(n){let t=0;for(;n>1;)n/=2,t++;return t}function rw(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class od{constructor(t,e,r,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=aa(rw(t+Ti+1))-aa(Ti)-1,r=this.getSlotsInEpoch(e),i=t-(r-Ti);return[e,i]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),i=this.firstNormalEpoch+r,s=e%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Ti:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+aa(Ti)):this.slotsPerEpoch}}var iw=globalThis.fetch;class sw extends o_{constructor(t,e,r){const i=s=>{const o=i_(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,t,e,r),this.underlyingSocket=void 0}call(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function ow(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${n.index}`);return e}const Bu=56;class za{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=ow(aw,t),r=t.length-Bu;Bt(r>=0,"lookup table is invalid"),Bt(r%32===0,"lookup table is invalid");const i=r/32,{addresses:s}=ct([Ue(St(),i,"addresses")]).decode(t.slice(Bu));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new X(e.authority[0]):void 0,addresses:s.map(o=>new X(o))}}}const aw={index:1,layout:ct([at("typeIndex"),hi("deactivationSlot"),Me("lastExtendedSlot"),xt("lastExtendedStartIndex"),xt(),Ue(St(),ur(xt(),-1),"authority")])},cw=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function uw(n){const t=n.match(cw);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[e,r,i,s]=t,o=n.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),u=a==null?"":`:${a+1}`;return`${o}//${r}${u}${s}`}const ie=ss(Ac(X),Q(),n=>new X(n)),ad=vc([Q(),ne("base64")]),Bc=ss(Ac(ut),ad,n=>ut.from(n[0],"base64")),cd=30*1e3;function lw(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function Vt(n){let t,e;if(typeof n=="string")t=n;else if(n){const{commitment:r,...i}=n;t=r,e=i}return{commitment:t,config:e}}function Mu(n){return n.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function ud(n){return Ve([Z({jsonrpc:ne("2.0"),id:Q(),result:n}),Z({jsonrpc:ne("2.0"),id:Q(),error:Z({code:bi(),message:Q(),data:ht(Ty())})})])}const hw=ud(bi());function At(n){return ss(ud(n),hw,t=>"error"in t?t:{...t,result:et(t.result,n)})}function ce(n){return At(Z({context:Z({slot:U()}),value:n}))}function fo(n){return Z({context:Z({slot:U()}),value:n})}function ca(n,t){return n===0?new Br({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new X(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:ae.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new Rn(t)}const dw=Z({foundation:U(),foundationTerm:U(),initial:U(),taper:U(),terminal:U()}),fw=At(rt(st(Z({epoch:U(),effectiveSlot:U(),amount:U(),postBalance:U(),commission:ht(st(U()))})))),pw=rt(Z({slot:U(),prioritizationFee:U()})),gw=Z({total:U(),validator:U(),foundation:U(),epoch:U()}),yw=Z({epoch:U(),slotIndex:U(),slotsInEpoch:U(),absoluteSlot:U(),blockHeight:ht(U()),transactionCount:ht(U())}),_w=Z({slotsPerEpoch:U(),leaderScheduleSlotOffset:U(),warmup:Mn(),firstNormalEpoch:U(),firstNormalSlot:U()}),ww=zh(Q(),rt(U())),zr=st(Ve([Z({}),Q()])),mw=Z({err:zr}),bw=ne("receivedSignature"),Ew=Z({"solana-core":Q(),"feature-set":ht(U())}),Rw=Z({program:Q(),programId:ie,parsed:bi()}),Aw=Z({programId:ie,accounts:rt(ie),data:Q()}),Lu=ce(Z({err:st(Ve([Z({}),Q()])),logs:st(rt(Q())),accounts:ht(st(rt(st(Z({executable:Mn(),owner:Q(),lamports:U(),data:rt(Q()),rentEpoch:ht(U())}))))),unitsConsumed:ht(U()),returnData:ht(st(Z({programId:Q(),data:vc([Q(),ne("base64")])}))),innerInstructions:ht(st(rt(Z({index:U(),instructions:rt(Ve([Rw,Aw]))}))))})),vw=ce(Z({byIdentity:zh(Q(),rt(U())),range:Z({firstSlot:U(),lastSlot:U()})}));function Iw(n,t,e,r,i,s){const o=e||iw;let a;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let u;return r&&(u=async(l,b)=>{const R=await new Promise((_,S)=>{try{r(l,b,(N,A)=>_([N,A]))}catch(N){S(N)}});return await o(...R)}),new e_(async(l,b)=>{const R={method:"POST",body:l,agent:a,headers:Object.assign({"Content-Type":"application/json"},t||{},Im)};try{let _=5,S,N=500;for(;u?S=await u(n,R):S=await o(n,R),!(S.status!==429||i===!0||(_-=1,_===0));)console.error(`Server responded with ${S.status} ${S.statusText}.  Retrying after ${N}ms delay...`),await Rr(N),N*=2;const A=await S.text();S.ok?b(null,A):b(new Error(`${S.status} ${S.statusText}: ${A}`))}catch(_){_ instanceof Error&&b(_)}},{})}function Sw(n){return(t,e)=>new Promise((r,i)=>{n.request(t,e,(s,o)=>{if(s){i(s);return}r(o)})})}function kw(n){return t=>new Promise((e,r)=>{t.length===0&&e([]);const i=t.map(s=>n.request(s.methodName,s.args));n.request(i,(s,o)=>{if(s){r(s);return}e(o)})})}const Tw=At(dw),Ow=At(gw),Nw=At(pw),xw=At(yw),Cw=At(_w),Bw=At(ww),Mw=At(U()),Lw=ce(Z({total:U(),circulating:U(),nonCirculating:U(),nonCirculatingAccounts:rt(ie)})),Ha=Z({amount:Q(),uiAmount:st(U()),decimals:U(),uiAmountString:ht(Q())}),Pw=ce(rt(Z({address:ie,amount:Q(),uiAmount:st(U()),decimals:U(),uiAmountString:ht(Q())}))),Uw=ce(rt(Z({pubkey:ie,account:Z({executable:Mn(),owner:ie,lamports:U(),data:Bc,rentEpoch:U()})}))),Fa=Z({program:Q(),parsed:bi(),space:U()}),Dw=ce(rt(Z({pubkey:ie,account:Z({executable:Mn(),owner:ie,lamports:U(),data:Fa,rentEpoch:U()})}))),zw=ce(rt(Z({lamports:U(),address:ie}))),qi=Z({executable:Mn(),owner:ie,lamports:U(),data:Bc,rentEpoch:U()}),Hw=Z({pubkey:ie,account:qi}),Fw=ss(Ve([Ac(ut),Fa]),Ve([ad,Fa]),n=>Array.isArray(n)?et(n,Bc):n),$a=Z({executable:Mn(),owner:ie,lamports:U(),data:Fw,rentEpoch:U()}),$w=Z({pubkey:ie,account:$a}),Kw=Z({state:Ve([ne("active"),ne("inactive"),ne("activating"),ne("deactivating")]),active:U(),inactive:U()}),qw=At(rt(Z({signature:Q(),slot:U(),err:zr,memo:st(Q()),blockTime:ht(st(U()))}))),Ww=At(rt(Z({signature:Q(),slot:U(),err:zr,memo:st(Q()),blockTime:ht(st(U()))}))),Vw=Z({subscription:U(),result:fo(qi)}),Gw=Z({pubkey:ie,account:qi}),jw=Z({subscription:U(),result:fo(Gw)}),Zw=Z({parent:U(),slot:U(),root:U()}),Yw=Z({subscription:U(),result:Zw}),Xw=Ve([Z({type:Ve([ne("firstShredReceived"),ne("completed"),ne("optimisticConfirmation"),ne("root")]),slot:U(),timestamp:U()}),Z({type:ne("createdBank"),parent:U(),slot:U(),timestamp:U()}),Z({type:ne("frozen"),slot:U(),timestamp:U(),stats:Z({numTransactionEntries:U(),numSuccessfulTransactions:U(),numFailedTransactions:U(),maxTransactionsPerEntry:U()})}),Z({type:ne("dead"),slot:U(),timestamp:U(),err:Q()})]),Jw=Z({subscription:U(),result:Xw}),Qw=Z({subscription:U(),result:fo(Ve([mw,bw]))}),tm=Z({subscription:U(),result:U()}),em=Z({pubkey:Q(),gossip:st(Q()),tpu:st(Q()),rpc:st(Q()),version:st(Q())}),Pu=Z({votePubkey:Q(),nodePubkey:Q(),activatedStake:U(),epochVoteAccount:Mn(),epochCredits:rt(vc([U(),U(),U()])),commission:U(),lastVote:U(),rootSlot:st(U())}),nm=At(Z({current:rt(Pu),delinquent:rt(Pu)})),rm=Ve([ne("processed"),ne("confirmed"),ne("finalized")]),im=Z({slot:U(),confirmations:st(U()),err:zr,confirmationStatus:ht(rm)}),sm=ce(rt(st(im))),om=At(U()),ld=Z({accountKey:ie,writableIndexes:rt(U()),readonlyIndexes:rt(U())}),Mc=Z({signatures:rt(Q()),message:Z({accountKeys:rt(Q()),header:Z({numRequiredSignatures:U(),numReadonlySignedAccounts:U(),numReadonlyUnsignedAccounts:U()}),instructions:rt(Z({accounts:rt(U()),data:Q(),programIdIndex:U()})),recentBlockhash:Q(),addressTableLookups:ht(rt(ld))})}),hd=Z({pubkey:ie,signer:Mn(),writable:Mn(),source:ht(Ve([ne("transaction"),ne("lookupTable")]))}),dd=Z({accountKeys:rt(hd),signatures:rt(Q())}),fd=Z({parsed:bi(),program:Q(),programId:ie}),pd=Z({accounts:rt(ie),data:Q(),programId:ie}),am=Ve([pd,fd]),cm=Ve([Z({parsed:bi(),program:Q(),programId:Q()}),Z({accounts:rt(Q()),data:Q(),programId:Q()})]),gd=ss(am,cm,n=>"accounts"in n?et(n,pd):et(n,fd)),yd=Z({signatures:rt(Q()),message:Z({accountKeys:rt(hd),instructions:rt(gd),recentBlockhash:Q(),addressTableLookups:ht(st(rt(ld)))})}),Fs=Z({accountIndex:U(),mint:Q(),owner:ht(Q()),programId:ht(Q()),uiTokenAmount:Ha}),_d=Z({writable:rt(ie),readonly:rt(ie)}),po=Z({err:zr,fee:U(),innerInstructions:ht(st(rt(Z({index:U(),instructions:rt(Z({accounts:rt(U()),data:Q(),programIdIndex:U()}))})))),preBalances:rt(U()),postBalances:rt(U()),logMessages:ht(st(rt(Q()))),preTokenBalances:ht(st(rt(Fs))),postTokenBalances:ht(st(rt(Fs))),loadedAddresses:ht(_d),computeUnitsConsumed:ht(U())}),Lc=Z({err:zr,fee:U(),innerInstructions:ht(st(rt(Z({index:U(),instructions:rt(gd)})))),preBalances:rt(U()),postBalances:rt(U()),logMessages:ht(st(rt(Q()))),preTokenBalances:ht(st(rt(Fs))),postTokenBalances:ht(st(rt(Fs))),loadedAddresses:ht(_d),computeUnitsConsumed:ht(U())}),Ei=Ve([ne(0),ne("legacy")]),Hr=Z({pubkey:Q(),lamports:U(),postBalance:st(U()),rewardType:st(Q()),commission:ht(st(U()))}),um=At(st(Z({blockhash:Q(),previousBlockhash:Q(),parentSlot:U(),transactions:rt(Z({transaction:Mc,meta:st(po),version:ht(Ei)})),rewards:ht(rt(Hr)),blockTime:st(U()),blockHeight:st(U())}))),lm=At(st(Z({blockhash:Q(),previousBlockhash:Q(),parentSlot:U(),rewards:ht(rt(Hr)),blockTime:st(U()),blockHeight:st(U())}))),hm=At(st(Z({blockhash:Q(),previousBlockhash:Q(),parentSlot:U(),transactions:rt(Z({transaction:dd,meta:st(po),version:ht(Ei)})),rewards:ht(rt(Hr)),blockTime:st(U()),blockHeight:st(U())}))),dm=At(st(Z({blockhash:Q(),previousBlockhash:Q(),parentSlot:U(),transactions:rt(Z({transaction:yd,meta:st(Lc),version:ht(Ei)})),rewards:ht(rt(Hr)),blockTime:st(U()),blockHeight:st(U())}))),fm=At(st(Z({blockhash:Q(),previousBlockhash:Q(),parentSlot:U(),transactions:rt(Z({transaction:dd,meta:st(Lc),version:ht(Ei)})),rewards:ht(rt(Hr)),blockTime:st(U()),blockHeight:st(U())}))),pm=At(st(Z({blockhash:Q(),previousBlockhash:Q(),parentSlot:U(),rewards:ht(rt(Hr)),blockTime:st(U()),blockHeight:st(U())}))),gm=At(st(Z({blockhash:Q(),previousBlockhash:Q(),parentSlot:U(),transactions:rt(Z({transaction:Mc,meta:st(po)})),rewards:ht(rt(Hr)),blockTime:st(U())}))),Uu=At(st(Z({blockhash:Q(),previousBlockhash:Q(),parentSlot:U(),signatures:rt(Q()),blockTime:st(U())}))),ua=At(st(Z({slot:U(),meta:st(po),blockTime:ht(st(U())),transaction:Mc,version:ht(Ei)}))),bs=At(st(Z({slot:U(),transaction:yd,meta:st(Lc),blockTime:ht(st(U())),version:ht(Ei)}))),ym=ce(Z({blockhash:Q(),lastValidBlockHeight:U()})),_m=ce(Mn()),wm=Z({slot:U(),numTransactions:U(),numSlots:U(),samplePeriodSecs:U()}),mm=At(rt(wm)),bm=ce(st(Z({feeCalculator:Z({lamportsPerSignature:U()})}))),Em=At(Q()),Rm=At(Q()),Am=Z({err:zr,logs:rt(Q()),signature:Q()}),vm=Z({result:fo(Am),subscription:U()}),Im={"solana-client":"js/1.0.0-maintenance"};class Sm{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const h={};return async l=>{const{commitment:b,config:R}=Vt(l),_=this._buildArgs([],b,void 0,R),S=Cu(_);return h[S]=h[S]??(async()=>{try{const N=await this._rpcRequest("getBlockHeight",_),A=et(N,At(U()));if("error"in A)throw new lt(A.error,"failed to get block height information");return A.result}finally{delete h[S]}})(),await h[S]}})();let r,i,s,o,a,u;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,i=e.httpHeaders,s=e.fetch,o=e.fetchMiddleware,a=e.disableRetryOnRateLimit,u=e.httpAgent),this._rpcEndpoint=lw(t),this._rpcWsEndpoint=r||uw(t),this._rpcClient=Iw(t,i,s,o,a,u),this._rpcRequest=Sw(this._rpcClient),this._rpcBatchRequest=kw(this._rpcClient),this._rpcWebSocket=new sw(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:i}=Vt(e),s=this._buildArgs([t.toBase58()],r,void 0,i),o=await this._rpcRequest("getBalance",s),a=et(o,ce(U()));if("error"in a)throw new lt(a.error,`failed to get balance for ${t.toBase58()}`);return a.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=et(e,At(st(U())));if("error"in r)throw new lt(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=et(t,At(U()));if("error"in e)throw new lt(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=et(t,Mw);if("error"in e)throw new lt(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),i=et(r,Lw);if("error"in i)throw new lt(i.error,"failed to get supply");return i.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),i=await this._rpcRequest("getTokenSupply",r),s=et(i,ce(Ha));if("error"in s)throw new lt(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),i=await this._rpcRequest("getTokenAccountBalance",r),s=et(i,ce(Ha));if("error"in s)throw new lt(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(t,e,r){const{commitment:i,config:s}=Vt(r);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const a=this._buildArgs(o,i,"base64",s),u=await this._rpcRequest("getTokenAccountsByOwner",a),h=et(u,Uw);if("error"in h)throw new lt(h.error,`failed to get token accounts owned by account ${t.toBase58()}`);return h.result}async getParsedTokenAccountsByOwner(t,e,r){let i=[t.toBase58()];"mint"in e?i.push({mint:e.mint.toBase58()}):i.push({programId:e.programId.toBase58()});const s=this._buildArgs(i,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),a=et(o,Dw);if("error"in a)throw new lt(a.error,`failed to get token accounts owned by account ${t.toBase58()}`);return a.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],i=await this._rpcRequest("getLargestAccounts",r),s=et(i,zw);if("error"in s)throw new lt(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),i=await this._rpcRequest("getTokenLargestAccounts",r),s=et(i,Pw);if("error"in s)throw new lt(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:i}=Vt(e),s=this._buildArgs([t.toBase58()],r,"base64",i),o=await this._rpcRequest("getAccountInfo",s),a=et(o,ce(st(qi)));if("error"in a)throw new lt(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getParsedAccountInfo(t,e){const{commitment:r,config:i}=Vt(e),s=this._buildArgs([t.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),a=et(o,ce(st($a)));if("error"in a)throw new lt(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:i}=Vt(e),s=t.map(h=>h.toBase58()),o=this._buildArgs([s],r,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",o),u=et(a,ce(rt(st($a))));if("error"in u)throw new lt(u.error,`failed to get info for accounts ${s}`);return u.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:i}=Vt(e),s=t.map(h=>h.toBase58()),o=this._buildArgs([s],r,"base64",i),a=await this._rpcRequest("getMultipleAccounts",o),u=et(a,ce(rt(st(qi))));if("error"in u)throw new lt(u.error,`failed to get info for accounts ${s}`);return u.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:i,config:s}=Vt(e),o=this._buildArgs([t.toBase58()],i,void 0,{...s,epoch:r??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getStakeActivation",o),u=et(a,At(Kw));if("error"in u)throw new lt(u.error,`failed to get Stake Activation ${t.toBase58()}`);return u.result}async getProgramAccounts(t,e){const{commitment:r,config:i}=Vt(e),{encoding:s,...o}=i||{},a=this._buildArgs([t.toBase58()],r,s||"base64",{...o,...o.filters?{filters:Mu(o.filters)}:null}),u=await this._rpcRequest("getProgramAccounts",a),h=rt(Hw),l=o.withContext===!0?et(u,ce(h)):et(u,At(h));if("error"in l)throw new lt(l.error,`failed to get accounts owned by program ${t.toBase58()}`);return l.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:i}=Vt(e),s=this._buildArgs([t.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),a=et(o,At(rt($w)));if("error"in a)throw new lt(a.error,`failed to get accounts owned by program ${t.toBase58()}`);return a.result}async confirmTransaction(t,e){var s;let r;if(typeof t=="string")r=t;else{const o=t;if((s=o.abortSignal)!=null&&s.aborted)return Promise.reject(o.abortSignal.reason);r=o.signature}let i;try{i=ae.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Bt(i.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,i,s=!1;const o=new Promise((u,h)=>{try{r=this.onSignature(e,(b,R)=>{r=void 0;const _={context:R,value:b};u({__type:Fn.PROCESSED,response:_})},t);const l=new Promise(b=>{r==null?b():i=this._onSubscriptionStateChange(r,R=>{R==="subscribed"&&b()})});(async()=>{if(await l,s)return;const b=await this.getSignatureStatus(e);if(s||b==null)return;const{context:R,value:_}=b;if(_!=null)if(_!=null&&_.err)h(_.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(_.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(_.confirmationStatus==="processed"||_.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,u({__type:Fn.PROCESSED,response:{context:R,value:_}})}})()}catch(l){h(l)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:i}}){let s=!1;const o=new Promise(b=>{const R=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let _=await R();if(!s){for(;_<=r;)if(await Rr(1e3),s||(_=await R(),s))return;b({__type:Fn.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:t,signature:i}),h=this.getCancellationPromise(e);let l;try{const b=await Promise.race([h,u,o]);if(b.__type===Fn.PROCESSED)l=b.response;else throw new Tc(i)}finally{s=!0,a()}return l}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let a=!1;const u=new Promise(_=>{let S=s,N=null;const A=async()=>{try{const{context:C,value:D}=await this.getNonceAndContext(i,{commitment:t,minContextSlot:r});return N=C.slot,D==null?void 0:D.nonce}catch{return S}};(async()=>{if(S=await A(),!a)for(;;){if(s!==S){_({__type:Fn.NONCE_INVALID,slotInWhichNonceDidAdvance:N});return}if(await Rr(2e3),a||(S=await A(),a))return}})()}),{abortConfirmation:h,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),b=this.getCancellationPromise(e);let R;try{const _=await Promise.race([b,l,u]);if(_.__type===Fn.PROCESSED)R=_.response;else{let S;for(;;){const N=await this.getSignatureStatus(o);if(N==null)break;if(N.context.slot<(_.slotInWhichNonceDidAdvance??r)){await Rr(400);continue}S=N;break}if(S!=null&&S.value){const N=t||"finalized",{confirmationStatus:A}=S.value;switch(N){case"processed":case"recent":if(A!=="processed"&&A!=="confirmed"&&A!=="finalized")throw new Xr(o);break;case"confirmed":case"single":case"singleGossip":if(A!=="confirmed"&&A!=="finalized")throw new Xr(o);break;case"finalized":case"max":case"root":if(A!=="finalized")throw new Xr(o);break;default:}R={context:S.context,value:{err:S.value.err}}}else throw new Xr(o)}}finally{a=!0,h()}return R}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const i=new Promise(u=>{let h=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{h=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>u({__type:Fn.TIMED_OUT,timeoutMs:h}),h)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let a;try{const u=await Promise.race([o,i]);if(u.__type===Fn.PROCESSED)a=u.response;else throw new Oc(e,u.timeoutMs/1e3)}finally{clearTimeout(r),s()}return a}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=et(t,At(rt(em)));if("error"in e)throw new lt(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),i=et(r,nm);if("error"in i)throw new lt(i.error,"failed to get vote accounts");return i.result}async getSlot(t){const{commitment:e,config:r}=Vt(t),i=this._buildArgs([],e,void 0,r),s=await this._rpcRequest("getSlot",i),o=et(s,At(U()));if("error"in o)throw new lt(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:r}=Vt(t),i=this._buildArgs([],e,void 0,r),s=await this._rpcRequest("getSlotLeader",i),o=et(s,At(Q()));if("error"in o)throw new lt(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const r=[t,e],i=await this._rpcRequest("getSlotLeaders",r),s=et(i,At(rt(ie)));if("error"in s)throw new lt(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(t,e){const{context:r,value:i}=await this.getSignatureStatuses([t],e);Bt(i.length===1);const s=i[0];return{context:r,value:s}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const i=await this._rpcRequest("getSignatureStatuses",r),s=et(i,sm);if("error"in s)throw new lt(s.error,"failed to get signature status");return s.result}async getTransactionCount(t){const{commitment:e,config:r}=Vt(t),i=this._buildArgs([],e,void 0,r),s=await this._rpcRequest("getTransactionCount",i),o=et(s,At(U()));if("error"in o)throw new lt(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),i=et(r,Tw);if("error"in i)throw new lt(i.error,"failed to get inflation");return i.result}async getInflationReward(t,e,r){const{commitment:i,config:s}=Vt(r),o=this._buildArgs([t.map(h=>h.toBase58())],i,void 0,{...s,epoch:e??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getInflationReward",o),u=et(a,fw);if("error"in u)throw new lt(u.error,"failed to get inflation reward");return u.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=et(t,Ow);if("error"in e)throw new lt(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=Vt(t),i=this._buildArgs([],e,void 0,r),s=await this._rpcRequest("getEpochInfo",i),o=et(s,xw);if("error"in o)throw new lt(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=et(t,Cw);if("error"in e)throw new lt(e.error,"failed to get epoch schedule");const r=e.result;return new od(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=et(t,Bw);if("error"in e)throw new lt(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),i=await this._rpcRequest("getMinimumBalanceForRentExemption",r),s=et(i,om);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=et(e,mm);if("error"in r)throw new lt(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),i=await this._rpcRequest("getFeeCalculatorForBlockhash",r),s=et(i,bm);if("error"in s)throw new lt(s.error,"failed to get fee calculator");const{context:o,value:a}=s.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(t,e){const r=vt(t.serialize()).toString("base64"),i=this._buildArgs([r],e),s=await this._rpcRequest("getFeeForMessage",i),o=et(s,ce(st(U())));if("error"in o)throw new lt(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){var o;const e=(o=t==null?void 0:t.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),r=e!=null&&e.length?[e]:[],i=await this._rpcRequest("getRecentPrioritizationFees",r),s=et(i,Nw);if("error"in s)throw new lt(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=Vt(t),i=this._buildArgs([],e,void 0,r),s=await this._rpcRequest("getLatestBlockhash",i),o=et(s,ym);if("error"in o)throw new lt(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:r,config:i}=Vt(e),s=this._buildArgs([t],r,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),a=et(o,_m);if("error"in a)throw new lt(a.error,"failed to determine if the blockhash `"+t+"`is valid");return a.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=et(t,At(Ew));if("error"in e)throw new lt(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=et(t,At(Q()));if("error"in e)throw new lt(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:i}=Vt(e),s=this._buildArgsAtLeastConfirmed([t],r,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=et(o,hm);if("error"in a)throw a.error;return a.result}case"none":{const a=et(o,lm);if("error"in a)throw a.error;return a.result}default:{const a=et(o,um);if("error"in a)throw a.error;const{result:u}=a;return u?{...u,transactions:u.transactions.map(({transaction:h,meta:l,version:b})=>({meta:l,transaction:{...h,message:ca(b,h.message)},version:b}))}:null}}}catch(a){throw new lt(a,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:i}=Vt(e),s=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=et(o,fm);if("error"in a)throw a.error;return a.result}case"none":{const a=et(o,pm);if("error"in a)throw a.error;return a.result}default:{const a=et(o,dm);if("error"in a)throw a.error;return a.result}}}catch(a){throw new lt(a,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:a,...u}=t;r=a,e=u}const i=this._buildArgs([],r,"base64",e),s=await this._rpcRequest("getBlockProduction",i),o=et(s,vw);if("error"in o)throw new lt(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:r,config:i}=Vt(e),s=this._buildArgsAtLeastConfirmed([t],r,void 0,i),o=await this._rpcRequest("getTransaction",s),a=et(o,ua);if("error"in a)throw new lt(a.error,"failed to get transaction");const u=a.result;return u&&{...u,transaction:{...u.transaction,message:ca(u.version,u.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:i}=Vt(e),s=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),a=et(o,bs);if("error"in a)throw new lt(a.error,"failed to get transaction");return a.result}async getParsedTransactions(t,e){const{commitment:r,config:i}=Vt(e),s=t.map(u=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([u],r,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(u=>{const h=et(u,bs);if("error"in h)throw new lt(h.error,"failed to get transactions");return h.result})}async getTransactions(t,e){const{commitment:r,config:i}=Vt(e),s=t.map(u=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([u],r,void 0,i)}));return(await this._rpcBatchRequest(s)).map(u=>{const h=et(u,ua);if("error"in h)throw new lt(h.error,"failed to get transactions");const l=h.result;return l&&{...l,transaction:{...l.transaction,message:ca(l.version,l.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),i=await this._rpcRequest("getBlock",r),s=et(i,gm);if("error"in s)throw new lt(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+t+" not found");const a={...o,transactions:o.transactions.map(({transaction:u,meta:h})=>{const l=new Rn(u.message);return{meta:h,transaction:{...u,message:l}}})};return{...a,transactions:a.transactions.map(({transaction:u,meta:h})=>({meta:h,transaction:Ct.populate(u.message,u.signatures)}))}}async getBlocks(t,e,r){const i=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),s=await this._rpcRequest("getBlocks",i),o=et(s,At(rt(U())));if("error"in o)throw new lt(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=et(i,Uu);if("error"in s)throw new lt(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=et(i,Uu);if("error"in s)throw new lt(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),i=await this._rpcRequest("getTransaction",r),s=et(i,ua);if("error"in s)throw new lt(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const a=new Rn(o.transaction.message),u=o.transaction.signatures;return{...o,transaction:Ct.populate(a,u)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),i=await this._rpcRequest("getTransaction",r),s=et(i,bs);if("error"in s)throw new lt(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(t,e){const r=t.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const a=et(o,bs);if("error"in a)throw new lt(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(t,e,r){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(e--,!(e<=0||e<s));)try{const u=await this.getConfirmedBlockSignatures(e,"finalized");u.signatures.length>0&&(i.until=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}let o=await this.getSlot("finalized");for(;!("before"in i)&&(r++,!(r>o));)try{const u=await this.getConfirmedBlockSignatures(r);u.signatures.length>0&&(i.before=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}return(await this.getConfirmedSignaturesForAddress2(t,i)).map(u=>u.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const i=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=et(s,qw);if("error"in o)throw new lt(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,r){const i=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),s=await this._rpcRequest("getSignaturesForAddress",i),o=et(s,Ww);if("error"in o)throw new lt(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:r,value:i}=await this.getAccountInfoAndContext(t,e);let s=null;return i!==null&&(s=new za({key:t,state:za.deserialize(i.data)})),{context:r,value:s}}async getNonceAndContext(t,e){const{context:r,value:i}=await this.getAccountInfoAndContext(t,e);let s=null;return i!==null&&(s=ho.fromAccountData(i.data)),{context:r,value:s}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),i=et(r,Em);if("error"in i)throw new lt(i.error,`airdrop to ${t.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await Rr(100);const r=Date.now()-this._blockhashInfo.lastFetch>=cd;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(r!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await Rr(rd/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=Vt(t),i=this._buildArgs([],e,"base64",r),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=et(s,ce(U()));if("error"in o)throw new lt(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,r){if("message"in t){const N=t.serialize(),A=ut.from(N).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const C=e||{};C.encoding="base64","commitment"in C||(C.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(C.innerInstructions=e.innerInstructions);const D=[A,C],x=await this._rpcRequest("simulateTransaction",D),L=et(x,Lu);if("error"in L)throw new Error("failed to simulate transaction: "+L.error.message);return L.result}let i;if(t instanceof Ct){let S=t;i=new Ct,i.feePayer=S.feePayer,i.instructions=t.instructions,i.nonceInfo=S.nonceInfo,i.signatures=S.signatures}else i=Ct.populate(t),i._message=i._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(i.nonceInfo&&s)i.sign(...s);else{let S=this._disableBlockhashCaching;for(;;){const N=await this._blockhashWithExpiryBlockHeight(S);if(i.lastValidBlockHeight=N.lastValidBlockHeight,i.recentBlockhash=N.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const A=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(A)&&!this._blockhashInfo.transactionSignatures.includes(A)){this._blockhashInfo.simulatedSignatures.push(A);break}else S=!0}}const o=i._compile(),a=o.serialize(),h=i._serialize(a).toString("base64"),l={encoding:"base64",commitment:this.commitment};if(r){const S=(Array.isArray(r)?r:o.nonProgramIds()).map(N=>N.toBase58());l.accounts={encoding:"base64",addresses:S}}s&&(l.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(l.innerInstructions=e.innerInstructions);const b=[h,l],R=await this._rpcRequest("simulateTransaction",b),_=et(R,Lu);if("error"in _){let S;if("data"in _.error&&(S=_.error.data.logs,S&&Array.isArray(S))){const N=`
    `,A=N+S.join(N);console.error(_.error.message,A)}throw new gr({action:"simulate",signature:"",transactionMessage:_.error.message,logs:S})}return _.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(t.nonceInfo)t.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=a.lastValidBlockHeight,t.recentBlockhash=a.blockhash,t.sign(...i),!t.signature)throw new Error("!signature");const u=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(u))o=!0;else{this._blockhashInfo.transactionSignatures.push(u);break}}}const s=t.serialize();return await this.sendRawTransaction(s,r)}async sendRawTransaction(t,e){const r=vt(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},i=e&&e.skipPreflight,s=i===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),i&&(r.skipPreflight=i),s&&(r.preflightCommitment=s);const o=[t,r],a=await this._rpcRequest("sendTransaction",o),u=et(a,Rm);if("error"in u){let h;throw"data"in u.error&&(h=u.error.data.logs),new gr({action:i?"send":"simulate",signature:"",transactionMessage:u.error.message,logs:h})}return u.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){var i;const r=(i=this._subscriptionsByHash[t])==null?void 0:i.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const s=this._subscriptionStateChangeCallbacksByHash[t];s&&s.forEach(o=>{try{o(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var s;const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const i=(s=this._subscriptionStateChangeCallbacksByHash)[r]||(s[r]=new Set);return i.add(e),()=>{i.delete(e),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const i=this._subscriptionsByHash[r];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[r],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(r,{...i,state:"subscribing"});const a=await this._rpcWebSocket.call(o,s);this._setSubscription(r,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:s,error:a}),!e())return;this._setSubscription(r,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(r,{...i,state:"unsubscribing"}),this._setSubscription(r,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!e())return;this._setSubscription(r,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(i=>{try{i(...e)}catch(s){console.error(s)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=et(t,Vw);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,i=Cu([t.method,e]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:s.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[i];Bt(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const{commitment:i,config:s}=Vt(r),o=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=et(t,jw);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,i){const{commitment:s,config:o}=Vt(r),a=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",o||(i?{filters:Mu(i)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const i=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=et(t,vm);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=et(t,Yw);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=et(t,Jw);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,i){const s=e||this._commitment;if(s||r||i){let o={};r&&(o.encoding=r),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,r,i){const s=e||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,i)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=et(t,Qw);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const i=this._buildArgs([t],r||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){e(o.result,a);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(t,e,r){const{commitment:i,...s}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([t],i,void 0,s),a=this._makeSubscription({callback:(u,h)=>{e(u,h);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=et(t,tm);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class ni{constructor(t){this._keypair=void 0,this._keypair=t??Tu()}static generate(){return new ni(Tu())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const i=t.slice(0,32),s=Hs(i);for(let o=0;o<32;o++)if(r[o]!==s[o])throw new Error("provided secretKey is invalid")}return new ni({publicKey:r,secretKey:t})}static fromSeed(t){const e=Hs(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new ni({publicKey:e,secretKey:r})}get publicKey(){return new X(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const jn=Object.freeze({CreateLookupTable:{index:0,layout:ct([at("instruction"),hi("recentSlot"),xt("bumpSeed")])},FreezeLookupTable:{index:1,layout:ct([at("instruction")])},ExtendLookupTable:{index:2,layout:ct([at("instruction"),hi(),Ue(St(),ur(at(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ct([at("instruction")])},CloseLookupTable:{index:4,layout:ct([at("instruction")])}});class km{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=at("instruction").decode(t.data);let i;for(const[s,o]of Object.entries(jn))if(o.index==r){i=s;break}if(!i)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return i}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);const{recentSlot:e}=Ut(jn.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);const{addresses:e}=Ut(jn.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map(r=>new X(r))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Pc.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}class Pc{constructor(){}static createLookupTable(t){const[e,r]=X.findProgramAddressSync([t.authority.toBuffer(),Ph(BigInt(t.recentSlot),8)],this.programId),i=jn.CreateLookupTable,s=Ot(i,{recentSlot:BigInt(t.recentSlot),bumpSeed:r}),o=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Ie.programId,isSigner:!1,isWritable:!1}];return[new $t({programId:this.programId,keys:o,data:s}),e]}static freezeLookupTable(t){const e=jn.FreezeLookupTable,r=Ot(e),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new $t({programId:this.programId,keys:i,data:r})}static extendLookupTable(t){const e=jn.ExtendLookupTable,r=Ot(e,{addresses:t.addresses.map(s=>s.toBytes())}),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&i.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Ie.programId,isSigner:!1,isWritable:!1}),new $t({programId:this.programId,keys:i,data:r})}static deactivateLookupTable(t){const e=jn.DeactivateLookupTable,r=Ot(e),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new $t({programId:this.programId,keys:i,data:r})}static closeLookupTable(t){const e=jn.CloseLookupTable,r=Ot(e),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new $t({programId:this.programId,keys:i,data:r})}}Pc.programId=new X("AddressLookupTab1e1111111111111111111111111");class Tm{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=xt("instruction").decode(t.data);let i;for(const[s,o]of Object.entries(Tn))if(o.index==r){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return i}static decodeRequestUnits(t){this.checkProgramId(t.programId);const{units:e,additionalFee:r}=Ut(Tn.RequestUnits,t.data);return{units:e,additionalFee:r}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);const{bytes:e}=Ut(Tn.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);const{units:e}=Ut(Tn.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);const{microLamports:e}=Ut(Tn.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(Uc.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const Tn=Object.freeze({RequestUnits:{index:0,layout:ct([xt("instruction"),at("units"),at("additionalFee")])},RequestHeapFrame:{index:1,layout:ct([xt("instruction"),at("bytes")])},SetComputeUnitLimit:{index:2,layout:ct([xt("instruction"),at("units")])},SetComputeUnitPrice:{index:3,layout:ct([xt("instruction"),hi("microLamports")])}});class Uc{constructor(){}static requestUnits(t){const e=Tn.RequestUnits,r=Ot(e,t);return new $t({keys:[],programId:this.programId,data:r})}static requestHeapFrame(t){const e=Tn.RequestHeapFrame,r=Ot(e,t);return new $t({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(t){const e=Tn.SetComputeUnitLimit,r=Ot(e,t);return new $t({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(t){const e=Tn.SetComputeUnitPrice,r=Ot(e,{microLamports:BigInt(t.microLamports)});return new $t({keys:[],programId:this.programId,data:r})}}Uc.programId=new X("ComputeBudget111111111111111111111111111111");const Du=64,zu=32,Hu=64,Fu=ct([xt("numSignatures"),xt("padding"),hn("signatureOffset"),hn("signatureInstructionIndex"),hn("publicKeyOffset"),hn("publicKeyInstructionIndex"),hn("messageDataOffset"),hn("messageDataSize"),hn("messageInstructionIndex")]);class go{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:i,instructionIndex:s}=t;Bt(e.length===zu,`Public Key must be ${zu} bytes but received ${e.length} bytes`),Bt(i.length===Hu,`Signature must be ${Hu} bytes but received ${i.length} bytes`);const o=Fu.span,a=o+e.length,u=a+i.length,h=1,l=ut.alloc(u+r.length),b=s??65535;return Fu.encode({numSignatures:h,padding:0,signatureOffset:a,signatureInstructionIndex:b,publicKeyOffset:o,publicKeyInstructionIndex:b,messageDataOffset:u,messageDataSize:r.length,messageInstructionIndex:b},l),l.fill(e,o),l.fill(i,a),l.fill(r,u),new $t({keys:[],programId:go.programId,data:l})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:i}=t;Bt(e.length===Du,`Private key must be ${Du} bytes but received ${e.length} bytes`);try{const s=ni.fromSecretKey(e),o=s.publicKey.toBytes(),a=Sc(r,s.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:a,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}go.programId=new X("Ed25519SigVerify111111111111111111111111111");const Om=(n,t)=>{const e=co.sign(n,t);return[e.toCompactRawBytes(),e.recovery]};co.utils.isValidPrivateKey;const Nm=co.getPublicKey,$u=32,la=20,Ku=64,xm=11,ha=ct([xt("numSignatures"),hn("signatureOffset"),xt("signatureInstructionIndex"),hn("ethAddressOffset"),xt("ethAddressInstructionIndex"),hn("messageDataOffset"),hn("messageDataSize"),xt("messageInstructionIndex"),Xt(20,"ethAddress"),Xt(64,"signature"),xt("recoveryId")]);class ri{constructor(){}static publicKeyToEthAddress(t){Bt(t.length===Ku,`Public key must be ${Ku} bytes but received ${t.length} bytes`);try{return ut.from(Au(vt(t))).slice(-la)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:i,recoveryId:s,instructionIndex:o}=t;return ri.createInstructionWithEthAddress({ethAddress:ri.publicKeyToEthAddress(e),message:r,signature:i,recoveryId:s,instructionIndex:o})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:r,signature:i,recoveryId:s,instructionIndex:o=0}=t;let a;typeof e=="string"?e.startsWith("0x")?a=ut.from(e.substr(2),"hex"):a=ut.from(e,"hex"):a=e,Bt(a.length===la,`Address must be ${la} bytes but received ${a.length} bytes`);const u=1+xm,h=u,l=u+a.length,b=l+i.length+1,R=1,_=ut.alloc(ha.span+r.length);return ha.encode({numSignatures:R,signatureOffset:l,signatureInstructionIndex:o,ethAddressOffset:h,ethAddressInstructionIndex:o,messageDataOffset:b,messageDataSize:r.length,messageInstructionIndex:o,signature:vt(i),ethAddress:vt(a),recoveryId:s},_),_.fill(vt(r),ha.span),new $t({keys:[],programId:ri.programId,data:_})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:i}=t;Bt(e.length===$u,`Private key must be ${$u} bytes but received ${e.length} bytes`);try{const s=vt(e),o=Nm(s,!1).slice(1),a=ut.from(Au(vt(r))),[u,h]=Om(a,s);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:u,recoveryId:h,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}ri.programId=new X("KeccakSecp256k11111111111111111111111111111");var wd;const md=new X("StakeConfig11111111111111111111111111111111");class bd{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}}class os{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}wd=os;os.default=new wd(0,0,X.default);class Cm{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=at("instruction").decode(t.data);let i;for(const[s,o]of Object.entries(xe))if(o.index==r){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a StakeInstruction");return i}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e,lockup:r}=Ut(xe.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new bd(new X(e.staker),new X(e.withdrawer)),lockup:new os(r.unixTimestamp,r.epoch,new X(r.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),Ut(xe.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,stakeAuthorizationType:r}=Ut(xe.Authorize,t.data),i={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new X(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(i.custodianPubkey=t.keys[3].pubkey),i}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{newAuthorized:e,stakeAuthorizationType:r,authoritySeed:i,authorityOwner:s}=Ut(xe.AuthorizeWithSeed,t.data),o={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:i,authorityOwner:new X(s),newAuthorizedPubkey:new X(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(o.custodianPubkey=t.keys[3].pubkey),o}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=Ut(xe.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Ut(xe.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=Ut(xe.Withdraw,t.data),r={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(r.custodianPubkey=t.keys[5].pubkey),r}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Ut(xe.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(yo.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const xe=Object.freeze({Initialize:{index:0,layout:ct([at("instruction"),M_(),L_()])},Authorize:{index:1,layout:ct([at("instruction"),St("newAuthorized"),at("stakeAuthorizationType")])},Delegate:{index:2,layout:ct([at("instruction")])},Split:{index:3,layout:ct([at("instruction"),rn("lamports")])},Withdraw:{index:4,layout:ct([at("instruction"),rn("lamports")])},Deactivate:{index:5,layout:ct([at("instruction")])},Merge:{index:7,layout:ct([at("instruction")])},AuthorizeWithSeed:{index:8,layout:ct([at("instruction"),St("newAuthorized"),at("stakeAuthorizationType"),Ar("authoritySeed"),St("authorityOwner")])}}),Bm=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class yo{constructor(){}static initialize(t){const{stakePubkey:e,authorized:r,lockup:i}=t,s=i||os.default,o=xe.Initialize,a=Ot(o,{authorized:{staker:vt(r.staker.toBuffer()),withdrawer:vt(r.withdrawer.toBuffer())},lockup:{unixTimestamp:s.unixTimestamp,epoch:s.epoch,custodian:vt(s.custodian.toBuffer())}}),u={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:li,isSigner:!1,isWritable:!1}],programId:this.programId,data:a};return new $t(u)}static createAccountWithSeed(t){const e=new Ct;e.add(Ie.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:i,lockup:s}=t;return e.add(this.initialize({stakePubkey:r,authorized:i,lockup:s}))}static createAccount(t){const e=new Ct;e.add(Ie.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:i,lockup:s}=t;return e.add(this.initialize({stakePubkey:r,authorized:i,lockup:s}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:r,votePubkey:i}=t,s=xe.Delegate,o=Ot(s);return new Ct().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:In,isSigner:!1,isWritable:!1},{pubkey:Os,isSigner:!1,isWritable:!1},{pubkey:md,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorize(t){const{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:i,stakeAuthorizationType:s,custodianPubkey:o}=t,a=xe.Authorize,u=Ot(a,{newAuthorized:vt(i.toBuffer()),stakeAuthorizationType:s.index}),h=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:In,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&h.push({pubkey:o,isSigner:!0,isWritable:!1}),new Ct().add({keys:h,programId:this.programId,data:u})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:r,authoritySeed:i,authorityOwner:s,newAuthorizedPubkey:o,stakeAuthorizationType:a,custodianPubkey:u}=t,h=xe.AuthorizeWithSeed,l=Ot(h,{newAuthorized:vt(o.toBuffer()),stakeAuthorizationType:a.index,authoritySeed:i,authorityOwner:vt(s.toBuffer())}),b=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:In,isSigner:!1,isWritable:!1}];return u&&b.push({pubkey:u,isSigner:!0,isWritable:!1}),new Ct().add({keys:b,programId:this.programId,data:l})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:i,lamports:s}=t,o=xe.Split,a=Ot(o,{lamports:s});return new $t({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static split(t,e){const r=new Ct;return r.add(Ie.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t,e){const{stakePubkey:r,authorizedPubkey:i,splitStakePubkey:s,basePubkey:o,seed:a,lamports:u}=t,h=new Ct;return h.add(Ie.allocate({accountPubkey:s,basePubkey:o,seed:a,space:this.space,programId:this.programId})),e&&e>0&&h.add(Ie.transfer({fromPubkey:t.authorizedPubkey,toPubkey:s,lamports:e})),h.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:i,splitStakePubkey:s,lamports:u}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:i}=t,s=xe.Merge,o=Ot(s);return new Ct().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:In,isSigner:!1,isWritable:!1},{pubkey:Os,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:r,toPubkey:i,lamports:s,custodianPubkey:o}=t,a=xe.Withdraw,u=Ot(a,{lamports:s}),h=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:In,isSigner:!1,isWritable:!1},{pubkey:Os,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&h.push({pubkey:o,isSigner:!0,isWritable:!1}),new Ct().add({keys:h,programId:this.programId,data:u})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:r}=t,i=xe.Deactivate,s=Ot(i);return new Ct().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:In,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}}yo.programId=new X("Stake11111111111111111111111111111111111111");yo.space=200;class Ed{constructor(t,e,r,i){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=r,this.commission=i}}class Mm{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=at("instruction").decode(t.data);let i;for(const[s,o]of Object.entries(On))if(o.index==r){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a VoteInstruction");return i}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);const{voteInit:e}=Ut(On.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new Ed(new X(e.nodePubkey),new X(e.authorizedVoter),new X(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,voteAuthorizationType:r}=Ut(On.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new X(e),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:r,newAuthorized:i,voteAuthorizationType:s}}=Ut(On.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new X(e),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new X(i),voteAuthorizationType:{index:s},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=Ut(On.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Ri.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const On=Object.freeze({InitializeAccount:{index:0,layout:ct([at("instruction"),P_()])},Authorize:{index:1,layout:ct([at("instruction"),St("newAuthorized"),at("voteAuthorizationType")])},Withdraw:{index:3,layout:ct([at("instruction"),rn("lamports")])},UpdateValidatorIdentity:{index:4,layout:ct([at("instruction")])},AuthorizeWithSeed:{index:10,layout:ct([at("instruction"),U_()])}}),Lm=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Ri{constructor(){}static initializeAccount(t){const{votePubkey:e,nodePubkey:r,voteInit:i}=t,s=On.InitializeAccount,o=Ot(s,{voteInit:{nodePubkey:vt(i.nodePubkey.toBuffer()),authorizedVoter:vt(i.authorizedVoter.toBuffer()),authorizedWithdrawer:vt(i.authorizedWithdrawer.toBuffer()),commission:i.commission}}),a={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:li,isSigner:!1,isWritable:!1},{pubkey:In,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new $t(a)}static createAccount(t){const e=new Ct;return e.add(Ie.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){const{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:i,voteAuthorizationType:s}=t,o=On.Authorize,a=Ot(o,{newAuthorized:vt(i.toBuffer()),voteAuthorizationType:s.index}),u=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:In,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new Ct().add({keys:u,programId:this.programId,data:a})}static authorizeWithSeed(t){const{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:s,voteAuthorizationType:o,votePubkey:a}=t,u=On.AuthorizeWithSeed,h=Ot(u,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:vt(r.toBuffer()),currentAuthorityDerivedKeySeed:i,newAuthorized:vt(s.toBuffer()),voteAuthorizationType:o.index}}),l=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:In,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return new Ct().add({keys:l,programId:this.programId,data:h})}static withdraw(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:i,toPubkey:s}=t,o=On.Withdraw,a=Ot(o,{lamports:i}),u=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return new Ct().add({keys:u,programId:this.programId,data:a})}static safeWithdraw(t,e,r){if(t.lamports>e-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return Ri.withdraw(t)}static updateValidatorIdentity(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,nodePubkey:i}=t,s=On.UpdateValidatorIdentity,o=Ot(s),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new Ct().add({keys:a,programId:this.programId,data:o})}}Ri.programId=new X("Vote111111111111111111111111111111111111111");Ri.space=3762;const Rd=new X("Va1idator1nfo111111111111111111111111111111"),Pm=Z({name:Q(),website:ht(Q()),details:ht(Q()),iconUrl:ht(Q()),keybaseUsername:ht(Q())});class Dc{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];if(je(e)!==2)return null;const i=[];for(let s=0;s<2;s++){const o=new X(Ze(e,0,xn)),a=kn(e)===1;i.push({publicKey:o,isSigner:a})}if(i[0].publicKey.equals(Rd)&&i[1].isSigner){const s=Ar().decode(ut.from(e)),o=JSON.parse(s);return Uh(o,Pm),new Dc(i[1].publicKey,o)}return null}}const Um=new X("Vote111111111111111111111111111111111111111"),Dm=ct([St("nodePubkey"),St("authorizedWithdrawer"),xt("commission"),Me(),Ue(ct([Me("slot"),at("confirmationCount")]),ur(at(),-8),"votes"),xt("rootSlotValid"),Me("rootSlot"),Me(),Ue(ct([Me("epoch"),St("authorizedVoter")]),ur(at(),-8),"authorizedVoters"),ct([Ue(ct([St("authorizedPubkey"),Me("epochOfLastAuthorizedSwitch"),Me("targetEpoch")]),32,"buf"),Me("idx"),xt("isEmpty")],"priorVoters"),Me(),Ue(ct([Me("epoch"),Me("credits"),Me("prevCredits")]),ur(at(),-8),"epochCredits"),ct([Me("slot"),Me("timestamp")],"lastTimestamp")]);class zc{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){const r=Dm.decode(vt(t),4);let i=r.rootSlot;return r.rootSlotValid||(i=null),new zc({nodePubkey:new X(r.nodePubkey),authorizedWithdrawer:new X(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:i,authorizedVoters:r.authorizedVoters.map(zm),priorVoters:Hm(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}}function zm({authorizedVoter:n,epoch:t}){return{epoch:t,authorizedVoter:new X(n)}}function qu({authorizedPubkey:n,epochOfLastAuthorizedSwitch:t,targetEpoch:e}){return{authorizedPubkey:new X(n),epochOfLastAuthorizedSwitch:t,targetEpoch:e}}function Hm({buf:n,idx:t,isEmpty:e}){return e?[]:[...n.slice(t+1).map(qu),...n.slice(0,t).map(qu)]}const Wu={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function Fm(n,t){const e=t===!1?"http":"https";if(!n)return Wu[e].devnet;const r=Wu[e][n];if(!r)throw new Error(`Unknown ${e} cluster: ${n}`);return r}async function $m(n,t,e,r){let i,s;e&&Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")||e&&Object.prototype.hasOwnProperty.call(e,"nonceValue")?(i=e,s=r):s=e;const o=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,minContextSlot:s.minContextSlot},a=await n.sendRawTransaction(t,o),u=s&&s.commitment,l=(await(i?n.confirmTransaction(i,u):n.confirmTransaction(a,u))).value;if(l.err)throw a!=null?new gr({action:o!=null&&o.skipPreflight?"send":"simulate",signature:a,transactionMessage:`Status: (${JSON.stringify(l)})`}):new Error(`Raw transaction ${a} failed (${JSON.stringify(l)})`);return a}const Km=1e9,qm=Object.freeze(Object.defineProperty({__proto__:null,Account:x_,AddressLookupTableAccount:za,AddressLookupTableInstruction:km,AddressLookupTableProgram:Pc,Authorized:bd,BLOCKHASH_CACHE_TIMEOUT_MS:cd,BPF_LOADER_DEPRECATED_PROGRAM_ID:C_,BPF_LOADER_PROGRAM_ID:J_,BpfLoader:Q_,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:Tn,ComputeBudgetInstruction:Tm,ComputeBudgetProgram:Uc,Connection:Sm,Ed25519Program:go,Enum:O_,EpochSchedule:od,FeeCalculatorLayout:id,Keypair:ni,LAMPORTS_PER_SOL:Km,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:jn,Loader:Mr,Lockup:os,MAX_SEED_LENGTH:td,Message:Rn,MessageAccountKeys:Ki,MessageV0:Br,NONCE_ACCOUNT_LENGTH:Da,NonceAccount:ho,PACKET_DATA_SIZE:lr,PUBLIC_KEY_LENGTH:xn,PublicKey:X,SIGNATURE_LENGTH_IN_BYTES:$i,SOLANA_SCHEMA:Bi,STAKE_CONFIG_ID:md,STAKE_INSTRUCTION_LAYOUTS:xe,SYSTEM_INSTRUCTION_LAYOUTS:Gt,SYSVAR_CLOCK_PUBKEY:In,SYSVAR_EPOCH_SCHEDULE_PUBKEY:$_,SYSVAR_INSTRUCTIONS_PUBKEY:K_,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:Ts,SYSVAR_RENT_PUBKEY:li,SYSVAR_REWARDS_PUBKEY:q_,SYSVAR_SLOT_HASHES_PUBKEY:W_,SYSVAR_SLOT_HISTORY_PUBKEY:V_,SYSVAR_STAKE_HISTORY_PUBKEY:Os,Secp256k1Program:ri,SendTransactionError:gr,SolanaJSONRPCError:lt,SolanaJSONRPCErrorCode:G_,StakeAuthorizationLayout:Bm,StakeInstruction:Cm,StakeProgram:yo,Struct:kc,SystemInstruction:Y_,SystemProgram:Ie,Transaction:Ct,TransactionExpiredBlockheightExceededError:Tc,TransactionExpiredNonceInvalidError:Xr,TransactionExpiredTimeoutError:Oc,TransactionInstruction:$t,TransactionMessage:xc,TransactionStatus:Fn,VALIDATOR_INFO_KEY:Rd,VERSION_PREFIX_MASK:uo,VOTE_PROGRAM_ID:Um,ValidatorInfo:Dc,VersionedMessage:Nc,VersionedTransaction:Cc,VoteAccount:zc,VoteAuthorizationLayout:Lm,VoteInit:Ed,VoteInstruction:Mm,VoteProgram:Ri,clusterApiUrl:Fm,sendAndConfirmRawTransaction:$m,sendAndConfirmTransaction:Ua},Symbol.toStringTag,{value:"Module"}));var Hc={exports:{}};const Wm=/[\p{Lu}]/u,Vm=/[\p{Ll}]/u,Vu=/^[\p{Lu}](?![\p{Lu}])/gu,Ad=/([\p{Alpha}\p{N}_]|$)/u,vd=/[_.\- ]+/,Gm=new RegExp("^"+vd.source),Gu=new RegExp(vd.source+Ad.source,"gu"),ju=new RegExp("\\d+"+Ad.source,"gu"),jm=(n,t,e)=>{let r=!1,i=!1,s=!1;for(let o=0;o<n.length;o++){const a=n[o];r&&Wm.test(a)?(n=n.slice(0,o)+"-"+n.slice(o),r=!1,s=i,i=!0,o++):i&&s&&Vm.test(a)?(n=n.slice(0,o-1)+"-"+n.slice(o-1),s=i,i=!1,r=!0):(r=t(a)===a&&e(a)!==a,s=i,i=e(a)===a&&t(a)!==a)}return n},Zm=(n,t)=>(Vu.lastIndex=0,n.replace(Vu,e=>t(e))),Ym=(n,t)=>(Gu.lastIndex=0,ju.lastIndex=0,n.replace(Gu,(e,r)=>t(r)).replace(ju,e=>t(e))),Id=(n,t)=>{if(!(typeof n=="string"||Array.isArray(n)))throw new TypeError("Expected the input to be `string | string[]`");if(t={pascalCase:!1,preserveConsecutiveUppercase:!1,...t},Array.isArray(n)?n=n.map(s=>s.trim()).filter(s=>s.length).join("-"):n=n.trim(),n.length===0)return"";const e=t.locale===!1?s=>s.toLowerCase():s=>s.toLocaleLowerCase(t.locale),r=t.locale===!1?s=>s.toUpperCase():s=>s.toLocaleUpperCase(t.locale);return n.length===1?t.pascalCase?r(n):e(n):(n!==e(n)&&(n=jm(n,e,r)),n=n.replace(Gm,""),t.preserveConsecutiveUppercase?n=Zm(n,e):n=e(n),t.pascalCase&&(n=r(n.charAt(0))+n.slice(1)),Ym(n,r))};Hc.exports=Id;Hc.exports.default=Id;var Xm=Hc.exports;const Jm=gi(Xm);var mt={},ot={};let zt=class{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}decode(t,e){throw new Error("Layout is abstract")}encode(t,e,r){throw new Error("Layout is abstract")}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}};ot.Layout=zt;function Fc(n,t){return t.property?n+"["+t.property+"]":n}ot.nameWithProperty=Fc;function Qm(n,t){if(typeof n!="function")throw new TypeError("Class must be constructor");if(n.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof zt))throw new TypeError("layout must be a Layout");if(t.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");n.layout_=t,t.boundConstructor_=n,t.makeDestinationObject=()=>new n,Object.defineProperty(n.prototype,"encode",{value:function(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(n,"decode",{value:function(e,r){return t.decode(e,r)},writable:!0})}ot.bindConstructorLayout=Qm;let Xe=class extends zt{isCount(){throw new Error("ExternalLayout is abstract")}};class Sd extends Xe{constructor(t,e){if(t===void 0&&(t=1),!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e){e===void 0&&(e=0);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}}let $c=class extends Xe{constructor(t,e,r){if(!(t instanceof zt))throw new TypeError("layout must be a Layout");if(e===void 0)e=0;else if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Dn||this.layout instanceof Jn}decode(t,e){return e===void 0&&(e=0),this.layout.decode(t,e+this.offset)}encode(t,e,r){return r===void 0&&(r=0),this.layout.encode(t,e,r+this.offset)}},Dn=class extends zt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return e===void 0&&(e=0),t.readUIntLE(e,this.span)}encode(t,e,r){return r===void 0&&(r=0),e.writeUIntLE(t,r,this.span),this.span}},Jn=class extends zt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return e===void 0&&(e=0),t.readUIntBE(e,this.span)}encode(t,e,r){return r===void 0&&(r=0),e.writeUIntBE(t,r,this.span),this.span}};class Fr extends zt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return e===void 0&&(e=0),t.readIntLE(e,this.span)}encode(t,e,r){return r===void 0&&(r=0),e.writeIntLE(t,r,this.span),this.span}}class Ai extends zt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return e===void 0&&(e=0),t.readIntBE(e,this.span)}encode(t,e,r){return r===void 0&&(r=0),e.writeIntBE(t,r,this.span),this.span}}const Ka=Math.pow(2,32);function _o(n){const t=Math.floor(n/Ka),e=n-t*Ka;return{hi32:t,lo32:e}}function wo(n,t){return n*Ka+t}let t1=class extends zt{constructor(t){super(8,t)}decode(t,e){e===void 0&&(e=0);const r=t.readUInt32LE(e),i=t.readUInt32LE(e+4);return wo(i,r)}encode(t,e,r){r===void 0&&(r=0);const i=_o(t);return e.writeUInt32LE(i.lo32,r),e.writeUInt32LE(i.hi32,r+4),8}};class e1 extends zt{constructor(t){super(8,t)}decode(t,e){e===void 0&&(e=0);const r=t.readUInt32BE(e),i=t.readUInt32BE(e+4);return wo(r,i)}encode(t,e,r){r===void 0&&(r=0);const i=_o(t);return e.writeUInt32BE(i.hi32,r),e.writeUInt32BE(i.lo32,r+4),8}}let n1=class extends zt{constructor(t){super(8,t)}decode(t,e){e===void 0&&(e=0);const r=t.readUInt32LE(e),i=t.readInt32LE(e+4);return wo(i,r)}encode(t,e,r){r===void 0&&(r=0);const i=_o(t);return e.writeUInt32LE(i.lo32,r),e.writeInt32LE(i.hi32,r+4),8}};class r1 extends zt{constructor(t){super(8,t)}decode(t,e){e===void 0&&(e=0);const r=t.readInt32BE(e),i=t.readUInt32BE(e+4);return wo(r,i)}encode(t,e,r){r===void 0&&(r=0);const i=_o(t);return e.writeInt32BE(i.hi32,r),e.writeUInt32BE(i.lo32,r+4),8}}class kd extends zt{constructor(t){super(4,t)}decode(t,e){return e===void 0&&(e=0),t.readFloatLE(e)}encode(t,e,r){return r===void 0&&(r=0),e.writeFloatLE(t,r),4}}class Td extends zt{constructor(t){super(4,t)}decode(t,e){return e===void 0&&(e=0),t.readFloatBE(e)}encode(t,e,r){return r===void 0&&(r=0),e.writeFloatBE(t,r),4}}class Od extends zt{constructor(t){super(8,t)}decode(t,e){return e===void 0&&(e=0),t.readDoubleLE(e)}encode(t,e,r){return r===void 0&&(r=0),e.writeDoubleLE(t,r),8}}class Nd extends zt{constructor(t){super(8,t)}decode(t,e){return e===void 0&&(e=0),t.readDoubleBE(e)}encode(t,e,r){return r===void 0&&(r=0),e.writeDoubleBE(t,r),8}}class xd extends zt{constructor(t,e,r){if(!(t instanceof zt))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof Xe&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(e instanceof Xe)&&0<t.span&&(i=e*t.span),super(i,r),this.elementLayout=t,this.count=e}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let r=0,i=this.count;if(i instanceof Xe&&(i=i.decode(t,e)),0<this.elementLayout.span)r=i*this.elementLayout.span;else{let s=0;for(;s<i;)r+=this.elementLayout.getSpan(t,e+r),++s}return r}decode(t,e){e===void 0&&(e=0);const r=[];let i=0,s=this.count;for(s instanceof Xe&&(s=s.decode(t,e));i<s;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),i+=1;return r}encode(t,e,r){r===void 0&&(r=0);const i=this.elementLayout,s=t.reduce((o,a)=>o+i.encode(a,e,r+o),0);return this.count instanceof Xe&&this.count.encode(t.length,e,r),s}}let Cd=class extends zt{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((s,o)=>s&&o instanceof zt,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const s of t)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=t.reduce((s,o)=>s+o.getSpan(),0)}catch{}super(i,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let r=0;try{r=this.fields.reduce((i,s)=>{const o=s.getSpan(t,e);return e+=o,i+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e){e===void 0&&(e=0);const r=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(r[i.property]=i.decode(t,e)),e+=i.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r){r===void 0&&(r=0);const i=r;let s=0,o=0;for(const a of this.fields){let u=a.span;if(o=0<u?u:0,a.property!==void 0){const h=t[a.property];h!==void 0&&(o=a.encode(h,e,r),0>u&&(u=a.getSpan(e,r)))}s=r,r+=u}return s+o-i}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}},Kc=class{constructor(t){this.property=t}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}},$s=class extends Kc{constructor(t,e){if(!(t instanceof Xe&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}},qc=class extends zt{constructor(t,e,r){const i=t instanceof Dn||t instanceof Jn;if(i)t=new $s(new $c(t));else if(t instanceof Xe&&t.isCount())t=new $s(t);else if(!(t instanceof Kc))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof zt))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let s=-1;e&&(s=e.span,0<=s&&i&&(s+=t.layout.span)),super(s,r),this.discriminator=t,this.usesPrefixDiscriminator=i,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(t.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&t.hasOwnProperty(this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||t.hasOwnProperty(e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(t.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}decode(t,e){e===void 0&&(e=0);let r;const i=this.discriminator,s=i.decode(t,e);let o=this.registry[s];if(o===void 0){let a=0;o=this.defaultLayout,this.usesPrefixDiscriminator&&(a=i.layout.span),r=this.makeDestinationObject(),r[i.property]=s,r[o.property]=this.defaultLayout.decode(t,e+a)}else r=o.decode(t,e);return r}encode(t,e,r){r===void 0&&(r=0);const i=this.getSourceVariant(t);if(i===void 0){const s=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=s.layout.span),s.encode(t[s.property],e,r),a+o.encode(t[o.property],e,r+a)}return i.encode(t,e,r)}addVariant(t,e,r){const i=new Bd(this,t,e,r);return this.registry[t]=i,i}getVariant(t,e){let r=t;return _t.isBuffer(t)&&(e===void 0&&(e=0),r=this.discriminator.decode(t,e)),this.registry[r]}},Bd=class extends zt{constructor(t,e,r,i){if(!(t instanceof qc))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&i===void 0&&(i=r,r=null),r){if(!(r instanceof zt))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=t.span;0>t.span&&(s=r?r.span:0,0<=s&&t.usesPrefixDiscriminator&&(s+=t.discriminator.layout.span)),super(s,i),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),r+this.layout.getSpan(t,e+r)}decode(t,e){const r=this.makeDestinationObject();if(e===void 0&&(e=0),this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+i):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r){r===void 0&&(r=0);let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!t.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let s=i;if(this.layout&&(this.layout.encode(t[this.property],e,r+i),s+=this.layout.getSpan(e,r+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(t){if(this.layout)return this.layout.fromArray(t)}};function Zr(n){return 0>n&&(n+=4294967296),n}class Wc extends zt{constructor(t,e,r){if(!(t instanceof Dn||t instanceof Jn))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&r===void 0&&(r=e,e=void 0),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let i=0;this._packedSetValue=function(s){return i=Zr(s),this},this._packedGetValue=function(){return i}}decode(t,e){const r=this.makeDestinationObject();e===void 0&&(e=0);const i=this.word.decode(t,e);this._packedSetValue(i);for(const s of this.fields)s.property!==void 0&&(r[s.property]=s.decode(i));return r}encode(t,e,r){r===void 0&&(r=0);const i=this.word.decode(e,r);this._packedSetValue(i);for(const s of this.fields)if(s.property!==void 0){const o=t[s.property];o!==void 0&&s.encode(o)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new Mi(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new Md(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}class Mi{constructor(t,e,r){if(!(t instanceof Wc))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const i=8*t.span,s=t.fields.reduce((o,a)=>o+a.bits,0);if(e+s>i)throw new Error("bits too long for span remainder ("+(i-s)+" of "+i+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=s,this.container.msb&&(this.start=i-s-e),this.wordMask=Zr(this.valueMask<<this.start),this.property=r}decode(){const t=this.container._packedGetValue();return Zr(t&this.wordMask)>>>this.start}encode(t){if(!Number.isInteger(t)||t!==Zr(t&this.valueMask))throw new TypeError(Fc("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=Zr(t<<this.start);this.container._packedSetValue(Zr(e&~this.wordMask)|r)}}let Md=class extends Mi{constructor(t,e){super(t,1,e)}decode(t,e){return!!Mi.prototype.decode.call(this,t,e)}encode(t){return typeof t=="boolean"&&(t=+t),Mi.prototype.encode.call(this,t)}},Ld=class extends zt{constructor(t,e){if(!(t instanceof Xe&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof Xe||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e){e===void 0&&(e=0);let r=this.span;return 0>r&&(r=this.length.decode(t,e)),t.slice(e,e+r)}encode(t,e,r){let i=this.length;if(this.length instanceof Xe&&(i=t.length),!(_t.isBuffer(t)&&i===t.length))throw new TypeError(Fc("Blob.encode",this)+" requires (length "+i+") Buffer as src");if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return e.write(t.toString("hex"),r,i,"hex"),this.length instanceof Xe&&this.length.encode(i,e,r),i}};class Pd extends zt{constructor(t){super(-1,t)}getSpan(t,e){if(!_t.isBuffer(t))throw new TypeError("b must be a Buffer");e===void 0&&(e=0);let r=e;for(;r<t.length&&t[r]!==0;)r+=1;return 1+r-e}decode(t,e,r){e===void 0&&(e=0);let i=this.getSpan(t,e);return t.slice(e,e+i-1).toString("utf-8")}encode(t,e,r){r===void 0&&(r=0),typeof t!="string"&&(t=t.toString());const i=new _t(t,"utf8"),s=i.length;if(r+s>e.length)throw new RangeError("encoding overruns Buffer");return i.copy(e,r),e[r+s]=0,s+1}}class Ud extends zt{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e){if(!_t.isBuffer(t))throw new TypeError("b must be a Buffer");return e===void 0&&(e=0),t.length-e}decode(t,e,r){e===void 0&&(e=0);let i=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");return t.slice(e,e+i).toString("utf-8")}encode(t,e,r){r===void 0&&(r=0),typeof t!="string"&&(t=t.toString());const i=new _t(t,"utf8"),s=i.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(r+s>e.length)throw new RangeError("encoding overruns Buffer");return i.copy(e,r),s}}class Dd extends zt{constructor(t,e){super(0,e),this.value=t}decode(t,e,r){return this.value}encode(t,e,r){return 0}}ot.ExternalLayout=Xe;ot.GreedyCount=Sd;ot.OffsetLayout=$c;ot.UInt=Dn;ot.UIntBE=Jn;ot.Int=Fr;ot.IntBE=Ai;ot.Float=kd;ot.FloatBE=Td;ot.Double=Od;ot.DoubleBE=Nd;ot.Sequence=xd;ot.Structure=Cd;ot.UnionDiscriminator=Kc;ot.UnionLayoutDiscriminator=$s;ot.Union=qc;ot.VariantLayout=Bd;ot.BitStructure=Wc;ot.BitField=Mi;ot.Boolean=Md;ot.Blob=Ld;ot.CString=Pd;ot.UTF8=Ud;ot.Constant=Dd;ot.greedy=(n,t)=>new Sd(n,t);ot.offset=(n,t,e)=>new $c(n,t,e);ot.u8=n=>new Dn(1,n);ot.u16=n=>new Dn(2,n);ot.u24=n=>new Dn(3,n);ot.u32=n=>new Dn(4,n);ot.u40=n=>new Dn(5,n);ot.u48=n=>new Dn(6,n);ot.nu64=n=>new t1(n);ot.u16be=n=>new Jn(2,n);ot.u24be=n=>new Jn(3,n);ot.u32be=n=>new Jn(4,n);ot.u40be=n=>new Jn(5,n);ot.u48be=n=>new Jn(6,n);ot.nu64be=n=>new e1(n);ot.s8=n=>new Fr(1,n);ot.s16=n=>new Fr(2,n);ot.s24=n=>new Fr(3,n);ot.s32=n=>new Fr(4,n);ot.s40=n=>new Fr(5,n);ot.s48=n=>new Fr(6,n);ot.ns64=n=>new n1(n);ot.s16be=n=>new Ai(2,n);ot.s24be=n=>new Ai(3,n);ot.s32be=n=>new Ai(4,n);ot.s40be=n=>new Ai(5,n);ot.s48be=n=>new Ai(6,n);ot.ns64be=n=>new r1(n);ot.f32=n=>new kd(n);ot.f32be=n=>new Td(n);ot.f64=n=>new Od(n);ot.f64be=n=>new Nd(n);ot.struct=(n,t,e)=>new Cd(n,t,e);ot.bits=(n,t,e)=>new Wc(n,t,e);ot.seq=(n,t,e)=>new xd(n,t,e);ot.union=(n,t,e)=>new qc(n,t,e);ot.unionLayoutDiscriminator=(n,t)=>new $s(n,t);ot.blob=(n,t)=>new Ld(n,t);ot.cstr=n=>new Pd(n);ot.utf8=(n,t)=>new Ud(n,t);ot.const=(n,t)=>new Dd(n,t);const i1=Zs(qm);(function(n){var t=an&&an.__importDefault||function(V){return V&&V.__esModule?V:{default:V}};Object.defineProperty(n,"__esModule",{value:!0}),n.map=n.array=n.rustEnum=n.str=n.vecU8=n.tagged=n.vec=n.bool=n.option=n.publicKey=n.i256=n.u256=n.i128=n.u128=n.i64=n.u64=n.struct=n.f64=n.f32=n.i32=n.u32=n.i16=n.u16=n.i8=n.u8=void 0;const e=ot,r=i1,i=t(dc);var s=ot;Object.defineProperty(n,"u8",{enumerable:!0,get:function(){return s.u8}}),Object.defineProperty(n,"i8",{enumerable:!0,get:function(){return s.s8}}),Object.defineProperty(n,"u16",{enumerable:!0,get:function(){return s.u16}}),Object.defineProperty(n,"i16",{enumerable:!0,get:function(){return s.s16}}),Object.defineProperty(n,"u32",{enumerable:!0,get:function(){return s.u32}}),Object.defineProperty(n,"i32",{enumerable:!0,get:function(){return s.s32}}),Object.defineProperty(n,"f32",{enumerable:!0,get:function(){return s.f32}}),Object.defineProperty(n,"f64",{enumerable:!0,get:function(){return s.f64}}),Object.defineProperty(n,"struct",{enumerable:!0,get:function(){return s.struct}});class o extends e.Layout{constructor(v,c,d){super(v,d),this.blob=(0,e.blob)(v),this.signed=c}decode(v,c=0){const d=new i.default(this.blob.decode(v,c),10,"le");return this.signed?d.fromTwos(this.span*8).clone():d}encode(v,c,d=0){return this.signed&&(v=v.toTwos(this.span*8)),this.blob.encode(v.toArrayLike(_t,"le",this.span),c,d)}}function a(V){return new o(8,!1,V)}n.u64=a;function u(V){return new o(8,!0,V)}n.i64=u;function h(V){return new o(16,!1,V)}n.u128=h;function l(V){return new o(16,!0,V)}n.i128=l;function b(V){return new o(32,!1,V)}n.u256=b;function R(V){return new o(32,!0,V)}n.i256=R;class _ extends e.Layout{constructor(v,c,d,y){super(v.span,y),this.layout=v,this.decoder=c,this.encoder=d}decode(v,c){return this.decoder(this.layout.decode(v,c))}encode(v,c,d){return this.layout.encode(this.encoder(v),c,d)}getSpan(v,c){return this.layout.getSpan(v,c)}}function S(V){return new _((0,e.blob)(32),v=>new r.PublicKey(v),v=>v.toBuffer(),V)}n.publicKey=S;class N extends e.Layout{constructor(v,c){super(-1,c),this.layout=v,this.discriminator=(0,e.u8)()}encode(v,c,d=0){return v==null?this.discriminator.encode(0,c,d):(this.discriminator.encode(1,c,d),this.layout.encode(v,c,d+1)+1)}decode(v,c=0){const d=this.discriminator.decode(v,c);if(d===0)return null;if(d===1)return this.layout.decode(v,c+1);throw new Error("Invalid option "+this.property)}getSpan(v,c=0){const d=this.discriminator.decode(v,c);if(d===0)return 1;if(d===1)return this.layout.getSpan(v,c+1)+1;throw new Error("Invalid option "+this.property)}}function A(V,v){return new N(V,v)}n.option=A;function C(V){return new _((0,e.u8)(),D,x,V)}n.bool=C;function D(V){if(V===0)return!1;if(V===1)return!0;throw new Error("Invalid bool: "+V)}function x(V){return V?1:0}function L(V,v){const c=(0,e.u32)("length"),d=(0,e.struct)([c,(0,e.seq)(V,(0,e.offset)(c,-c.span),"values")]);return new _(d,({values:y})=>y,y=>({values:y}),v)}n.vec=L;function K(V,v,c){const d=(0,e.struct)([a("tag"),v.replicate("data")]);function y({tag:w,data:E}){if(!w.eq(V))throw new Error("Invalid tag, expected: "+V.toString("hex")+", got: "+w.toString("hex"));return E}return new _(d,y,w=>({tag:V,data:w}),c)}n.tagged=K;function Y(V){const v=(0,e.u32)("length"),c=(0,e.struct)([v,(0,e.blob)((0,e.offset)(v,-v.span),"data")]);return new _(c,({data:d})=>d,d=>({data:d}),V)}n.vecU8=Y;function $(V){return new _(Y(),v=>v.toString("utf-8"),v=>_t.from(v,"utf-8"),V)}n.str=$;function G(V,v,c){const d=(0,e.union)(c??(0,e.u8)(),v);return V.forEach((y,w)=>d.addVariant(w,y,y.property)),d}n.rustEnum=G;function j(V,v,c){const d=(0,e.struct)([(0,e.seq)(V,v,"values")]);return new _(d,({values:y})=>y,y=>({values:y}),c)}n.array=j;class tt extends e.Layout{constructor(v,c,d){super(v.span+c.span,d),this.keyLayout=v,this.valueLayout=c}decode(v,c){c=c||0;const d=this.keyLayout.decode(v,c),y=this.valueLayout.decode(v,c+this.keyLayout.getSpan(v,c));return[d,y]}encode(v,c,d){d=d||0;const y=this.keyLayout.encode(v[0],c,d),w=this.valueLayout.encode(v[1],c,d+y);return y+w}getSpan(v,c){return this.keyLayout.getSpan(v,c)+this.valueLayout.getSpan(v,c)}}function W(V,v,c){const d=(0,e.u32)("length"),y=(0,e.struct)([d,(0,e.seq)(new tt(V,v),(0,e.offset)(d,-d.span),"values")]);return new _(y,({values:w})=>new Map(w),w=>({values:Array.from(w.entries())}),c)}n.map=W})(mt);/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const s1=4,Zu=0,Yu=1,o1=2;function vi(n){let t=n.length;for(;--t>=0;)n[t]=0}const a1=0,zd=1,c1=2,u1=3,l1=258,Vc=29,as=256,Wi=as+1+Vc,ii=30,Gc=19,Hd=2*Wi+1,vr=15,da=16,h1=7,jc=256,Fd=16,$d=17,Kd=18,qa=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Ns=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),d1=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),qd=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f1=512,Kn=new Array((Wi+2)*2);vi(Kn);const Li=new Array(ii*2);vi(Li);const Vi=new Array(f1);vi(Vi);const Gi=new Array(l1-u1+1);vi(Gi);const Zc=new Array(Vc);vi(Zc);const Ks=new Array(ii);vi(Ks);function fa(n,t,e,r,i){this.static_tree=n,this.extra_bits=t,this.extra_base=e,this.elems=r,this.max_length=i,this.has_stree=n&&n.length}let Wd,Vd,Gd;function pa(n,t){this.dyn_tree=n,this.max_code=0,this.stat_desc=t}const jd=n=>n<256?Vi[n]:Vi[256+(n>>>7)],ji=(n,t)=>{n.pending_buf[n.pending++]=t&255,n.pending_buf[n.pending++]=t>>>8&255},Je=(n,t,e)=>{n.bi_valid>da-e?(n.bi_buf|=t<<n.bi_valid&65535,ji(n,n.bi_buf),n.bi_buf=t>>da-n.bi_valid,n.bi_valid+=e-da):(n.bi_buf|=t<<n.bi_valid&65535,n.bi_valid+=e)},Nn=(n,t,e)=>{Je(n,e[t*2],e[t*2+1])},Zd=(n,t)=>{let e=0;do e|=n&1,n>>>=1,e<<=1;while(--t>0);return e>>>1},p1=n=>{n.bi_valid===16?(ji(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=n.bi_buf&255,n.bi_buf>>=8,n.bi_valid-=8)},g1=(n,t)=>{const e=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,u=t.stat_desc.max_length;let h,l,b,R,_,S,N=0;for(R=0;R<=vr;R++)n.bl_count[R]=0;for(e[n.heap[n.heap_max]*2+1]=0,h=n.heap_max+1;h<Hd;h++)l=n.heap[h],R=e[e[l*2+1]*2+1]+1,R>u&&(R=u,N++),e[l*2+1]=R,!(l>r)&&(n.bl_count[R]++,_=0,l>=a&&(_=o[l-a]),S=e[l*2],n.opt_len+=S*(R+_),s&&(n.static_len+=S*(i[l*2+1]+_)));if(N!==0){do{for(R=u-1;n.bl_count[R]===0;)R--;n.bl_count[R]--,n.bl_count[R+1]+=2,n.bl_count[u]--,N-=2}while(N>0);for(R=u;R!==0;R--)for(l=n.bl_count[R];l!==0;)b=n.heap[--h],!(b>r)&&(e[b*2+1]!==R&&(n.opt_len+=(R-e[b*2+1])*e[b*2],e[b*2+1]=R),l--)}},Yd=(n,t,e)=>{const r=new Array(vr+1);let i=0,s,o;for(s=1;s<=vr;s++)i=i+e[s-1]<<1,r[s]=i;for(o=0;o<=t;o++){let a=n[o*2+1];a!==0&&(n[o*2]=Zd(r[a]++,a))}},y1=()=>{let n,t,e,r,i;const s=new Array(vr+1);for(e=0,r=0;r<Vc-1;r++)for(Zc[r]=e,n=0;n<1<<qa[r];n++)Gi[e++]=r;for(Gi[e-1]=r,i=0,r=0;r<16;r++)for(Ks[r]=i,n=0;n<1<<Ns[r];n++)Vi[i++]=r;for(i>>=7;r<ii;r++)for(Ks[r]=i<<7,n=0;n<1<<Ns[r]-7;n++)Vi[256+i++]=r;for(t=0;t<=vr;t++)s[t]=0;for(n=0;n<=143;)Kn[n*2+1]=8,n++,s[8]++;for(;n<=255;)Kn[n*2+1]=9,n++,s[9]++;for(;n<=279;)Kn[n*2+1]=7,n++,s[7]++;for(;n<=287;)Kn[n*2+1]=8,n++,s[8]++;for(Yd(Kn,Wi+1,s),n=0;n<ii;n++)Li[n*2+1]=5,Li[n*2]=Zd(n,5);Wd=new fa(Kn,qa,as+1,Wi,vr),Vd=new fa(Li,Ns,0,ii,vr),Gd=new fa(new Array(0),d1,0,Gc,h1)},Xd=n=>{let t;for(t=0;t<Wi;t++)n.dyn_ltree[t*2]=0;for(t=0;t<ii;t++)n.dyn_dtree[t*2]=0;for(t=0;t<Gc;t++)n.bl_tree[t*2]=0;n.dyn_ltree[jc*2]=1,n.opt_len=n.static_len=0,n.sym_next=n.matches=0},Jd=n=>{n.bi_valid>8?ji(n,n.bi_buf):n.bi_valid>0&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0},Xu=(n,t,e,r)=>{const i=t*2,s=e*2;return n[i]<n[s]||n[i]===n[s]&&r[t]<=r[e]},ga=(n,t,e)=>{const r=n.heap[e];let i=e<<1;for(;i<=n.heap_len&&(i<n.heap_len&&Xu(t,n.heap[i+1],n.heap[i],n.depth)&&i++,!Xu(t,r,n.heap[i],n.depth));)n.heap[e]=n.heap[i],e=i,i<<=1;n.heap[e]=r},Ju=(n,t,e)=>{let r,i,s=0,o,a;if(n.sym_next!==0)do r=n.pending_buf[n.sym_buf+s++]&255,r+=(n.pending_buf[n.sym_buf+s++]&255)<<8,i=n.pending_buf[n.sym_buf+s++],r===0?Nn(n,i,t):(o=Gi[i],Nn(n,o+as+1,t),a=qa[o],a!==0&&(i-=Zc[o],Je(n,i,a)),r--,o=jd(r),Nn(n,o,e),a=Ns[o],a!==0&&(r-=Ks[o],Je(n,r,a)));while(s<n.sym_next);Nn(n,jc,t)},Wa=(n,t)=>{const e=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,u=-1,h;for(n.heap_len=0,n.heap_max=Hd,o=0;o<s;o++)e[o*2]!==0?(n.heap[++n.heap_len]=u=o,n.depth[o]=0):e[o*2+1]=0;for(;n.heap_len<2;)h=n.heap[++n.heap_len]=u<2?++u:0,e[h*2]=1,n.depth[h]=0,n.opt_len--,i&&(n.static_len-=r[h*2+1]);for(t.max_code=u,o=n.heap_len>>1;o>=1;o--)ga(n,e,o);h=s;do o=n.heap[1],n.heap[1]=n.heap[n.heap_len--],ga(n,e,1),a=n.heap[1],n.heap[--n.heap_max]=o,n.heap[--n.heap_max]=a,e[h*2]=e[o*2]+e[a*2],n.depth[h]=(n.depth[o]>=n.depth[a]?n.depth[o]:n.depth[a])+1,e[o*2+1]=e[a*2+1]=h,n.heap[1]=h++,ga(n,e,1);while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],g1(n,t),Yd(e,u,n.bl_count)},Qu=(n,t,e)=>{let r,i=-1,s,o=t[0*2+1],a=0,u=7,h=4;for(o===0&&(u=138,h=3),t[(e+1)*2+1]=65535,r=0;r<=e;r++)s=o,o=t[(r+1)*2+1],!(++a<u&&s===o)&&(a<h?n.bl_tree[s*2]+=a:s!==0?(s!==i&&n.bl_tree[s*2]++,n.bl_tree[Fd*2]++):a<=10?n.bl_tree[$d*2]++:n.bl_tree[Kd*2]++,a=0,i=s,o===0?(u=138,h=3):s===o?(u=6,h=3):(u=7,h=4))},tl=(n,t,e)=>{let r,i=-1,s,o=t[0*2+1],a=0,u=7,h=4;for(o===0&&(u=138,h=3),r=0;r<=e;r++)if(s=o,o=t[(r+1)*2+1],!(++a<u&&s===o)){if(a<h)do Nn(n,s,n.bl_tree);while(--a!==0);else s!==0?(s!==i&&(Nn(n,s,n.bl_tree),a--),Nn(n,Fd,n.bl_tree),Je(n,a-3,2)):a<=10?(Nn(n,$d,n.bl_tree),Je(n,a-3,3)):(Nn(n,Kd,n.bl_tree),Je(n,a-11,7));a=0,i=s,o===0?(u=138,h=3):s===o?(u=6,h=3):(u=7,h=4)}},_1=n=>{let t;for(Qu(n,n.dyn_ltree,n.l_desc.max_code),Qu(n,n.dyn_dtree,n.d_desc.max_code),Wa(n,n.bl_desc),t=Gc-1;t>=3&&n.bl_tree[qd[t]*2+1]===0;t--);return n.opt_len+=3*(t+1)+5+5+4,t},w1=(n,t,e,r)=>{let i;for(Je(n,t-257,5),Je(n,e-1,5),Je(n,r-4,4),i=0;i<r;i++)Je(n,n.bl_tree[qd[i]*2+1],3);tl(n,n.dyn_ltree,t-1),tl(n,n.dyn_dtree,e-1)},m1=n=>{let t=4093624447,e;for(e=0;e<=31;e++,t>>>=1)if(t&1&&n.dyn_ltree[e*2]!==0)return Zu;if(n.dyn_ltree[9*2]!==0||n.dyn_ltree[10*2]!==0||n.dyn_ltree[13*2]!==0)return Yu;for(e=32;e<as;e++)if(n.dyn_ltree[e*2]!==0)return Yu;return Zu};let el=!1;const b1=n=>{el||(y1(),el=!0),n.l_desc=new pa(n.dyn_ltree,Wd),n.d_desc=new pa(n.dyn_dtree,Vd),n.bl_desc=new pa(n.bl_tree,Gd),n.bi_buf=0,n.bi_valid=0,Xd(n)},Qd=(n,t,e,r)=>{Je(n,(a1<<1)+(r?1:0),3),Jd(n),ji(n,e),ji(n,~e),e&&n.pending_buf.set(n.window.subarray(t,t+e),n.pending),n.pending+=e},E1=n=>{Je(n,zd<<1,3),Nn(n,jc,Kn),p1(n)},R1=(n,t,e,r)=>{let i,s,o=0;n.level>0?(n.strm.data_type===o1&&(n.strm.data_type=m1(n)),Wa(n,n.l_desc),Wa(n,n.d_desc),o=_1(n),i=n.opt_len+3+7>>>3,s=n.static_len+3+7>>>3,s<=i&&(i=s)):i=s=e+5,e+4<=i&&t!==-1?Qd(n,t,e,r):n.strategy===s1||s===i?(Je(n,(zd<<1)+(r?1:0),3),Ju(n,Kn,Li)):(Je(n,(c1<<1)+(r?1:0),3),w1(n,n.l_desc.max_code+1,n.d_desc.max_code+1,o+1),Ju(n,n.dyn_ltree,n.dyn_dtree)),Xd(n),r&&Jd(n)},A1=(n,t,e)=>(n.pending_buf[n.sym_buf+n.sym_next++]=t,n.pending_buf[n.sym_buf+n.sym_next++]=t>>8,n.pending_buf[n.sym_buf+n.sym_next++]=e,t===0?n.dyn_ltree[e*2]++:(n.matches++,t--,n.dyn_ltree[(Gi[e]+as+1)*2]++,n.dyn_dtree[jd(t)*2]++),n.sym_next===n.sym_end);var v1=b1,I1=Qd,S1=R1,k1=A1,T1=E1,O1={_tr_init:v1,_tr_stored_block:I1,_tr_flush_block:S1,_tr_tally:k1,_tr_align:T1};const N1=(n,t,e,r)=>{let i=n&65535|0,s=n>>>16&65535|0,o=0;for(;e!==0;){o=e>2e3?2e3:e,e-=o;do i=i+t[r++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0};var Zi=N1;const x1=()=>{let n,t=[];for(var e=0;e<256;e++){n=e;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;t[e]=n}return t},C1=new Uint32Array(x1()),B1=(n,t,e,r)=>{const i=C1,s=r+e;n^=-1;for(let o=r;o<s;o++)n=n>>>8^i[(n^t[o])&255];return n^-1};var Ne=B1,di={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},cs={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:M1,_tr_stored_block:Va,_tr_flush_block:L1,_tr_tally:hr,_tr_align:P1}=O1,{Z_NO_FLUSH:dr,Z_PARTIAL_FLUSH:U1,Z_FULL_FLUSH:D1,Z_FINISH:fn,Z_BLOCK:nl,Z_OK:Le,Z_STREAM_END:rl,Z_STREAM_ERROR:Cn,Z_DATA_ERROR:z1,Z_BUF_ERROR:ya,Z_DEFAULT_COMPRESSION:H1,Z_FILTERED:F1,Z_HUFFMAN_ONLY:Es,Z_RLE:$1,Z_FIXED:K1,Z_DEFAULT_STRATEGY:q1,Z_UNKNOWN:W1,Z_DEFLATED:mo}=cs,V1=9,G1=15,j1=8,Z1=29,Y1=256,Ga=Y1+1+Z1,X1=30,J1=19,Q1=2*Ga+1,tb=15,kt=3,cr=258,Bn=cr+kt+1,eb=32,fi=42,Yc=57,ja=69,Za=73,Ya=91,Xa=103,Ir=113,xi=666,We=1,Ii=2,Lr=3,Si=4,nb=3,Sr=(n,t)=>(n.msg=di[t],t),il=n=>n*2-(n>4?9:0),sr=n=>{let t=n.length;for(;--t>=0;)n[t]=0},rb=n=>{let t,e,r,i=n.w_size;t=n.hash_size,r=t;do e=n.head[--r],n.head[r]=e>=i?e-i:0;while(--t);t=i,r=t;do e=n.prev[--r],n.prev[r]=e>=i?e-i:0;while(--t)};let ib=(n,t,e)=>(t<<n.hash_shift^e)&n.hash_mask,fr=ib;const nn=n=>{const t=n.state;let e=t.pending;e>n.avail_out&&(e=n.avail_out),e!==0&&(n.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+e),n.next_out),n.next_out+=e,t.pending_out+=e,n.total_out+=e,n.avail_out-=e,t.pending-=e,t.pending===0&&(t.pending_out=0))},on=(n,t)=>{L1(n,n.block_start>=0?n.block_start:-1,n.strstart-n.block_start,t),n.block_start=n.strstart,nn(n.strm)},Pt=(n,t)=>{n.pending_buf[n.pending++]=t},Oi=(n,t)=>{n.pending_buf[n.pending++]=t>>>8&255,n.pending_buf[n.pending++]=t&255},Ja=(n,t,e,r)=>{let i=n.avail_in;return i>r&&(i=r),i===0?0:(n.avail_in-=i,t.set(n.input.subarray(n.next_in,n.next_in+i),e),n.state.wrap===1?n.adler=Zi(n.adler,t,i,e):n.state.wrap===2&&(n.adler=Ne(n.adler,t,i,e)),n.next_in+=i,n.total_in+=i,i)},tf=(n,t)=>{let e=n.max_chain_length,r=n.strstart,i,s,o=n.prev_length,a=n.nice_match;const u=n.strstart>n.w_size-Bn?n.strstart-(n.w_size-Bn):0,h=n.window,l=n.w_mask,b=n.prev,R=n.strstart+cr;let _=h[r+o-1],S=h[r+o];n.prev_length>=n.good_match&&(e>>=2),a>n.lookahead&&(a=n.lookahead);do if(i=t,!(h[i+o]!==S||h[i+o-1]!==_||h[i]!==h[r]||h[++i]!==h[r+1])){r+=2,i++;do;while(h[++r]===h[++i]&&h[++r]===h[++i]&&h[++r]===h[++i]&&h[++r]===h[++i]&&h[++r]===h[++i]&&h[++r]===h[++i]&&h[++r]===h[++i]&&h[++r]===h[++i]&&r<R);if(s=cr-(R-r),r=R-cr,s>o){if(n.match_start=t,o=s,s>=a)break;_=h[r+o-1],S=h[r+o]}}while((t=b[t&l])>u&&--e!==0);return o<=n.lookahead?o:n.lookahead},pi=n=>{const t=n.w_size;let e,r,i;do{if(r=n.window_size-n.lookahead-n.strstart,n.strstart>=t+(t-Bn)&&(n.window.set(n.window.subarray(t,t+t-r),0),n.match_start-=t,n.strstart-=t,n.block_start-=t,n.insert>n.strstart&&(n.insert=n.strstart),rb(n),r+=t),n.strm.avail_in===0)break;if(e=Ja(n.strm,n.window,n.strstart+n.lookahead,r),n.lookahead+=e,n.lookahead+n.insert>=kt)for(i=n.strstart-n.insert,n.ins_h=n.window[i],n.ins_h=fr(n,n.ins_h,n.window[i+1]);n.insert&&(n.ins_h=fr(n,n.ins_h,n.window[i+kt-1]),n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++,n.insert--,!(n.lookahead+n.insert<kt)););}while(n.lookahead<Bn&&n.strm.avail_in!==0)},ef=(n,t)=>{let e=n.pending_buf_size-5>n.w_size?n.w_size:n.pending_buf_size-5,r,i,s,o=0,a=n.strm.avail_in;do{if(r=65535,s=n.bi_valid+42>>3,n.strm.avail_out<s||(s=n.strm.avail_out-s,i=n.strstart-n.block_start,r>i+n.strm.avail_in&&(r=i+n.strm.avail_in),r>s&&(r=s),r<e&&(r===0&&t!==fn||t===dr||r!==i+n.strm.avail_in)))break;o=t===fn&&r===i+n.strm.avail_in?1:0,Va(n,0,0,o),n.pending_buf[n.pending-4]=r,n.pending_buf[n.pending-3]=r>>8,n.pending_buf[n.pending-2]=~r,n.pending_buf[n.pending-1]=~r>>8,nn(n.strm),i&&(i>r&&(i=r),n.strm.output.set(n.window.subarray(n.block_start,n.block_start+i),n.strm.next_out),n.strm.next_out+=i,n.strm.avail_out-=i,n.strm.total_out+=i,n.block_start+=i,r-=i),r&&(Ja(n.strm,n.strm.output,n.strm.next_out,r),n.strm.next_out+=r,n.strm.avail_out-=r,n.strm.total_out+=r)}while(o===0);return a-=n.strm.avail_in,a&&(a>=n.w_size?(n.matches=2,n.window.set(n.strm.input.subarray(n.strm.next_in-n.w_size,n.strm.next_in),0),n.strstart=n.w_size,n.insert=n.strstart):(n.window_size-n.strstart<=a&&(n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,n.insert>n.strstart&&(n.insert=n.strstart)),n.window.set(n.strm.input.subarray(n.strm.next_in-a,n.strm.next_in),n.strstart),n.strstart+=a,n.insert+=a>n.w_size-n.insert?n.w_size-n.insert:a),n.block_start=n.strstart),n.high_water<n.strstart&&(n.high_water=n.strstart),o?Si:t!==dr&&t!==fn&&n.strm.avail_in===0&&n.strstart===n.block_start?Ii:(s=n.window_size-n.strstart,n.strm.avail_in>s&&n.block_start>=n.w_size&&(n.block_start-=n.w_size,n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,s+=n.w_size,n.insert>n.strstart&&(n.insert=n.strstart)),s>n.strm.avail_in&&(s=n.strm.avail_in),s&&(Ja(n.strm,n.window,n.strstart,s),n.strstart+=s,n.insert+=s>n.w_size-n.insert?n.w_size-n.insert:s),n.high_water<n.strstart&&(n.high_water=n.strstart),s=n.bi_valid+42>>3,s=n.pending_buf_size-s>65535?65535:n.pending_buf_size-s,e=s>n.w_size?n.w_size:s,i=n.strstart-n.block_start,(i>=e||(i||t===fn)&&t!==dr&&n.strm.avail_in===0&&i<=s)&&(r=i>s?s:i,o=t===fn&&n.strm.avail_in===0&&r===i?1:0,Va(n,n.block_start,r,o),n.block_start+=r,nn(n.strm)),o?Lr:We)},_a=(n,t)=>{let e,r;for(;;){if(n.lookahead<Bn){if(pi(n),n.lookahead<Bn&&t===dr)return We;if(n.lookahead===0)break}if(e=0,n.lookahead>=kt&&(n.ins_h=fr(n,n.ins_h,n.window[n.strstart+kt-1]),e=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),e!==0&&n.strstart-e<=n.w_size-Bn&&(n.match_length=tf(n,e)),n.match_length>=kt)if(r=hr(n,n.strstart-n.match_start,n.match_length-kt),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=kt){n.match_length--;do n.strstart++,n.ins_h=fr(n,n.ins_h,n.window[n.strstart+kt-1]),e=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart;while(--n.match_length!==0);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=fr(n,n.ins_h,n.window[n.strstart+1]);else r=hr(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(r&&(on(n,!1),n.strm.avail_out===0))return We}return n.insert=n.strstart<kt-1?n.strstart:kt-1,t===fn?(on(n,!0),n.strm.avail_out===0?Lr:Si):n.sym_next&&(on(n,!1),n.strm.avail_out===0)?We:Ii},Vr=(n,t)=>{let e,r,i;for(;;){if(n.lookahead<Bn){if(pi(n),n.lookahead<Bn&&t===dr)return We;if(n.lookahead===0)break}if(e=0,n.lookahead>=kt&&(n.ins_h=fr(n,n.ins_h,n.window[n.strstart+kt-1]),e=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=kt-1,e!==0&&n.prev_length<n.max_lazy_match&&n.strstart-e<=n.w_size-Bn&&(n.match_length=tf(n,e),n.match_length<=5&&(n.strategy===F1||n.match_length===kt&&n.strstart-n.match_start>4096)&&(n.match_length=kt-1)),n.prev_length>=kt&&n.match_length<=n.prev_length){i=n.strstart+n.lookahead-kt,r=hr(n,n.strstart-1-n.prev_match,n.prev_length-kt),n.lookahead-=n.prev_length-1,n.prev_length-=2;do++n.strstart<=i&&(n.ins_h=fr(n,n.ins_h,n.window[n.strstart+kt-1]),e=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart);while(--n.prev_length!==0);if(n.match_available=0,n.match_length=kt-1,n.strstart++,r&&(on(n,!1),n.strm.avail_out===0))return We}else if(n.match_available){if(r=hr(n,0,n.window[n.strstart-1]),r&&on(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return We}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(r=hr(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<kt-1?n.strstart:kt-1,t===fn?(on(n,!0),n.strm.avail_out===0?Lr:Si):n.sym_next&&(on(n,!1),n.strm.avail_out===0)?We:Ii},sb=(n,t)=>{let e,r,i,s;const o=n.window;for(;;){if(n.lookahead<=cr){if(pi(n),n.lookahead<=cr&&t===dr)return We;if(n.lookahead===0)break}if(n.match_length=0,n.lookahead>=kt&&n.strstart>0&&(i=n.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){s=n.strstart+cr;do;while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<s);n.match_length=cr-(s-i),n.match_length>n.lookahead&&(n.match_length=n.lookahead)}if(n.match_length>=kt?(e=hr(n,1,n.match_length-kt),n.lookahead-=n.match_length,n.strstart+=n.match_length,n.match_length=0):(e=hr(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++),e&&(on(n,!1),n.strm.avail_out===0))return We}return n.insert=0,t===fn?(on(n,!0),n.strm.avail_out===0?Lr:Si):n.sym_next&&(on(n,!1),n.strm.avail_out===0)?We:Ii},ob=(n,t)=>{let e;for(;;){if(n.lookahead===0&&(pi(n),n.lookahead===0)){if(t===dr)return We;break}if(n.match_length=0,e=hr(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++,e&&(on(n,!1),n.strm.avail_out===0))return We}return n.insert=0,t===fn?(on(n,!0),n.strm.avail_out===0?Lr:Si):n.sym_next&&(on(n,!1),n.strm.avail_out===0)?We:Ii};function vn(n,t,e,r,i){this.good_length=n,this.max_lazy=t,this.nice_length=e,this.max_chain=r,this.func=i}const Ci=[new vn(0,0,0,0,ef),new vn(4,4,8,4,_a),new vn(4,5,16,8,_a),new vn(4,6,32,32,_a),new vn(4,4,16,16,Vr),new vn(8,16,32,32,Vr),new vn(8,16,128,128,Vr),new vn(8,32,128,256,Vr),new vn(32,128,258,1024,Vr),new vn(32,258,258,4096,Vr)],ab=n=>{n.window_size=2*n.w_size,sr(n.head),n.max_lazy_match=Ci[n.level].max_lazy,n.good_match=Ci[n.level].good_length,n.nice_match=Ci[n.level].nice_length,n.max_chain_length=Ci[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=kt-1,n.match_available=0,n.ins_h=0};function cb(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=mo,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Q1*2),this.dyn_dtree=new Uint16Array((2*X1+1)*2),this.bl_tree=new Uint16Array((2*J1+1)*2),sr(this.dyn_ltree),sr(this.dyn_dtree),sr(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(tb+1),this.heap=new Uint16Array(2*Ga+1),sr(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Ga+1),sr(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const us=n=>{if(!n)return 1;const t=n.state;return!t||t.strm!==n||t.status!==fi&&t.status!==Yc&&t.status!==ja&&t.status!==Za&&t.status!==Ya&&t.status!==Xa&&t.status!==Ir&&t.status!==xi?1:0},nf=n=>{if(us(n))return Sr(n,Cn);n.total_in=n.total_out=0,n.data_type=W1;const t=n.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?Yc:t.wrap?fi:Ir,n.adler=t.wrap===2?0:1,t.last_flush=-2,M1(t),Le},rf=n=>{const t=nf(n);return t===Le&&ab(n.state),t},ub=(n,t)=>us(n)||n.state.wrap!==2?Cn:(n.state.gzhead=t,Le),sf=(n,t,e,r,i,s)=>{if(!n)return Cn;let o=1;if(t===H1&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>V1||e!==mo||r<8||r>15||t<0||t>9||s<0||s>K1||r===8&&o!==1)return Sr(n,Cn);r===8&&(r=9);const a=new cb;return n.state=a,a.strm=n,a.status=fi,a.wrap=o,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+kt-1)/kt),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=t,a.strategy=s,a.method=e,rf(n)},lb=(n,t)=>sf(n,t,mo,G1,j1,q1),hb=(n,t)=>{if(us(n)||t>nl||t<0)return n?Sr(n,Cn):Cn;const e=n.state;if(!n.output||n.avail_in!==0&&!n.input||e.status===xi&&t!==fn)return Sr(n,n.avail_out===0?ya:Cn);const r=e.last_flush;if(e.last_flush=t,e.pending!==0){if(nn(n),n.avail_out===0)return e.last_flush=-1,Le}else if(n.avail_in===0&&il(t)<=il(r)&&t!==fn)return Sr(n,ya);if(e.status===xi&&n.avail_in!==0)return Sr(n,ya);if(e.status===fi&&e.wrap===0&&(e.status=Ir),e.status===fi){let i=mo+(e.w_bits-8<<4)<<8,s=-1;if(e.strategy>=Es||e.level<2?s=0:e.level<6?s=1:e.level===6?s=2:s=3,i|=s<<6,e.strstart!==0&&(i|=eb),i+=31-i%31,Oi(e,i),e.strstart!==0&&(Oi(e,n.adler>>>16),Oi(e,n.adler&65535)),n.adler=1,e.status=Ir,nn(n),e.pending!==0)return e.last_flush=-1,Le}if(e.status===Yc){if(n.adler=0,Pt(e,31),Pt(e,139),Pt(e,8),e.gzhead)Pt(e,(e.gzhead.text?1:0)+(e.gzhead.hcrc?2:0)+(e.gzhead.extra?4:0)+(e.gzhead.name?8:0)+(e.gzhead.comment?16:0)),Pt(e,e.gzhead.time&255),Pt(e,e.gzhead.time>>8&255),Pt(e,e.gzhead.time>>16&255),Pt(e,e.gzhead.time>>24&255),Pt(e,e.level===9?2:e.strategy>=Es||e.level<2?4:0),Pt(e,e.gzhead.os&255),e.gzhead.extra&&e.gzhead.extra.length&&(Pt(e,e.gzhead.extra.length&255),Pt(e,e.gzhead.extra.length>>8&255)),e.gzhead.hcrc&&(n.adler=Ne(n.adler,e.pending_buf,e.pending,0)),e.gzindex=0,e.status=ja;else if(Pt(e,0),Pt(e,0),Pt(e,0),Pt(e,0),Pt(e,0),Pt(e,e.level===9?2:e.strategy>=Es||e.level<2?4:0),Pt(e,nb),e.status=Ir,nn(n),e.pending!==0)return e.last_flush=-1,Le}if(e.status===ja){if(e.gzhead.extra){let i=e.pending,s=(e.gzhead.extra.length&65535)-e.gzindex;for(;e.pending+s>e.pending_buf_size;){let a=e.pending_buf_size-e.pending;if(e.pending_buf.set(e.gzhead.extra.subarray(e.gzindex,e.gzindex+a),e.pending),e.pending=e.pending_buf_size,e.gzhead.hcrc&&e.pending>i&&(n.adler=Ne(n.adler,e.pending_buf,e.pending-i,i)),e.gzindex+=a,nn(n),e.pending!==0)return e.last_flush=-1,Le;i=0,s-=a}let o=new Uint8Array(e.gzhead.extra);e.pending_buf.set(o.subarray(e.gzindex,e.gzindex+s),e.pending),e.pending+=s,e.gzhead.hcrc&&e.pending>i&&(n.adler=Ne(n.adler,e.pending_buf,e.pending-i,i)),e.gzindex=0}e.status=Za}if(e.status===Za){if(e.gzhead.name){let i=e.pending,s;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>i&&(n.adler=Ne(n.adler,e.pending_buf,e.pending-i,i)),nn(n),e.pending!==0)return e.last_flush=-1,Le;i=0}e.gzindex<e.gzhead.name.length?s=e.gzhead.name.charCodeAt(e.gzindex++)&255:s=0,Pt(e,s)}while(s!==0);e.gzhead.hcrc&&e.pending>i&&(n.adler=Ne(n.adler,e.pending_buf,e.pending-i,i)),e.gzindex=0}e.status=Ya}if(e.status===Ya){if(e.gzhead.comment){let i=e.pending,s;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>i&&(n.adler=Ne(n.adler,e.pending_buf,e.pending-i,i)),nn(n),e.pending!==0)return e.last_flush=-1,Le;i=0}e.gzindex<e.gzhead.comment.length?s=e.gzhead.comment.charCodeAt(e.gzindex++)&255:s=0,Pt(e,s)}while(s!==0);e.gzhead.hcrc&&e.pending>i&&(n.adler=Ne(n.adler,e.pending_buf,e.pending-i,i))}e.status=Xa}if(e.status===Xa){if(e.gzhead.hcrc){if(e.pending+2>e.pending_buf_size&&(nn(n),e.pending!==0))return e.last_flush=-1,Le;Pt(e,n.adler&255),Pt(e,n.adler>>8&255),n.adler=0}if(e.status=Ir,nn(n),e.pending!==0)return e.last_flush=-1,Le}if(n.avail_in!==0||e.lookahead!==0||t!==dr&&e.status!==xi){let i=e.level===0?ef(e,t):e.strategy===Es?ob(e,t):e.strategy===$1?sb(e,t):Ci[e.level].func(e,t);if((i===Lr||i===Si)&&(e.status=xi),i===We||i===Lr)return n.avail_out===0&&(e.last_flush=-1),Le;if(i===Ii&&(t===U1?P1(e):t!==nl&&(Va(e,0,0,!1),t===D1&&(sr(e.head),e.lookahead===0&&(e.strstart=0,e.block_start=0,e.insert=0))),nn(n),n.avail_out===0))return e.last_flush=-1,Le}return t!==fn?Le:e.wrap<=0?rl:(e.wrap===2?(Pt(e,n.adler&255),Pt(e,n.adler>>8&255),Pt(e,n.adler>>16&255),Pt(e,n.adler>>24&255),Pt(e,n.total_in&255),Pt(e,n.total_in>>8&255),Pt(e,n.total_in>>16&255),Pt(e,n.total_in>>24&255)):(Oi(e,n.adler>>>16),Oi(e,n.adler&65535)),nn(n),e.wrap>0&&(e.wrap=-e.wrap),e.pending!==0?Le:rl)},db=n=>{if(us(n))return Cn;const t=n.state.status;return n.state=null,t===Ir?Sr(n,z1):Le},fb=(n,t)=>{let e=t.length;if(us(n))return Cn;const r=n.state,i=r.wrap;if(i===2||i===1&&r.status!==fi||r.lookahead)return Cn;if(i===1&&(n.adler=Zi(n.adler,t,e,0)),r.wrap=0,e>=r.w_size){i===0&&(sr(r.head),r.strstart=0,r.block_start=0,r.insert=0);let u=new Uint8Array(r.w_size);u.set(t.subarray(e-r.w_size,e),0),t=u,e=r.w_size}const s=n.avail_in,o=n.next_in,a=n.input;for(n.avail_in=e,n.next_in=0,n.input=t,pi(r);r.lookahead>=kt;){let u=r.strstart,h=r.lookahead-(kt-1);do r.ins_h=fr(r,r.ins_h,r.window[u+kt-1]),r.prev[u&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=u,u++;while(--h);r.strstart=u,r.lookahead=kt-1,pi(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=kt-1,r.match_available=0,n.next_in=o,n.input=a,n.avail_in=s,r.wrap=i,Le};var pb=lb,gb=sf,yb=rf,_b=nf,wb=ub,mb=hb,bb=db,Eb=fb,Rb="pako deflate (from Nodeca project)",Pi={deflateInit:pb,deflateInit2:gb,deflateReset:yb,deflateResetKeep:_b,deflateSetHeader:wb,deflate:mb,deflateEnd:bb,deflateSetDictionary:Eb,deflateInfo:Rb};const Ab=(n,t)=>Object.prototype.hasOwnProperty.call(n,t);var vb=function(n){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const e=t.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(const r in e)Ab(e,r)&&(n[r]=e[r])}}return n},Ib=n=>{let t=0;for(let r=0,i=n.length;r<i;r++)t+=n[r].length;const e=new Uint8Array(t);for(let r=0,i=0,s=n.length;r<s;r++){let o=n[r];e.set(o,i),i+=o.length}return e},bo={assign:vb,flattenChunks:Ib};let of=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{of=!1}const Yi=new Uint8Array(256);for(let n=0;n<256;n++)Yi[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;Yi[254]=Yi[254]=1;var Sb=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let t,e,r,i,s,o=n.length,a=0;for(i=0;i<o;i++)e=n.charCodeAt(i),(e&64512)===55296&&i+1<o&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(e=65536+(e-55296<<10)+(r-56320),i++)),a+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Uint8Array(a),s=0,i=0;s<a;i++)e=n.charCodeAt(i),(e&64512)===55296&&i+1<o&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(e=65536+(e-55296<<10)+(r-56320),i++)),e<128?t[s++]=e:e<2048?(t[s++]=192|e>>>6,t[s++]=128|e&63):e<65536?(t[s++]=224|e>>>12,t[s++]=128|e>>>6&63,t[s++]=128|e&63):(t[s++]=240|e>>>18,t[s++]=128|e>>>12&63,t[s++]=128|e>>>6&63,t[s++]=128|e&63);return t};const kb=(n,t)=>{if(t<65534&&n.subarray&&of)return String.fromCharCode.apply(null,n.length===t?n:n.subarray(0,t));let e="";for(let r=0;r<t;r++)e+=String.fromCharCode(n[r]);return e};var Tb=(n,t)=>{const e=t||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,t));let r,i;const s=new Array(e*2);for(i=0,r=0;r<e;){let o=n[r++];if(o<128){s[i++]=o;continue}let a=Yi[o];if(a>4){s[i++]=65533,r+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&r<e;)o=o<<6|n[r++]&63,a--;if(a>1){s[i++]=65533;continue}o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|o&1023)}return kb(s,i)},Ob=(n,t)=>{t=t||n.length,t>n.length&&(t=n.length);let e=t-1;for(;e>=0&&(n[e]&192)===128;)e--;return e<0||e===0?t:e+Yi[n[e]]>t?e:t},Xi={string2buf:Sb,buf2string:Tb,utf8border:Ob};function Nb(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var af=Nb;const cf=Object.prototype.toString,{Z_NO_FLUSH:xb,Z_SYNC_FLUSH:Cb,Z_FULL_FLUSH:Bb,Z_FINISH:Mb,Z_OK:qs,Z_STREAM_END:Lb,Z_DEFAULT_COMPRESSION:Pb,Z_DEFAULT_STRATEGY:Ub,Z_DEFLATED:Db}=cs;function Xc(n){this.options=bo.assign({level:Pb,method:Db,chunkSize:16384,windowBits:15,memLevel:8,strategy:Ub},n||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new af,this.strm.avail_out=0;let e=Pi.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(e!==qs)throw new Error(di[e]);if(t.header&&Pi.deflateSetHeader(this.strm,t.header),t.dictionary){let r;if(typeof t.dictionary=="string"?r=Xi.string2buf(t.dictionary):cf.call(t.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(t.dictionary):r=t.dictionary,e=Pi.deflateSetDictionary(this.strm,r),e!==qs)throw new Error(di[e]);this._dict_set=!0}}Xc.prototype.push=function(n,t){const e=this.strm,r=this.options.chunkSize;let i,s;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?Mb:xb,typeof n=="string"?e.input=Xi.string2buf(n):cf.call(n)==="[object ArrayBuffer]"?e.input=new Uint8Array(n):e.input=n,e.next_in=0,e.avail_in=e.input.length;;){if(e.avail_out===0&&(e.output=new Uint8Array(r),e.next_out=0,e.avail_out=r),(s===Cb||s===Bb)&&e.avail_out<=6){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(i=Pi.deflate(e,s),i===Lb)return e.next_out>0&&this.onData(e.output.subarray(0,e.next_out)),i=Pi.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===qs;if(e.avail_out===0){this.onData(e.output);continue}if(s>0&&e.next_out>0){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(e.avail_in===0)break}return!0};Xc.prototype.onData=function(n){this.chunks.push(n)};Xc.prototype.onEnd=function(n){n===qs&&(this.result=bo.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};const Rs=16209,zb=16191;var Hb=function(t,e){let r,i,s,o,a,u,h,l,b,R,_,S,N,A,C,D,x,L,K,Y,$,G,j,tt;const W=t.state;r=t.next_in,j=t.input,i=r+(t.avail_in-5),s=t.next_out,tt=t.output,o=s-(e-t.avail_out),a=s+(t.avail_out-257),u=W.dmax,h=W.wsize,l=W.whave,b=W.wnext,R=W.window,_=W.hold,S=W.bits,N=W.lencode,A=W.distcode,C=(1<<W.lenbits)-1,D=(1<<W.distbits)-1;t:do{S<15&&(_+=j[r++]<<S,S+=8,_+=j[r++]<<S,S+=8),x=N[_&C];e:for(;;){if(L=x>>>24,_>>>=L,S-=L,L=x>>>16&255,L===0)tt[s++]=x&65535;else if(L&16){K=x&65535,L&=15,L&&(S<L&&(_+=j[r++]<<S,S+=8),K+=_&(1<<L)-1,_>>>=L,S-=L),S<15&&(_+=j[r++]<<S,S+=8,_+=j[r++]<<S,S+=8),x=A[_&D];n:for(;;){if(L=x>>>24,_>>>=L,S-=L,L=x>>>16&255,L&16){if(Y=x&65535,L&=15,S<L&&(_+=j[r++]<<S,S+=8,S<L&&(_+=j[r++]<<S,S+=8)),Y+=_&(1<<L)-1,Y>u){t.msg="invalid distance too far back",W.mode=Rs;break t}if(_>>>=L,S-=L,L=s-o,Y>L){if(L=Y-L,L>l&&W.sane){t.msg="invalid distance too far back",W.mode=Rs;break t}if($=0,G=R,b===0){if($+=h-L,L<K){K-=L;do tt[s++]=R[$++];while(--L);$=s-Y,G=tt}}else if(b<L){if($+=h+b-L,L-=b,L<K){K-=L;do tt[s++]=R[$++];while(--L);if($=0,b<K){L=b,K-=L;do tt[s++]=R[$++];while(--L);$=s-Y,G=tt}}}else if($+=b-L,L<K){K-=L;do tt[s++]=R[$++];while(--L);$=s-Y,G=tt}for(;K>2;)tt[s++]=G[$++],tt[s++]=G[$++],tt[s++]=G[$++],K-=3;K&&(tt[s++]=G[$++],K>1&&(tt[s++]=G[$++]))}else{$=s-Y;do tt[s++]=tt[$++],tt[s++]=tt[$++],tt[s++]=tt[$++],K-=3;while(K>2);K&&(tt[s++]=tt[$++],K>1&&(tt[s++]=tt[$++]))}}else if(L&64){t.msg="invalid distance code",W.mode=Rs;break t}else{x=A[(x&65535)+(_&(1<<L)-1)];continue n}break}}else if(L&64)if(L&32){W.mode=zb;break t}else{t.msg="invalid literal/length code",W.mode=Rs;break t}else{x=N[(x&65535)+(_&(1<<L)-1)];continue e}break}}while(r<i&&s<a);K=S>>3,r-=K,S-=K<<3,_&=(1<<S)-1,t.next_in=r,t.next_out=s,t.avail_in=r<i?5+(i-r):5-(r-i),t.avail_out=s<a?257+(a-s):257-(s-a),W.hold=_,W.bits=S};const Gr=15,sl=852,ol=592,al=0,wa=1,cl=2,Fb=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),$b=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Kb=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),qb=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Wb=(n,t,e,r,i,s,o,a)=>{const u=a.bits;let h=0,l=0,b=0,R=0,_=0,S=0,N=0,A=0,C=0,D=0,x,L,K,Y,$,G=null,j;const tt=new Uint16Array(Gr+1),W=new Uint16Array(Gr+1);let V=null,v,c,d;for(h=0;h<=Gr;h++)tt[h]=0;for(l=0;l<r;l++)tt[t[e+l]]++;for(_=u,R=Gr;R>=1&&tt[R]===0;R--);if(_>R&&(_=R),R===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,a.bits=1,0;for(b=1;b<R&&tt[b]===0;b++);for(_<b&&(_=b),A=1,h=1;h<=Gr;h++)if(A<<=1,A-=tt[h],A<0)return-1;if(A>0&&(n===al||R!==1))return-1;for(W[1]=0,h=1;h<Gr;h++)W[h+1]=W[h]+tt[h];for(l=0;l<r;l++)t[e+l]!==0&&(o[W[t[e+l]]++]=l);if(n===al?(G=V=o,j=20):n===wa?(G=Fb,V=$b,j=257):(G=Kb,V=qb,j=0),D=0,l=0,h=b,$=s,S=_,N=0,K=-1,C=1<<_,Y=C-1,n===wa&&C>sl||n===cl&&C>ol)return 1;for(;;){v=h-N,o[l]+1<j?(c=0,d=o[l]):o[l]>=j?(c=V[o[l]-j],d=G[o[l]-j]):(c=96,d=0),x=1<<h-N,L=1<<S,b=L;do L-=x,i[$+(D>>N)+L]=v<<24|c<<16|d|0;while(L!==0);for(x=1<<h-1;D&x;)x>>=1;if(x!==0?(D&=x-1,D+=x):D=0,l++,--tt[h]===0){if(h===R)break;h=t[e+o[l]]}if(h>_&&(D&Y)!==K){for(N===0&&(N=_),$+=b,S=h-N,A=1<<S;S+N<R&&(A-=tt[S+N],!(A<=0));)S++,A<<=1;if(C+=1<<S,n===wa&&C>sl||n===cl&&C>ol)return 1;K=D&Y,i[K]=_<<24|S<<16|$-s|0}}return D!==0&&(i[$+D]=h-N<<24|64<<16|0),a.bits=_,0};var Ui=Wb;const Vb=0,uf=1,lf=2,{Z_FINISH:ul,Z_BLOCK:Gb,Z_TREES:As,Z_OK:Pr,Z_STREAM_END:jb,Z_NEED_DICT:Zb,Z_STREAM_ERROR:gn,Z_DATA_ERROR:hf,Z_MEM_ERROR:df,Z_BUF_ERROR:Yb,Z_DEFLATED:ll}=cs,Eo=16180,hl=16181,dl=16182,fl=16183,pl=16184,gl=16185,yl=16186,_l=16187,wl=16188,ml=16189,Ws=16190,Hn=16191,ma=16192,bl=16193,ba=16194,El=16195,Rl=16196,Al=16197,vl=16198,vs=16199,Is=16200,Il=16201,Sl=16202,kl=16203,Tl=16204,Ol=16205,Ea=16206,Nl=16207,xl=16208,te=16209,ff=16210,pf=16211,Xb=852,Jb=592,Qb=15,tE=Qb,Cl=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function eE(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const $r=n=>{if(!n)return 1;const t=n.state;return!t||t.strm!==n||t.mode<Eo||t.mode>pf?1:0},gf=n=>{if($r(n))return gn;const t=n.state;return n.total_in=n.total_out=t.total=0,n.msg="",t.wrap&&(n.adler=t.wrap&1),t.mode=Eo,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Xb),t.distcode=t.distdyn=new Int32Array(Jb),t.sane=1,t.back=-1,Pr},yf=n=>{if($r(n))return gn;const t=n.state;return t.wsize=0,t.whave=0,t.wnext=0,gf(n)},_f=(n,t)=>{let e;if($r(n))return gn;const r=n.state;return t<0?(e=0,t=-t):(e=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?gn:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=e,r.wbits=t,yf(n))},wf=(n,t)=>{if(!n)return gn;const e=new eE;n.state=e,e.strm=n,e.window=null,e.mode=Eo;const r=_f(n,t);return r!==Pr&&(n.state=null),r},nE=n=>wf(n,tE);let Bl=!0,Ra,Aa;const rE=n=>{if(Bl){Ra=new Int32Array(512),Aa=new Int32Array(32);let t=0;for(;t<144;)n.lens[t++]=8;for(;t<256;)n.lens[t++]=9;for(;t<280;)n.lens[t++]=7;for(;t<288;)n.lens[t++]=8;for(Ui(uf,n.lens,0,288,Ra,0,n.work,{bits:9}),t=0;t<32;)n.lens[t++]=5;Ui(lf,n.lens,0,32,Aa,0,n.work,{bits:5}),Bl=!1}n.lencode=Ra,n.lenbits=9,n.distcode=Aa,n.distbits=5},mf=(n,t,e,r)=>{let i;const s=n.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(t.subarray(e-s.wsize,e),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(t.subarray(e-r,e-r+i),s.wnext),r-=i,r?(s.window.set(t.subarray(e-r,e),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},iE=(n,t)=>{let e,r,i,s,o,a,u,h,l,b,R,_,S,N,A=0,C,D,x,L,K,Y,$,G;const j=new Uint8Array(4);let tt,W;const V=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if($r(n)||!n.output||!n.input&&n.avail_in!==0)return gn;e=n.state,e.mode===Hn&&(e.mode=ma),o=n.next_out,i=n.output,u=n.avail_out,s=n.next_in,r=n.input,a=n.avail_in,h=e.hold,l=e.bits,b=a,R=u,G=Pr;t:for(;;)switch(e.mode){case Eo:if(e.wrap===0){e.mode=ma;break}for(;l<16;){if(a===0)break t;a--,h+=r[s++]<<l,l+=8}if(e.wrap&2&&h===35615){e.wbits===0&&(e.wbits=15),e.check=0,j[0]=h&255,j[1]=h>>>8&255,e.check=Ne(e.check,j,2,0),h=0,l=0,e.mode=hl;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((h&255)<<8)+(h>>8))%31){n.msg="incorrect header check",e.mode=te;break}if((h&15)!==ll){n.msg="unknown compression method",e.mode=te;break}if(h>>>=4,l-=4,$=(h&15)+8,e.wbits===0&&(e.wbits=$),$>15||$>e.wbits){n.msg="invalid window size",e.mode=te;break}e.dmax=1<<e.wbits,e.flags=0,n.adler=e.check=1,e.mode=h&512?ml:Hn,h=0,l=0;break;case hl:for(;l<16;){if(a===0)break t;a--,h+=r[s++]<<l,l+=8}if(e.flags=h,(e.flags&255)!==ll){n.msg="unknown compression method",e.mode=te;break}if(e.flags&57344){n.msg="unknown header flags set",e.mode=te;break}e.head&&(e.head.text=h>>8&1),e.flags&512&&e.wrap&4&&(j[0]=h&255,j[1]=h>>>8&255,e.check=Ne(e.check,j,2,0)),h=0,l=0,e.mode=dl;case dl:for(;l<32;){if(a===0)break t;a--,h+=r[s++]<<l,l+=8}e.head&&(e.head.time=h),e.flags&512&&e.wrap&4&&(j[0]=h&255,j[1]=h>>>8&255,j[2]=h>>>16&255,j[3]=h>>>24&255,e.check=Ne(e.check,j,4,0)),h=0,l=0,e.mode=fl;case fl:for(;l<16;){if(a===0)break t;a--,h+=r[s++]<<l,l+=8}e.head&&(e.head.xflags=h&255,e.head.os=h>>8),e.flags&512&&e.wrap&4&&(j[0]=h&255,j[1]=h>>>8&255,e.check=Ne(e.check,j,2,0)),h=0,l=0,e.mode=pl;case pl:if(e.flags&1024){for(;l<16;){if(a===0)break t;a--,h+=r[s++]<<l,l+=8}e.length=h,e.head&&(e.head.extra_len=h),e.flags&512&&e.wrap&4&&(j[0]=h&255,j[1]=h>>>8&255,e.check=Ne(e.check,j,2,0)),h=0,l=0}else e.head&&(e.head.extra=null);e.mode=gl;case gl:if(e.flags&1024&&(_=e.length,_>a&&(_=a),_&&(e.head&&($=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(r.subarray(s,s+_),$)),e.flags&512&&e.wrap&4&&(e.check=Ne(e.check,r,_,s)),a-=_,s+=_,e.length-=_),e.length))break t;e.length=0,e.mode=yl;case yl:if(e.flags&2048){if(a===0)break t;_=0;do $=r[s+_++],e.head&&$&&e.length<65536&&(e.head.name+=String.fromCharCode($));while($&&_<a);if(e.flags&512&&e.wrap&4&&(e.check=Ne(e.check,r,_,s)),a-=_,s+=_,$)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=_l;case _l:if(e.flags&4096){if(a===0)break t;_=0;do $=r[s+_++],e.head&&$&&e.length<65536&&(e.head.comment+=String.fromCharCode($));while($&&_<a);if(e.flags&512&&e.wrap&4&&(e.check=Ne(e.check,r,_,s)),a-=_,s+=_,$)break t}else e.head&&(e.head.comment=null);e.mode=wl;case wl:if(e.flags&512){for(;l<16;){if(a===0)break t;a--,h+=r[s++]<<l,l+=8}if(e.wrap&4&&h!==(e.check&65535)){n.msg="header crc mismatch",e.mode=te;break}h=0,l=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),n.adler=e.check=0,e.mode=Hn;break;case ml:for(;l<32;){if(a===0)break t;a--,h+=r[s++]<<l,l+=8}n.adler=e.check=Cl(h),h=0,l=0,e.mode=Ws;case Ws:if(e.havedict===0)return n.next_out=o,n.avail_out=u,n.next_in=s,n.avail_in=a,e.hold=h,e.bits=l,Zb;n.adler=e.check=1,e.mode=Hn;case Hn:if(t===Gb||t===As)break t;case ma:if(e.last){h>>>=l&7,l-=l&7,e.mode=Ea;break}for(;l<3;){if(a===0)break t;a--,h+=r[s++]<<l,l+=8}switch(e.last=h&1,h>>>=1,l-=1,h&3){case 0:e.mode=bl;break;case 1:if(rE(e),e.mode=vs,t===As){h>>>=2,l-=2;break t}break;case 2:e.mode=Rl;break;case 3:n.msg="invalid block type",e.mode=te}h>>>=2,l-=2;break;case bl:for(h>>>=l&7,l-=l&7;l<32;){if(a===0)break t;a--,h+=r[s++]<<l,l+=8}if((h&65535)!==(h>>>16^65535)){n.msg="invalid stored block lengths",e.mode=te;break}if(e.length=h&65535,h=0,l=0,e.mode=ba,t===As)break t;case ba:e.mode=El;case El:if(_=e.length,_){if(_>a&&(_=a),_>u&&(_=u),_===0)break t;i.set(r.subarray(s,s+_),o),a-=_,s+=_,u-=_,o+=_,e.length-=_;break}e.mode=Hn;break;case Rl:for(;l<14;){if(a===0)break t;a--,h+=r[s++]<<l,l+=8}if(e.nlen=(h&31)+257,h>>>=5,l-=5,e.ndist=(h&31)+1,h>>>=5,l-=5,e.ncode=(h&15)+4,h>>>=4,l-=4,e.nlen>286||e.ndist>30){n.msg="too many length or distance symbols",e.mode=te;break}e.have=0,e.mode=Al;case Al:for(;e.have<e.ncode;){for(;l<3;){if(a===0)break t;a--,h+=r[s++]<<l,l+=8}e.lens[V[e.have++]]=h&7,h>>>=3,l-=3}for(;e.have<19;)e.lens[V[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,tt={bits:e.lenbits},G=Ui(Vb,e.lens,0,19,e.lencode,0,e.work,tt),e.lenbits=tt.bits,G){n.msg="invalid code lengths set",e.mode=te;break}e.have=0,e.mode=vl;case vl:for(;e.have<e.nlen+e.ndist;){for(;A=e.lencode[h&(1<<e.lenbits)-1],C=A>>>24,D=A>>>16&255,x=A&65535,!(C<=l);){if(a===0)break t;a--,h+=r[s++]<<l,l+=8}if(x<16)h>>>=C,l-=C,e.lens[e.have++]=x;else{if(x===16){for(W=C+2;l<W;){if(a===0)break t;a--,h+=r[s++]<<l,l+=8}if(h>>>=C,l-=C,e.have===0){n.msg="invalid bit length repeat",e.mode=te;break}$=e.lens[e.have-1],_=3+(h&3),h>>>=2,l-=2}else if(x===17){for(W=C+3;l<W;){if(a===0)break t;a--,h+=r[s++]<<l,l+=8}h>>>=C,l-=C,$=0,_=3+(h&7),h>>>=3,l-=3}else{for(W=C+7;l<W;){if(a===0)break t;a--,h+=r[s++]<<l,l+=8}h>>>=C,l-=C,$=0,_=11+(h&127),h>>>=7,l-=7}if(e.have+_>e.nlen+e.ndist){n.msg="invalid bit length repeat",e.mode=te;break}for(;_--;)e.lens[e.have++]=$}}if(e.mode===te)break;if(e.lens[256]===0){n.msg="invalid code -- missing end-of-block",e.mode=te;break}if(e.lenbits=9,tt={bits:e.lenbits},G=Ui(uf,e.lens,0,e.nlen,e.lencode,0,e.work,tt),e.lenbits=tt.bits,G){n.msg="invalid literal/lengths set",e.mode=te;break}if(e.distbits=6,e.distcode=e.distdyn,tt={bits:e.distbits},G=Ui(lf,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,tt),e.distbits=tt.bits,G){n.msg="invalid distances set",e.mode=te;break}if(e.mode=vs,t===As)break t;case vs:e.mode=Is;case Is:if(a>=6&&u>=258){n.next_out=o,n.avail_out=u,n.next_in=s,n.avail_in=a,e.hold=h,e.bits=l,Hb(n,R),o=n.next_out,i=n.output,u=n.avail_out,s=n.next_in,r=n.input,a=n.avail_in,h=e.hold,l=e.bits,e.mode===Hn&&(e.back=-1);break}for(e.back=0;A=e.lencode[h&(1<<e.lenbits)-1],C=A>>>24,D=A>>>16&255,x=A&65535,!(C<=l);){if(a===0)break t;a--,h+=r[s++]<<l,l+=8}if(D&&!(D&240)){for(L=C,K=D,Y=x;A=e.lencode[Y+((h&(1<<L+K)-1)>>L)],C=A>>>24,D=A>>>16&255,x=A&65535,!(L+C<=l);){if(a===0)break t;a--,h+=r[s++]<<l,l+=8}h>>>=L,l-=L,e.back+=L}if(h>>>=C,l-=C,e.back+=C,e.length=x,D===0){e.mode=Ol;break}if(D&32){e.back=-1,e.mode=Hn;break}if(D&64){n.msg="invalid literal/length code",e.mode=te;break}e.extra=D&15,e.mode=Il;case Il:if(e.extra){for(W=e.extra;l<W;){if(a===0)break t;a--,h+=r[s++]<<l,l+=8}e.length+=h&(1<<e.extra)-1,h>>>=e.extra,l-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=Sl;case Sl:for(;A=e.distcode[h&(1<<e.distbits)-1],C=A>>>24,D=A>>>16&255,x=A&65535,!(C<=l);){if(a===0)break t;a--,h+=r[s++]<<l,l+=8}if(!(D&240)){for(L=C,K=D,Y=x;A=e.distcode[Y+((h&(1<<L+K)-1)>>L)],C=A>>>24,D=A>>>16&255,x=A&65535,!(L+C<=l);){if(a===0)break t;a--,h+=r[s++]<<l,l+=8}h>>>=L,l-=L,e.back+=L}if(h>>>=C,l-=C,e.back+=C,D&64){n.msg="invalid distance code",e.mode=te;break}e.offset=x,e.extra=D&15,e.mode=kl;case kl:if(e.extra){for(W=e.extra;l<W;){if(a===0)break t;a--,h+=r[s++]<<l,l+=8}e.offset+=h&(1<<e.extra)-1,h>>>=e.extra,l-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){n.msg="invalid distance too far back",e.mode=te;break}e.mode=Tl;case Tl:if(u===0)break t;if(_=R-u,e.offset>_){if(_=e.offset-_,_>e.whave&&e.sane){n.msg="invalid distance too far back",e.mode=te;break}_>e.wnext?(_-=e.wnext,S=e.wsize-_):S=e.wnext-_,_>e.length&&(_=e.length),N=e.window}else N=i,S=o-e.offset,_=e.length;_>u&&(_=u),u-=_,e.length-=_;do i[o++]=N[S++];while(--_);e.length===0&&(e.mode=Is);break;case Ol:if(u===0)break t;i[o++]=e.length,u--,e.mode=Is;break;case Ea:if(e.wrap){for(;l<32;){if(a===0)break t;a--,h|=r[s++]<<l,l+=8}if(R-=u,n.total_out+=R,e.total+=R,e.wrap&4&&R&&(n.adler=e.check=e.flags?Ne(e.check,i,R,o-R):Zi(e.check,i,R,o-R)),R=u,e.wrap&4&&(e.flags?h:Cl(h))!==e.check){n.msg="incorrect data check",e.mode=te;break}h=0,l=0}e.mode=Nl;case Nl:if(e.wrap&&e.flags){for(;l<32;){if(a===0)break t;a--,h+=r[s++]<<l,l+=8}if(e.wrap&4&&h!==(e.total&4294967295)){n.msg="incorrect length check",e.mode=te;break}h=0,l=0}e.mode=xl;case xl:G=jb;break t;case te:G=hf;break t;case ff:return df;case pf:default:return gn}return n.next_out=o,n.avail_out=u,n.next_in=s,n.avail_in=a,e.hold=h,e.bits=l,(e.wsize||R!==n.avail_out&&e.mode<te&&(e.mode<Ea||t!==ul))&&mf(n,n.output,n.next_out,R-n.avail_out),b-=n.avail_in,R-=n.avail_out,n.total_in+=b,n.total_out+=R,e.total+=R,e.wrap&4&&R&&(n.adler=e.check=e.flags?Ne(e.check,i,R,n.next_out-R):Zi(e.check,i,R,n.next_out-R)),n.data_type=e.bits+(e.last?64:0)+(e.mode===Hn?128:0)+(e.mode===vs||e.mode===ba?256:0),(b===0&&R===0||t===ul)&&G===Pr&&(G=Yb),G},sE=n=>{if($r(n))return gn;let t=n.state;return t.window&&(t.window=null),n.state=null,Pr},oE=(n,t)=>{if($r(n))return gn;const e=n.state;return e.wrap&2?(e.head=t,t.done=!1,Pr):gn},aE=(n,t)=>{const e=t.length;let r,i,s;return $r(n)||(r=n.state,r.wrap!==0&&r.mode!==Ws)?gn:r.mode===Ws&&(i=1,i=Zi(i,t,e,0),i!==r.check)?hf:(s=mf(n,t,e,e),s?(r.mode=ff,df):(r.havedict=1,Pr))};var cE=yf,uE=_f,lE=gf,hE=nE,dE=wf,fE=iE,pE=sE,gE=oE,yE=aE,_E="pako inflate (from Nodeca project)",qn={inflateReset:cE,inflateReset2:uE,inflateResetKeep:lE,inflateInit:hE,inflateInit2:dE,inflate:fE,inflateEnd:pE,inflateGetHeader:gE,inflateSetDictionary:yE,inflateInfo:_E};function wE(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var mE=wE;const bf=Object.prototype.toString,{Z_NO_FLUSH:bE,Z_FINISH:EE,Z_OK:Ji,Z_STREAM_END:va,Z_NEED_DICT:Ia,Z_STREAM_ERROR:RE,Z_DATA_ERROR:Ml,Z_MEM_ERROR:AE}=cs;function ls(n){this.options=bo.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(n&&n.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new af,this.strm.avail_out=0;let e=qn.inflateInit2(this.strm,t.windowBits);if(e!==Ji)throw new Error(di[e]);if(this.header=new mE,qn.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Xi.string2buf(t.dictionary):bf.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=qn.inflateSetDictionary(this.strm,t.dictionary),e!==Ji)))throw new Error(di[e])}ls.prototype.push=function(n,t){const e=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?EE:bE,bf.call(n)==="[object ArrayBuffer]"?e.input=new Uint8Array(n):e.input=n,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(r),e.next_out=0,e.avail_out=r),s=qn.inflate(e,o),s===Ia&&i&&(s=qn.inflateSetDictionary(e,i),s===Ji?s=qn.inflate(e,o):s===Ml&&(s=Ia));e.avail_in>0&&s===va&&e.state.wrap>0&&n[e.next_in]!==0;)qn.inflateReset(e),s=qn.inflate(e,o);switch(s){case RE:case Ml:case Ia:case AE:return this.onEnd(s),this.ended=!0,!1}if(a=e.avail_out,e.next_out&&(e.avail_out===0||s===va))if(this.options.to==="string"){let u=Xi.utf8border(e.output,e.next_out),h=e.next_out-u,l=Xi.buf2string(e.output,u);e.next_out=h,e.avail_out=r-h,h&&e.output.set(e.output.subarray(u,u+h),0),this.onData(l)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(s===Ji&&a===0)){if(s===va)return s=qn.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};ls.prototype.onData=function(n){this.chunks.push(n)};ls.prototype.onEnd=function(n){n===Ji&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=bo.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function Jc(n,t){const e=new ls(t);if(e.push(n),e.err)throw e.msg||di[e.err];return e.result}function vE(n,t){return t=t||{},t.raw=!0,Jc(n,t)}var IE=ls,SE=Jc,kE=vE,TE=Jc,OE=cs,NE={Inflate:IE,inflate:SE,inflateRaw:kE,ungzip:TE,constants:OE};const{Inflate:zA,inflate:xE,inflateRaw:HA,ungzip:FA}=NE;var CE=xE,Ef={exports:{}};(function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function i(u,h,l){this.fn=u,this.context=h,this.once=l||!1}function s(u,h,l,b,R){if(typeof l!="function")throw new TypeError("The listener must be a function");var _=new i(l,b||u,R),S=e?e+h:h;return u._events[S]?u._events[S].fn?u._events[S]=[u._events[S],_]:u._events[S].push(_):(u._events[S]=_,u._eventsCount++),u}function o(u,h){--u._eventsCount===0?u._events=new r:delete u._events[h]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var h=[],l,b;if(this._eventsCount===0)return h;for(b in l=this._events)t.call(l,b)&&h.push(e?b.slice(1):b);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(l)):h},a.prototype.listeners=function(h){var l=e?e+h:h,b=this._events[l];if(!b)return[];if(b.fn)return[b.fn];for(var R=0,_=b.length,S=new Array(_);R<_;R++)S[R]=b[R].fn;return S},a.prototype.listenerCount=function(h){var l=e?e+h:h,b=this._events[l];return b?b.fn?1:b.length:0},a.prototype.emit=function(h,l,b,R,_,S){var N=e?e+h:h;if(!this._events[N])return!1;var A=this._events[N],C=arguments.length,D,x;if(A.fn){switch(A.once&&this.removeListener(h,A.fn,void 0,!0),C){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,l),!0;case 3:return A.fn.call(A.context,l,b),!0;case 4:return A.fn.call(A.context,l,b,R),!0;case 5:return A.fn.call(A.context,l,b,R,_),!0;case 6:return A.fn.call(A.context,l,b,R,_,S),!0}for(x=1,D=new Array(C-1);x<C;x++)D[x-1]=arguments[x];A.fn.apply(A.context,D)}else{var L=A.length,K;for(x=0;x<L;x++)switch(A[x].once&&this.removeListener(h,A[x].fn,void 0,!0),C){case 1:A[x].fn.call(A[x].context);break;case 2:A[x].fn.call(A[x].context,l);break;case 3:A[x].fn.call(A[x].context,l,b);break;case 4:A[x].fn.call(A[x].context,l,b,R);break;default:if(!D)for(K=1,D=new Array(C-1);K<C;K++)D[K-1]=arguments[K];A[x].fn.apply(A[x].context,D)}}return!0},a.prototype.on=function(h,l,b){return s(this,h,l,b,!1)},a.prototype.once=function(h,l,b){return s(this,h,l,b,!0)},a.prototype.removeListener=function(h,l,b,R){var _=e?e+h:h;if(!this._events[_])return this;if(!l)return o(this,_),this;var S=this._events[_];if(S.fn)S.fn===l&&(!R||S.once)&&(!b||S.context===b)&&o(this,_);else{for(var N=0,A=[],C=S.length;N<C;N++)(S[N].fn!==l||R&&!S[N].once||b&&S[N].context!==b)&&A.push(S[N]);A.length?this._events[_]=A.length===1?A[0]:A:o(this,_)}return this},a.prototype.removeAllListeners=function(h){var l;return h?(l=e?e+h:h,this._events[l]&&o(this,l)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,n.exports=a})(Ef);var BE=Ef.exports;const ME=gi(BE);function LE(n,t){return Array.apply(0,new Array(Math.ceil(n.length/t))).map((e,r)=>n.slice(r*t,(r+1)*t))}const wr=n=>"version"in n;function PE(n){return new TextDecoder("utf-8").decode(n)}function Ll(n){return ae.encode(n)}function Pl(n){return n.toString("base64")}function Rf(n){return ut.from(n,"base64")}function Jr(n){return"accounts"in n}async function UE(n){const t=(await X.findProgramAddress([],n))[0];return await X.createWithSeed(t,DE(),n)}function DE(){return"anchor:idl"}const zE=mt.struct([mt.publicKey("authority"),mt.vecU8("data")]);function HE(n){return zE.decode(n)}function FE(n){const t=["name","path","account","relations","generic"],e=s=>s.split(".").map(Jm).join("."),r=s=>{for(const o in s){const a=s[o];t.includes(o)?s[o]=Array.isArray(a)?a.map(e):e(a):typeof a=="object"&&r(a)}},i=structuredClone(n);return r(i),i}function Qr(n,t,e,r){return n!=null&&n.length?n[0].name?e(n):r(n):t()}function $E(n){const t=new Map;return n.errors&&n.errors.forEach(e=>{var r;let i=(r=e.msg)!==null&&r!==void 0?r:e.name;t.set(e.code,i)}),t}function KE(n,...t){if(n.args.length!=t.length)throw new Error("Invalid argument length");const e={};let r=0;return n.args.forEach(i=>{e[i.name]=t[r],r+=1}),e}function Af(n,t={}){n.forEach(e=>{if(Jr(e))Af(e.accounts,t[e.name]);else if(!t[e.name])throw new Error(`Account \`${e.name}\` not provided.`)})}function mn(n){return n instanceof X?n:new X(n)}class qE extends TypeError{constructor(t,e){let r;const{message:i,...s}=t,{path:o}=t,a=o.length===0?i:"At path: "+o.join(".")+" -- "+i;super(a),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>{var u;return(u=r)!=null?u:r=[t,...e()]}}}function WE(n){return si(n)&&typeof n[Symbol.iterator]=="function"}function si(n){return typeof n=="object"&&n!=null}function yr(n){return typeof n=="string"?JSON.stringify(n):""+n}function VE(n){const{done:t,value:e}=n.next();return t?void 0:e}function GE(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:i,branch:s}=t,{type:o}=e,{refinement:a,message:u="Expected a value of type `"+o+"`"+(a?" with refinement `"+a+"`":"")+", but received: `"+yr(r)+"`"}=n;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...n,message:u}}function*Ul(n,t,e,r){WE(n)||(n=[n]);for(const i of n){const s=GE(i,t,e,r);s&&(yield s)}}function*Qc(n,t,e){e===void 0&&(e={});const{path:r=[],branch:i=[n],coerce:s=!1,mask:o=!1}=e,a={path:r,branch:i};if(s&&(n=t.coercer(n,a),o&&t.type!=="type"&&si(t.schema)&&si(n)&&!Array.isArray(n)))for(const h in n)t.schema[h]===void 0&&delete n[h];let u=!0;for(const h of t.validator(n,a))u=!1,yield[h,void 0];for(let[h,l,b]of t.entries(n,a)){const R=Qc(l,b,{path:h===void 0?r:[...r,h],branch:h===void 0?i:[...i,l],coerce:s,mask:o});for(const _ of R)_[0]?(u=!1,yield[_[0],void 0]):s&&(l=_[1],h===void 0?n=l:n instanceof Map?n.set(h,l):n instanceof Set?n.add(l):si(n)&&(n[h]=l))}if(u)for(const h of t.refiner(n,a))u=!1,yield[h,void 0];u&&(yield[void 0,n])}class _r{constructor(t){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:e,schema:r,validator:i,refiner:s,coercer:o=u=>u,entries:a=function*(){}}=t;this.type=e,this.schema=r,this.entries=a,this.coercer=o,i?this.validator=(u,h)=>{const l=i(u,h);return Ul(l,h,this,u)}:this.validator=()=>[],s?this.refiner=(u,h)=>{const l=s(u,h);return Ul(l,h,this,u)}:this.refiner=()=>[]}assert(t){return jE(t,this)}create(t){return tu(t,this)}is(t){return vf(t,this)}mask(t){return ZE(t,this)}validate(t,e){return e===void 0&&(e={}),hs(t,this,e)}}function jE(n,t){const e=hs(n,t);if(e[0])throw e[0]}function tu(n,t){const e=hs(n,t,{coerce:!0});if(e[0])throw e[0];return e[1]}function ZE(n,t){const e=hs(n,t,{coerce:!0,mask:!0});if(e[0])throw e[0];return e[1]}function vf(n,t){return!hs(n,t)[0]}function hs(n,t,e){e===void 0&&(e={});const r=Qc(n,t,e),i=VE(r);return i[0]?[new qE(i[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function ds(n,t){return new _r({type:n,schema:null,validator:t})}function YE(){return ds("any",()=>!0)}function Sa(n){return new _r({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+yr(t)}})}function XE(){return ds("boolean",n=>typeof n=="boolean")}function Dl(n){const t=yr(n);return new _r({type:"literal",schema:n,validator(e){return e===n||"Expected the literal `"+t+"`, but received: "+yr(e)}})}function Ss(n){return new _r({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function xs(){return ds("number",n=>typeof n=="number"&&!isNaN(n)||"Expected a number, but received: "+yr(n))}function Cs(n){return new _r({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function kr(){return ds("string",n=>typeof n=="string"||"Expected a string, but received: "+yr(n))}function pr(n){const t=Object.keys(n);return new _r({type:"type",schema:n,*entries(e){if(si(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return si(e)||"Expected an object, but received: "+yr(e)}})}function If(n){const t=n.map(e=>e.type).join(" | ");return new _r({type:"union",schema:null,coercer(e,r){return(n.find(s=>{const[o]=s.validate(e,{coerce:!0});return!o})||eu()).coercer(e,r)},validator(e,r){const i=[];for(const s of n){const[...o]=Qc(e,s,r),[a]=o;if(a[0])for(const[u]of o)u&&i.push(u);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+yr(e),...i]}})}function eu(){return ds("unknown",()=>!0)}function JE(n,t,e){return new _r({...n,coercer:(r,i)=>vf(r,t)?n.coercer(e(r,i),i):n.coercer(r,i)})}const zl=99;async function QE(n,t,e){if(t.length<=zl)return await Hl(n,t,e);{const r=LE(t,zl);return(await Promise.all(r.map(s=>Hl(n,s,e)))).flat()}}async function Hl(n,t,e){const r=e??n.commitment,{value:i,context:s}=await n.getMultipleAccountsInfoAndContext(t,r);return i.map((a,u)=>a===null?null:{publicKey:t[u],account:a,context:s})}async function tR(n,t,e,r,i){var s;e&&e.length>0&&t.sign(...e);const o=t._compile(),a=o.serialize(),h=t._serialize(a).toString("base64"),l={encoding:"base64",commitment:r??n.commitment};if(i){const S=(Array.isArray(i)?i:o.nonProgramIds()).map(N=>N.toBase58());l.accounts={encoding:"base64",addresses:S}}e&&e.length>0&&(l.sigVerify=!0);const b=[h,l],R=await n._rpcRequest("simulateTransaction",b),_=tu(R,iR);if("error"in _){let S;if("data"in _.error&&(S=(s=_.error.data)===null||s===void 0?void 0:s.logs,S&&Array.isArray(S))){const N=`
    `,A=N+S.join(N);console.error(_.error.message,A)}throw new gr("failed to simulate transaction: "+_.error.message,S)}return _.result}function eR(n){return JE(Sf(n),nR,t=>"error"in t?t:{...t,result:tu(t.result,n)})}const nR=Sf(eu());function Sf(n){return If([pr({jsonrpc:Dl("2.0"),id:kr(),result:n}),pr({jsonrpc:Dl("2.0"),id:kr(),error:pr({code:eu(),message:kr(),data:Cs(YE())})})])}function rR(n){return eR(pr({context:pr({slot:xs()}),value:n}))}const iR=rR(pr({err:Ss(If([pr({}),kr()])),logs:Ss(Sa(kr())),accounts:Cs(Ss(Sa(Ss(pr({executable:XE(),owner:kr(),lamports:xs(),data:Sa(kr()),rentEpoch:Cs(xs())}))))),unitsConsumed:Cs(xs())}));class Vs{constructor(t,e,r=Vs.defaultOptions()){this.connection=t,this.wallet=e,this.opts=r,this.publicKey=e==null?void 0:e.publicKey}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(t,e=Vs.defaultOptions()){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(t,e,r){var i,s,o,a;if(r===void 0&&(r=this.opts),wr(t))e&&t.sign(e);else if(t.feePayer=(i=t.feePayer)!==null&&i!==void 0?i:this.wallet.publicKey,t.recentBlockhash=(await this.connection.getLatestBlockhash(r.preflightCommitment)).blockhash,e)for(const h of e)t.partialSign(h);t=await this.wallet.signTransaction(t);const u=t.serialize();try{return await Fl(this.connection,u,r)}catch(h){if(h instanceof Qa){const l=Ll(wr(t)?((s=t.signatures)===null||s===void 0?void 0:s[0])||new Uint8Array:(o=t.signature)!==null&&o!==void 0?o:new Uint8Array),b=wr(t)?0:void 0,R=await this.connection.getTransaction(l,{commitment:"confirmed",maxSupportedTransactionVersion:b});if(R){const _=(a=R.meta)===null||a===void 0?void 0:a.logMessages;throw _?new gr(h.message,_):h}else throw h}else throw h}}async sendAll(t,e){var r,i,s;e===void 0&&(e=this.opts);const o=(await this.connection.getLatestBlockhash(e.preflightCommitment)).blockhash;let a=t.map(l=>{var b,R;if(wr(l.tx)){let _=l.tx;return l.signers&&_.sign(l.signers),_}else{let _=l.tx,S=(b=l.signers)!==null&&b!==void 0?b:[];return _.feePayer=(R=_.feePayer)!==null&&R!==void 0?R:this.wallet.publicKey,_.recentBlockhash=o,S.forEach(N=>{_.partialSign(N)}),_}});const u=await this.wallet.signAllTransactions(a),h=[];for(let l=0;l<a.length;l+=1){const b=u[l],R=b.serialize();try{h.push(await Fl(this.connection,R,e))}catch(_){if(_ instanceof Qa){const S=Ll(wr(b)?((r=b.signatures)===null||r===void 0?void 0:r[0])||new Uint8Array:(i=b.signature)!==null&&i!==void 0?i:new Uint8Array),N=wr(b)?0:void 0,A=await this.connection.getTransaction(S,{commitment:"confirmed",maxSupportedTransactionVersion:N});if(A){const C=(s=A.meta)===null||s===void 0?void 0:s.logMessages;throw C?new gr(_.message,C):_}else throw _}else throw _}}return h}async simulate(t,e,r,i){let s=(await this.connection.getLatestBlockhash(r??this.connection.commitment)).blockhash,o;if(wr(t)?(e&&e.length>0&&(t.sign(e),t=await this.wallet.signTransaction(t)),o=await this.connection.simulateTransaction(t,{commitment:r})):(t.feePayer=t.feePayer||this.wallet.publicKey,t.recentBlockhash=s,e&&e.length>0&&(t=await this.wallet.signTransaction(t)),o=await tR(this.connection,t,e,r,i)),o.value.err)throw new sR(o.value);return o.value}}class sR extends Error{constructor(t,e){super(e),this.simulationResponse=t}}async function Fl(n,t,e){const r=e&&{skipPreflight:e.skipPreflight,preflightCommitment:e.preflightCommitment||e.commitment},i=await n.sendRawTransaction(t,r),s=(await n.confirmTransaction(i,e&&e.commitment)).value;if(s.err)throw new Qa(`Raw transaction ${i} failed (${JSON.stringify(s)})`);return i}class Qa extends Error{constructor(t){super(t)}}function tc(){return Vs.local()}var oR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},z={};Object.defineProperty(z,"__esModule",{value:!0});var kf=z.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=Ap=z.ANCHOR_ERROR__REQUIRE_VIOLATED=Rp=z.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=Ep=z.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=bp=z.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=mp=z.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=wp=z.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=_p=z.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=yp=z.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=gp=z.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=pp=z.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=fp=z.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=dp=z.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=hp=z.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=lp=z.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=up=z.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=cp=z.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=ap=z.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=op=z.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=sp=z.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=ip=z.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=rp=z.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=np=z.ANCHOR_ERROR__CONSTRAINT_SPACE=ep=z.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=tp=z.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=Qf=z.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=Jf=z.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=Xf=z.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=Yf=z.ANCHOR_ERROR__CONSTRAINT_ZERO=Zf=z.ANCHOR_ERROR__CONSTRAINT_ADDRESS=jf=z.ANCHOR_ERROR__CONSTRAINT_CLOSE=Gf=z.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=Vf=z.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=Wf=z.ANCHOR_ERROR__CONSTRAINT_STATE=qf=z.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=Kf=z.ANCHOR_ERROR__CONSTRAINT_SEEDS=$f=z.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=Ff=z.ANCHOR_ERROR__CONSTRAINT_OWNER=Hf=z.ANCHOR_ERROR__CONSTRAINT_RAW=zf=z.ANCHOR_ERROR__CONSTRAINT_SIGNER=Df=z.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=Uf=z.ANCHOR_ERROR__CONSTRAINT_MUT=Pf=z.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=Lf=z.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=Mf=z.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=Bf=z.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=Cf=z.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=xf=z.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=Nf=z.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=Of=z.ANCHOR_ERROR__INSTRUCTION_MISSING=void 0,Tf=z.ANCHOR_ERROR__DEPRECATED=Zp=z.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=jp=z.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=Gp=z.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=Vp=z.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=Wp=z.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=qp=z.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=Kp=z.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=$p=z.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=Fp=z.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=Hp=z.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=zp=z.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=Dp=z.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=Up=z.ANCHOR_ERROR__INVALID_PROGRAM_ID=Pp=z.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=Lp=z.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=Mp=z.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=Bp=z.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=Cp=z.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=xp=z.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=Np=z.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=Op=z.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=Tp=z.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=kp=z.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=Sp=z.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=Ip=z.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=vp=z.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=void 0,Of=z.ANCHOR_ERROR__INSTRUCTION_MISSING=100,Nf=z.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=101,xf=z.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=102,Cf=z.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=103,Bf=z.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=1e3,Mf=z.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=1001,Lf=z.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=1002,Pf=z.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=1500,Uf=z.ANCHOR_ERROR__CONSTRAINT_MUT=2e3,Df=z.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=2001,zf=z.ANCHOR_ERROR__CONSTRAINT_SIGNER=2002,Hf=z.ANCHOR_ERROR__CONSTRAINT_RAW=2003,Ff=z.ANCHOR_ERROR__CONSTRAINT_OWNER=2004,$f=z.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=2005,Kf=z.ANCHOR_ERROR__CONSTRAINT_SEEDS=2006,qf=z.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=2007,Wf=z.ANCHOR_ERROR__CONSTRAINT_STATE=2008,Vf=z.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=2009,Gf=z.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=2010,jf=z.ANCHOR_ERROR__CONSTRAINT_CLOSE=2011,Zf=z.ANCHOR_ERROR__CONSTRAINT_ADDRESS=2012,Yf=z.ANCHOR_ERROR__CONSTRAINT_ZERO=2013,Xf=z.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=2014,Jf=z.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=2015,Qf=z.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=2016,tp=z.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=2017,ep=z.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=2018,np=z.ANCHOR_ERROR__CONSTRAINT_SPACE=2019,rp=z.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=2020,ip=z.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=2021,sp=z.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=2022,op=z.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=2023,ap=z.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=2024,cp=z.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=2025,up=z.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=2026,lp=z.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=2027,hp=z.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=2028,dp=z.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=2029,fp=z.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=2030,pp=z.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=2031,gp=z.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=2032,yp=z.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=2033,_p=z.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=2034,wp=z.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=2035,mp=z.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=2036,bp=z.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=2037,Ep=z.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=2038,Rp=z.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=2039,Ap=z.ANCHOR_ERROR__REQUIRE_VIOLATED=2500;kf=z.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=2501;var vp=z.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=2502,Ip=z.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=2503,Sp=z.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=2504,kp=z.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=2505,Tp=z.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=2506,Op=z.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=3e3,Np=z.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=3001,xp=z.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=3002,Cp=z.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=3003,Bp=z.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=3004,Mp=z.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=3005,Lp=z.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=3006,Pp=z.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=3007,Up=z.ANCHOR_ERROR__INVALID_PROGRAM_ID=3008,Dp=z.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=3009,zp=z.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=3010,Hp=z.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=3011,Fp=z.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=3012,$p=z.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=3013,Kp=z.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=3014,qp=z.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=3015,Wp=z.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=3016,Vp=z.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=3017,Gp=z.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=4100,jp=z.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=4101,Zp=z.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=4102;Tf=z.ANCHOR_ERROR__DEPRECATED=5e3;const aR=new Map;function Yp(n){return aR.get(n)!==void 0}class ir extends Error{constructor(t){super(t),this.name="IdlError"}}class fs{constructor(t){this.stack=t}static parse(t){var e;const r=/^Program (\w*) invoke/,i=/^Program \w* success/,s=[];for(let o=0;o<t.length;o++){if(i.exec(t[o])){s.pop();continue}const a=(e=r.exec(t[o]))===null||e===void 0?void 0:e[1];a&&s.push(new X(a))}return new fs(s)}}class Di extends Error{constructor(t,e,r,i,s,o){super(r.join(`
`).replace("Program log: ","")),this.errorLogs=r,this.logs=i,this.error={errorCode:t,errorMessage:e,comparedValues:o,origin:s},this._programErrorStack=fs.parse(i)}static parse(t){if(!t)return null;const e=t.findIndex(R=>R.startsWith("Program log: AnchorError"));if(e===-1)return null;const r=t[e],i=[r];let s;if(e+1<t.length){if(t[e+1]==="Program log: Left:"){const R=/^Program log: (.*)$/,_=R.exec(t[e+2])[1],S=R.exec(t[e+4])[1];s=[new X(_),new X(S)],i.push(...t.slice(e+1,e+5))}else if(t[e+1].startsWith("Program log: Left:")){const R=/^Program log: (Left|Right): (.*)$/,_=R.exec(t[e+1])[2],S=R.exec(t[e+2])[2];i.push(...t.slice(e+1,e+3)),s=[_,S]}}const a=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r),h=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r),b=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r);if(a){const[R,_,S]=a.slice(1,4),N={code:R,number:parseInt(_)};return new Di(N,S,i,t,void 0,s)}else if(h){const[R,_,S,N,A]=h.slice(1,6),C={code:S,number:parseInt(N)},D={file:R,line:parseInt(_)};return new Di(C,A,i,t,D,s)}else if(b){const[R,_,S,N]=b.slice(1,5),A=R,C={code:_,number:parseInt(S)};return new Di(C,N,i,t,A,s)}else return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class Gs extends Error{constructor(t,e,r){super(),this.code=t,this.msg=e,this.logs=r,r&&(this._programErrorStack=fs.parse(r))}static parse(t,e){const r=t.toString();let i;if(r.includes("custom program error:")){let a=r.split("custom program error: ");if(a.length!==2)return null;i=a[1]}else{const a=r.match(/"Custom":([0-9]+)}/g);if(!a||a.length>1)return null;i=a[0].match(/([0-9]+)/g)[0]}let s;try{s=parseInt(i)}catch{return null}let o=e.get(s);return o!==void 0?new Gs(s,o,t.logs):(o=cR.get(s),o!==void 0?new Gs(s,o,t.logs):null)}get program(){var t;return(t=this._programErrorStack)===null||t===void 0?void 0:t.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var t;return(t=this._programErrorStack)===null||t===void 0?void 0:t.stack}toString(){return this.msg}}function Xp(n,t){Yp("debug-logs")&&console.log("Translating error:",n);const e=Di.parse(n.logs);if(e)return e;const r=Gs.parse(n,t);if(r)return r;if(n.logs){const i={get:function(s,o){return o==="programErrorStack"?s.programErrorStack.stack:o==="program"?s.programErrorStack.stack[n.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return n.programErrorStack=fs.parse(n.logs),new Proxy(n,i)}return n}const nt={InstructionMissing:Of,InstructionFallbackNotFound:Nf,InstructionDidNotDeserialize:xf,InstructionDidNotSerialize:Cf,IdlInstructionStub:Bf,IdlInstructionInvalidProgram:Mf,IdlAccountNotEmpty:Lf,EventInstructionStub:Pf,ConstraintMut:Uf,ConstraintHasOne:Df,ConstraintSigner:zf,ConstraintRaw:Hf,ConstraintOwner:Ff,ConstraintRentExempt:$f,ConstraintSeeds:Kf,ConstraintExecutable:qf,ConstraintState:Wf,ConstraintAssociated:Vf,ConstraintAssociatedInit:Gf,ConstraintClose:jf,ConstraintAddress:Zf,ConstraintZero:Yf,ConstraintTokenMint:Xf,ConstraintTokenOwner:Jf,ConstraintMintMintAuthority:Qf,ConstraintMintFreezeAuthority:tp,ConstraintMintDecimals:ep,ConstraintSpace:np,ConstraintAccountIsNone:rp,ConstraintTokenTokenProgram:ip,ConstraintMintTokenProgram:sp,ConstraintAssociatedTokenTokenProgram:op,ConstraintMintGroupPointerExtension:ap,ConstraintMintGroupPointerExtensionAuthority:cp,ConstraintMintGroupPointerExtensionGroupAddress:up,ConstraintMintGroupMemberPointerExtension:lp,ConstraintMintGroupMemberPointerExtensionAuthority:hp,ConstraintMintGroupMemberPointerExtensionMemberAddress:dp,ConstraintMintMetadataPointerExtension:fp,ConstraintMintMetadataPointerExtensionAuthority:pp,ConstraintMintMetadataPointerExtensionMetadataAddress:gp,ConstraintMintCloseAuthorityExtension:yp,ConstraintMintCloseAuthorityExtensionAuthority:_p,ConstraintMintPermanentDelegateExtension:wp,ConstraintMintPermanentDelegateExtensionDelegate:mp,ConstraintMintTransferHookExtension:bp,ConstraintMintTransferHookExtensionAuthority:Ep,ConstraintMintTransferHookExtensionProgramId:Rp,RequireViolated:Ap,RequireEqViolated:kf,RequireKeysEqViolated:vp,RequireNeqViolated:Ip,RequireKeysNeqViolated:Sp,RequireGtViolated:kp,RequireGteViolated:Tp,AccountDiscriminatorAlreadySet:Op,AccountDiscriminatorNotFound:Np,AccountDiscriminatorMismatch:xp,AccountDidNotDeserialize:Cp,AccountDidNotSerialize:Bp,AccountNotEnoughKeys:Mp,AccountNotMutable:Lp,AccountOwnedByWrongProgram:Pp,InvalidProgramId:Up,InvalidProgramExecutable:Dp,AccountNotSigner:zp,AccountNotSystemOwned:Hp,AccountNotInitialized:Fp,AccountNotProgramData:$p,AccountNotAssociatedTokenAccount:Kp,AccountSysvarMismatch:qp,AccountReallocExceedsLimit:Wp,AccountDuplicateReallocs:Vp,DeclaredProgramIdMismatch:Gp,TryingToInitPayerAsProgramAccount:jp,InvalidNumericConversion:Zp,Deprecated:Tf},cR=new Map([[nt.InstructionMissing,"8 byte instruction identifier not provided"],[nt.InstructionFallbackNotFound,"Fallback functions are not supported"],[nt.InstructionDidNotDeserialize,"The program could not deserialize the given instruction"],[nt.InstructionDidNotSerialize,"The program could not serialize the given instruction"],[nt.IdlInstructionStub,"The program was compiled without idl instructions"],[nt.IdlInstructionInvalidProgram,"The transaction was given an invalid program for the IDL instruction"],[nt.IdlAccountNotEmpty,"IDL account must be empty in order to resize, try closing first"],[nt.EventInstructionStub,"The program was compiled without `event-cpi` feature"],[nt.ConstraintMut,"A mut constraint was violated"],[nt.ConstraintHasOne,"A has one constraint was violated"],[nt.ConstraintSigner,"A signer constraint was violated"],[nt.ConstraintRaw,"A raw constraint was violated"],[nt.ConstraintOwner,"An owner constraint was violated"],[nt.ConstraintRentExempt,"A rent exemption constraint was violated"],[nt.ConstraintSeeds,"A seeds constraint was violated"],[nt.ConstraintExecutable,"An executable constraint was violated"],[nt.ConstraintState,"Deprecated Error, feel free to replace with something else"],[nt.ConstraintAssociated,"An associated constraint was violated"],[nt.ConstraintAssociatedInit,"An associated init constraint was violated"],[nt.ConstraintClose,"A close constraint was violated"],[nt.ConstraintAddress,"An address constraint was violated"],[nt.ConstraintZero,"Expected zero account discriminant"],[nt.ConstraintTokenMint,"A token mint constraint was violated"],[nt.ConstraintTokenOwner,"A token owner constraint was violated"],[nt.ConstraintMintMintAuthority,"A mint mint authority constraint was violated"],[nt.ConstraintMintFreezeAuthority,"A mint freeze authority constraint was violated"],[nt.ConstraintMintDecimals,"A mint decimals constraint was violated"],[nt.ConstraintSpace,"A space constraint was violated"],[nt.ConstraintAccountIsNone,"A required account for the constraint is None"],[nt.ConstraintTokenTokenProgram,"A token account token program constraint was violated"],[nt.ConstraintMintTokenProgram,"A mint token program constraint was violated"],[nt.ConstraintAssociatedTokenTokenProgram,"An associated token account token program constraint was violated"],[nt.ConstraintMintGroupPointerExtension,"A group pointer extension constraint was violated"],[nt.ConstraintMintGroupPointerExtensionAuthority,"A group pointer extension authority constraint was violated"],[nt.ConstraintMintGroupPointerExtensionGroupAddress,"A group pointer extension group address constraint was violated"],[nt.ConstraintMintGroupMemberPointerExtension,"A group member pointer extension constraint was violated"],[nt.ConstraintMintGroupMemberPointerExtensionAuthority,"A group member pointer extension authority constraint was violated"],[nt.ConstraintMintGroupMemberPointerExtensionMemberAddress,"A group member pointer extension group address constraint was violated"],[nt.ConstraintMintMetadataPointerExtension,"A metadata pointer extension constraint was violated"],[nt.ConstraintMintMetadataPointerExtensionAuthority,"A metadata pointer extension authority constraint was violated"],[nt.ConstraintMintMetadataPointerExtensionMetadataAddress,"A metadata pointer extension metadata address constraint was violated"],[nt.ConstraintMintCloseAuthorityExtension,"A close authority constraint was violated"],[nt.ConstraintMintCloseAuthorityExtensionAuthority,"A close authority extension authority constraint was violated"],[nt.ConstraintMintPermanentDelegateExtension,"A permanent delegate extension constraint was violated"],[nt.ConstraintMintPermanentDelegateExtensionDelegate,"A permanent delegate extension delegate constraint was violated"],[nt.ConstraintMintTransferHookExtension,"A transfer hook extension constraint was violated"],[nt.ConstraintMintTransferHookExtensionAuthority,"A transfer hook extension authority constraint was violated"],[nt.ConstraintMintTransferHookExtensionProgramId,"A transfer hook extension transfer hook program id constraint was violated"],[nt.RequireViolated,"A require expression was violated"],[nt.RequireEqViolated,"A require_eq expression was violated"],[nt.RequireKeysEqViolated,"A require_keys_eq expression was violated"],[nt.RequireNeqViolated,"A require_neq expression was violated"],[nt.RequireKeysNeqViolated,"A require_keys_neq expression was violated"],[nt.RequireGtViolated,"A require_gt expression was violated"],[nt.RequireGteViolated,"A require_gte expression was violated"],[nt.AccountDiscriminatorAlreadySet,"The account discriminator was already set on this account"],[nt.AccountDiscriminatorNotFound,"No 8 byte discriminator was found on the account"],[nt.AccountDiscriminatorMismatch,"8 byte discriminator did not match what was expected"],[nt.AccountDidNotDeserialize,"Failed to deserialize the account"],[nt.AccountDidNotSerialize,"Failed to serialize the account"],[nt.AccountNotEnoughKeys,"Not enough account keys given to the instruction"],[nt.AccountNotMutable,"The given account is not mutable"],[nt.AccountOwnedByWrongProgram,"The given account is owned by a different program than expected"],[nt.InvalidProgramId,"Program ID was not as expected"],[nt.InvalidProgramExecutable,"Program account is not executable"],[nt.AccountNotSigner,"The given account did not sign"],[nt.AccountNotSystemOwned,"The given account is not owned by the system program"],[nt.AccountNotInitialized,"The program expected this account to be already initialized"],[nt.AccountNotProgramData,"The given account is not a program data account"],[nt.AccountNotAssociatedTokenAccount,"The given account is not the associated token account"],[nt.AccountSysvarMismatch,"The given public key does not match the required sysvar"],[nt.AccountReallocExceedsLimit,"The account reallocation exceeds the MAX_PERMITTED_DATA_INCREASE limit"],[nt.AccountDuplicateReallocs,"The account was duplicated for more than one reallocation"],[nt.DeclaredProgramIdMismatch,"The declared program id does not match the actual program id"],[nt.TryingToInitPayerAsProgramAccount,"You cannot/should not initialize the payer account as a program account"],[nt.InvalidNumericConversion,"The program could not perform the numeric conversion, out of range integral type conversion attempted"],[nt.Deprecated,"The API being used is deprecated and should no longer be used"]]);class Tt{static fieldLayout(t,e=[],r){const i=t.name;switch(t.type){case"bool":return mt.bool(i);case"u8":return mt.u8(i);case"i8":return mt.i8(i);case"u16":return mt.u16(i);case"i16":return mt.i16(i);case"u32":return mt.u32(i);case"i32":return mt.i32(i);case"f32":return mt.f32(i);case"u64":return mt.u64(i);case"i64":return mt.i64(i);case"f64":return mt.f64(i);case"u128":return mt.u128(i);case"i128":return mt.i128(i);case"u256":return mt.u256(i);case"i256":return mt.i256(i);case"bytes":return mt.vecU8(i);case"string":return mt.str(i);case"pubkey":return mt.publicKey(i);default:{if("option"in t.type)return mt.option(Tt.fieldLayout({type:t.type.option},e,r),i);if("vec"in t.type)return mt.vec(Tt.fieldLayout({type:t.type.vec},e,r),i);if("array"in t.type){let[s,o]=t.type.array;return o=Tt.resolveArrayLen(o,r),mt.array(Tt.fieldLayout({type:s},e,r),o,i)}if("defined"in t.type){if(!e)throw new ir("User defined types not provided");const s=t.type.defined.name,o=e.find(a=>a.name===s);if(!o)throw new ir(`Type not found: ${t.name}`);return Tt.typeDefLayout({typeDef:o,types:e,genericArgs:r??t.type.defined.generics,name:i})}if("generic"in t.type){const s=r==null?void 0:r.at(0);if((s==null?void 0:s.kind)!=="type")throw new ir(`Invalid generic field: ${t.name}`);return Tt.fieldLayout({...t,type:s.type},e)}throw new ir(`Not yet implemented: ${JSON.stringify(t.type)}`)}}}static typeDefLayout({typeDef:t,types:e,name:r,genericArgs:i}){switch(t.type.kind){case"struct":{const s=Qr(t.type.fields,()=>[],o=>o.map(a=>{const u=i&&Tt.resolveGenericArgs({type:a.type,typeDef:t,genericArgs:i});return Tt.fieldLayout(a,e,u)}),o=>o.map((a,u)=>{const h=i&&Tt.resolveGenericArgs({type:a,typeDef:t,genericArgs:i});return Tt.fieldLayout({name:u.toString(),type:a},e,h)}));return mt.struct(s,r)}case"enum":{const s=t.type.variants.map(o=>{const a=Qr(o.fields,()=>[],u=>u.map(h=>{const l=i&&Tt.resolveGenericArgs({type:h.type,typeDef:t,genericArgs:i});return Tt.fieldLayout(h,e,l)}),u=>u.map((h,l)=>{const b=i&&Tt.resolveGenericArgs({type:h,typeDef:t,genericArgs:i});return Tt.fieldLayout({name:l.toString(),type:h},e,b)}));return mt.struct(a,o.name)});return r!==void 0?mt.rustEnum(s).replicate(r):mt.rustEnum(s,r)}case"type":return Tt.fieldLayout({type:t.type.alias,name:r},e)}}static typeSize(t,e,r){var i;switch(t){case"bool":return 1;case"u8":return 1;case"i8":return 1;case"i16":return 2;case"u16":return 2;case"u32":return 4;case"i32":return 4;case"f32":return 4;case"u64":return 8;case"i64":return 8;case"f64":return 8;case"u128":return 16;case"i128":return 16;case"u256":return 32;case"i256":return 32;case"bytes":return 1;case"string":return 1;case"pubkey":return 32;default:if("option"in t)return 1+Tt.typeSize(t.option,e,r);if("coption"in t)return 4+Tt.typeSize(t.coption,e,r);if("vec"in t)return 1;if("array"in t){let[s,o]=t.array;return o=Tt.resolveArrayLen(o,r),Tt.typeSize(s,e,r)*o}if("defined"in t){const s=(i=e.types)===null||i===void 0?void 0:i.find(a=>a.name===t.defined.name);if(!s)throw new ir(`Type not found: ${JSON.stringify(t)}`);const o=a=>{const u=r??t.defined.generics,h=u&&Tt.resolveGenericArgs({type:a,typeDef:s,genericArgs:u});return Tt.typeSize(a,e,h)};switch(s.type.kind){case"struct":return Qr(s.type.fields,()=>[0],a=>a.map(u=>o(u.type)),a=>a.map(u=>o(u))).reduce((a,u)=>a+u,0);case"enum":{const a=s.type.variants.map(u=>Qr(u.fields,()=>[0],h=>h.map(l=>o(l.type)),h=>h.map(l=>o(l))).reduce((h,l)=>h+l,0));return Math.max(...a)+1}case"type":return Tt.typeSize(s.type.alias,e,r)}}if("generic"in t){const s=r==null?void 0:r.at(0);if((s==null?void 0:s.kind)!=="type")throw new ir(`Invalid generic: ${t.generic}`);return Tt.typeSize(s.type,e,r)}throw new Error(`Invalid type ${JSON.stringify(t)}`)}}static resolveArrayLen(t,e){if(typeof t=="number")return t;if(e){const r=e.find(i=>i.kind==="const");(r==null?void 0:r.kind)==="const"&&(t=+r.value)}if(typeof t!="number")throw new ir("Generic array length did not resolve");return t}static resolveGenericArgs({type:t,typeDef:e,genericArgs:r,isDefined:i}){if(typeof t!="object")return null;for(const s in e.generics){const o=e.generics[s];if("generic"in t&&o.name===t.generic)return[r[s]];if("option"in t){const a=Tt.resolveGenericArgs({type:t.option,typeDef:e,genericArgs:r,isDefined:i});if(!a||!i)return a;if(a[0].kind==="type")return[{kind:"type",type:{option:a[0].type}}]}if("vec"in t){const a=Tt.resolveGenericArgs({type:t.vec,typeDef:e,genericArgs:r,isDefined:i});if(!a||!i)return a;if(a[0].kind==="type")return[{kind:"type",type:{vec:a[0].type}}]}if("array"in t){const[a,u]=t.array,h=typeof u=="object",l=Tt.resolveGenericArgs({type:a,typeDef:e,genericArgs:r,isDefined:i});if(l){for(const b in e.generics.slice(+s)){const R=+s+ +b;h&&e.generics[R].name===u.generic&&l.push(r[R])}if(!i)return l;if(l[0].kind==="type"&&l[1].kind==="const")return[{kind:"type",type:{array:[l[0].type,+l[1].value]}}]}if(h&&o.name===u.generic){const b=r[s];return i?[{kind:"type",type:{array:[a,+b.value]}}]:[b]}return null}if("defined"in t)return t.defined.generics?t.defined.generics.flatMap(a=>{switch(a.kind){case"type":return Tt.resolveGenericArgs({type:a.type,typeDef:e,genericArgs:r,isDefined:!0});case"const":return[a]}}).filter(a=>a!==null):null}return null}}class uR{constructor(t){this.idl=t;const e=t.instructions.map(i=>{const s=i.name,o=i.args.map(u=>Tt.fieldLayout(u,t.types)),a=mt.struct(o,s);return[s,{discriminator:i.discriminator,layout:a}]});this.ixLayouts=new Map(e);const r=e.map(([i,{discriminator:s,layout:o}])=>[ae.encode(s),{name:i,layout:o}]);this.sighashLayouts=new Map(r)}encode(t,e){const r=ut.alloc(1e3),i=this.ixLayouts.get(t);if(!i)throw new Error(`Unknown method: ${t}`);const s=i.layout.encode(e,r),o=r.slice(0,s);return ut.concat([ut.from(i.discriminator),o])}decode(t,e="hex"){typeof t=="string"&&(t=e==="hex"?ut.from(t,"hex"):ae.decode(t));const r=t.slice(0,ti),i=t.slice(ti),s=this.sighashLayouts.get(ae.encode(r));return s?{name:s.name,data:s.layout.decode(i)}:null}format(t,e){return en.format(t,e,this.idl)}}class en{static format(t,e,r){const i=r.instructions.find(u=>t.name===u.name);if(!i)return console.error("Invalid instruction given"),null;const s=i.args.map(u=>({name:u.name,type:en.formatIdlType(u.type),data:en.formatIdlData(u,t.data[u.name],r.types)})),o=en.flattenIdlAccounts(i.accounts),a=e.map((u,h)=>h<o.length?{name:o[h].name,...u}:{name:void 0,...u});return{args:s,accounts:a}}static formatIdlType(t){if(typeof t=="string")return t;if("option"in t)return`Option<${this.formatIdlType(t.option)}>`;if("coption"in t)return`COption<${this.formatIdlType(t.coption)}>`;if("vec"in t)return`Vec<${this.formatIdlType(t.vec)}>`;if("array"in t)return`Array<${t.array[0]}; ${t.array[1]}>`;if("defined"in t){const e=t.defined.name;if(t.defined.generics){const r=t.defined.generics.map(i=>{switch(i.kind){case"type":return en.formatIdlType(i.type);case"const":return i.value}}).join(", ");return`${e}<${r}>`}return e}throw new Error(`Unknown IDL type: ${t}`)}static formatIdlData(t,e,r){if(typeof t.type=="string")return e.toString();if("vec"in t.type)return"["+e.map(i=>this.formatIdlData({name:"",type:t.type.vec},i,r)).join(", ")+"]";if("option"in t.type)return e===null?"null":this.formatIdlData({name:"",type:t.type.option},e,r);if("defined"in t.type){if(!r)throw new Error("User defined types not provided");const i=t.type.defined.name,s=r.find(o=>o.name===i);if(!s)throw new Error(`Type not found: ${i}`);return en.formatIdlDataDefined(s,e,r)}return"unknown"}static formatIdlDataDefined(t,e,r){switch(t.type.kind){case"struct":return"{ "+Qr(t.type.fields,()=>"",i=>Object.entries(e).map(([s,o])=>{const a=i.find(u=>u.name===s);if(!a)throw new Error(`Field not found: ${s}`);return s+": "+en.formatIdlData(a,o,r)}).join(", "),i=>Object.entries(e).map(([s,o])=>s+": "+en.formatIdlData({name:"",type:i[s]},o,r)).join(", "))+" }";case"enum":{const i=Object.keys(e)[0],s=t.type.variants.find(a=>a.name===i);if(!s)throw new Error(`Unable to find variant: ${i}`);const o=e[i];return Qr(s.fields,()=>i,a=>{const u=Object.keys(o).map(h=>{const l=o[h],b=a.find(R=>R.name===h);if(!b)throw new Error(`Field not found: ${h}`);return h+": "+en.formatIdlData(b,l,r)}).join(", ");return`${i} { ${u} }`},a=>{const u=Object.entries(o).map(([h,l])=>h+": "+en.formatIdlData({name:"",type:a[h]},l,r)).join(", ");return`${i} { ${u} }`})}case"type":return en.formatIdlType(t.type.alias)}}static flattenIdlAccounts(t,e){return t.map(r=>{const i=lR(r.name);if(r.hasOwnProperty("accounts")){const s=e?`${e} > ${i}`:i;return en.flattenIdlAccounts(r.accounts,s)}else return{...r,name:e?`${e} > ${i}`:i}}).flat()}}function lR(n){const t=n.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)}const ti=8;class hR{constructor(t){if(this.idl=t,!t.accounts){this.accountLayouts=new Map;return}const e=t.types;if(!e)throw new Error("Accounts require `idl.types`");const r=t.accounts.map(i=>{const s=e.find(o=>o.name===i.name);if(!s)throw new Error(`Account not found: ${i.name}`);return[i.name,Tt.typeDefLayout({typeDef:s,types:e})]});this.accountLayouts=new Map(r)}async encode(t,e){const r=ut.alloc(1e3),i=this.accountLayouts.get(t);if(!i)throw new Error(`Unknown account: ${t}`);const s=i.encode(e,r),o=r.slice(0,s),a=this.accountDiscriminator(t);return ut.concat([a,o])}decode(t,e){if(this.accountDiscriminator(t).compare(e.slice(0,ti)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(t,e)}decodeAny(t){const e=t.slice(0,ti),r=Array.from(this.accountLayouts.keys()).find(i=>this.accountDiscriminator(i).equals(e));if(!r)throw new Error("Account not found");return this.decodeUnchecked(r,t)}decodeUnchecked(t,e){const r=e.subarray(ti),i=this.accountLayouts.get(t);if(!i)throw new Error(`Unknown account: ${t}`);return i.decode(r)}memcmp(t,e){const r=this.accountDiscriminator(t);return{offset:0,bytes:ae.encode(e?ut.concat([r,e]):r)}}size(t){return ti+Tt.typeSize({defined:{name:t}},this.idl)}accountDiscriminator(t){var e;const r=(e=this.idl.accounts)===null||e===void 0?void 0:e.find(i=>i.name===t);if(!r)throw new Error(`Account not found: ${t}`);return ut.from(r.discriminator)}}class dR{constructor(t){var e;if(!t.events){this.layouts=new Map;return}const r=t.types;if(!r)throw new Error("Events require `idl.types`");const i=t.events.map(s=>{const o=r.find(a=>a.name===s.name);if(!o)throw new Error(`Event not found: ${s.name}`);return[s.name,Tt.typeDefLayout({typeDef:o,types:r})]});this.layouts=new Map(i),this.discriminators=new Map(((e=t.events)!==null&&e!==void 0?e:[]).map(s=>[Pl(ut.from(s.discriminator)),s.name]))}decode(t){let e;try{e=Rf(t)}catch{return null}const r=Pl(e.slice(0,8)),i=this.discriminators.get(r);if(!i)return null;const s=this.layouts.get(i);if(!s)throw new Error(`Unknown event: ${i}`);return{data:s.decode(e.slice(8)),name:i}}}class fR{constructor(t){const e=t.types;if(!e){this.typeLayouts=new Map;return}const r=e.filter(i=>!i.generics).map(i=>[i.name,Tt.typeDefLayout({typeDef:i,types:e})]);this.typeLayouts=new Map(r)}encode(t,e){const r=ut.alloc(1e3),i=this.typeLayouts.get(t);if(!i)throw new Error(`Unknown type: ${t}`);const s=i.encode(e,r);return r.slice(0,s)}decode(t,e){const r=this.typeLayouts.get(t);if(!r)throw new Error(`Unknown type: ${t}`);return r.decode(e)}}class Jp{constructor(t){this.instruction=new uR(t),this.accounts=new hR(t),this.events=new dR(t),this.types=new fR(t)}}class Qe{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}decode(t,e){throw new Error("Layout is abstract")}encode(t,e,r){throw new Error("Layout is abstract")}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}var Ro=Qe;function pR(n,t){return t.property?n+"["+t.property+"]":n}class Tr extends Qe{isCount(){throw new Error("ExternalLayout is abstract")}}class Qp extends Tr{constructor(t,e,r){if(!(t instanceof Qe))throw new TypeError("layout must be a Layout");if(e===void 0)e=0;else if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Ao||this.layout instanceof t0}decode(t,e){return e===void 0&&(e=0),this.layout.decode(t,e+this.offset)}encode(t,e,r){return r===void 0&&(r=0),this.layout.encode(t,e,r+this.offset)}}class Ao extends Qe{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return e===void 0&&(e=0),t.readUIntLE(e,this.span)}encode(t,e,r){return r===void 0&&(r=0),e.writeUIntLE(t,r,this.span),this.span}}class t0 extends Qe{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return e===void 0&&(e=0),t.readUIntBE(e,this.span)}encode(t,e,r){return r===void 0&&(r=0),e.writeUIntBE(t,r,this.span),this.span}}const ec=Math.pow(2,32);function e0(n){const t=Math.floor(n/ec),e=n-t*ec;return{hi32:t,lo32:e}}function n0(n,t){return n*ec+t}class gR extends Qe{constructor(t){super(8,t)}decode(t,e){e===void 0&&(e=0);const r=t.readUInt32LE(e),i=t.readUInt32LE(e+4);return n0(i,r)}encode(t,e,r){r===void 0&&(r=0);const i=e0(t);return e.writeUInt32LE(i.lo32,r),e.writeUInt32LE(i.hi32,r+4),8}}class yR extends Qe{constructor(t){super(8,t)}decode(t,e){e===void 0&&(e=0);const r=t.readUInt32LE(e),i=t.readInt32LE(e+4);return n0(i,r)}encode(t,e,r){r===void 0&&(r=0);const i=e0(t);return e.writeUInt32LE(i.lo32,r),e.writeInt32LE(i.hi32,r+4),8}}class _R extends Qe{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((s,o)=>s&&o instanceof Qe,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const s of t)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=t.reduce((s,o)=>s+o.getSpan(),0)}catch{}super(i,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let r=0;try{r=this.fields.reduce((i,s)=>{const o=s.getSpan(t,e);return e+=o,i+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e){e===void 0&&(e=0);const r=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(r[i.property]=i.decode(t,e)),e+=i.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r){r===void 0&&(r=0);const i=r;let s=0,o=0;for(const a of this.fields){let u=a.span;if(o=0<u?u:0,a.property!==void 0){const h=t[a.property];h!==void 0&&(o=a.encode(h,e,r),0>u&&(u=a.getSpan(e,r)))}s=r,r+=u}return s+o-i}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}class r0{constructor(t){this.property=t}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class $l extends r0{constructor(t,e){if(!(t instanceof Tr&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}class i0 extends Qe{constructor(t,e,r){const i=t instanceof Ao||t instanceof t0;if(i)t=new $l(new Qp(t));else if(t instanceof Tr&&t.isCount())t=new $l(t);else if(!(t instanceof r0))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof Qe))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let s=-1;e&&(s=e.span,0<=s&&i&&(s+=t.layout.span)),super(s,r),this.discriminator=t,this.usesPrefixDiscriminator=i,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(t.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&t.hasOwnProperty(this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||t.hasOwnProperty(e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(t.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}decode(t,e){e===void 0&&(e=0);let r;const i=this.discriminator,s=i.decode(t,e);let o=this.registry[s];if(o===void 0){let a=0;o=this.defaultLayout,this.usesPrefixDiscriminator&&(a=i.layout.span),r=this.makeDestinationObject(),r[i.property]=s,r[o.property]=this.defaultLayout.decode(t,e+a)}else r=o.decode(t,e);return r}encode(t,e,r){r===void 0&&(r=0);const i=this.getSourceVariant(t);if(i===void 0){const s=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=s.layout.span),s.encode(t[s.property],e,r),a+o.encode(t[o.property],e,r+a)}return i.encode(t,e,r)}addVariant(t,e,r){const i=new wR(this,t,e,r);return this.registry[t]=i,i}getVariant(t,e){let r=t;return _t.isBuffer(t)&&(e===void 0&&(e=0),r=this.discriminator.decode(t,e)),this.registry[r]}}class wR extends Qe{constructor(t,e,r,i){if(!(t instanceof i0))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&i===void 0&&(i=r,r=null),r){if(!(r instanceof Qe))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=t.span;0>t.span&&(s=r?r.span:0,0<=s&&t.usesPrefixDiscriminator&&(s+=t.discriminator.layout.span)),super(s,i),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),r+this.layout.getSpan(t,e+r)}decode(t,e){const r=this.makeDestinationObject();if(e===void 0&&(e=0),this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+i):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r){r===void 0&&(r=0);let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!t.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let s=i;if(this.layout&&(this.layout.encode(t[this.property],e,r+i),s+=this.layout.getSpan(e,r+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}class mR extends Qe{constructor(t,e){if(!(t instanceof Tr&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof Tr||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e){e===void 0&&(e=0);let r=this.span;return 0>r&&(r=this.length.decode(t,e)),t.slice(e,e+r)}encode(t,e,r){let i=this.length;if(this.length instanceof Tr&&(i=t.length),!(_t.isBuffer(t)&&i===t.length))throw new TypeError(pR("Blob.encode",this)+" requires (length "+i+") Buffer as src");if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return e.write(t.toString("hex"),r,i,"hex"),this.length instanceof Tr&&this.length.encode(i,e,r),i}}var bR=(n,t,e)=>new Qp(n,t,e),ER=n=>new Ao(1,n),Zn=n=>new Ao(4,n),RR=n=>new gR(n),Xn=n=>new yR(n),Se=(n,t,e)=>new _R(n,t,e),s0=(n,t,e)=>new i0(n,t,e),ps=(n,t)=>new mR(n,t);class AR extends Ro{constructor(t){super(-1,t),this.property=t,this.layout=Se([Zn("length"),Zn("lengthPadding"),ps(bR(Zn(),-8),"chars")],this.property)}encode(t,e,r=0){if(t==null)return this.layout.span;const i={chars:_t.from(t,"utf8")};return this.layout.encode(i,e,r)}decode(t,e=0){return this.layout.decode(t,e).chars.toString()}getSpan(t,e=0){return Zn().span+Zn().span+new Wn(new Uint8Array(t).slice(e,e+4),10,"le").toNumber()}}function vo(n){return new AR(n)}function yn(n){return ps(32,n)}const un=s0(Zn("instruction"));un.addVariant(0,Se([Xn("lamports"),Xn("space"),yn("owner")]),"createAccount");un.addVariant(1,Se([yn("owner")]),"assign");un.addVariant(2,Se([Xn("lamports")]),"transfer");un.addVariant(3,Se([yn("base"),vo("seed"),Xn("lamports"),Xn("space"),yn("owner")]),"createAccountWithSeed");un.addVariant(4,Se([yn("authorized")]),"advanceNonceAccount");un.addVariant(5,Se([Xn("lamports")]),"withdrawNonceAccount");un.addVariant(6,Se([yn("authorized")]),"initializeNonceAccount");un.addVariant(7,Se([yn("authorized")]),"authorizeNonceAccount");un.addVariant(8,Se([Xn("space")]),"allocate");un.addVariant(9,Se([yn("base"),vo("seed"),Xn("space"),yn("owner")]),"allocateWithSeed");un.addVariant(10,Se([yn("base"),vo("seed"),yn("owner")]),"assignWithSeed");un.addVariant(11,Se([Xn("lamports"),vo("seed"),yn("owner")]),"transferWithSeed");Math.max(...Object.values(un.registry).map(n=>n.span));class vR extends Ro{constructor(t,e,r,i){super(t.span,i),this.layout=t,this.decoder=e,this.encoder=r}decode(t,e){return this.decoder(this.layout.decode(t,e))}encode(t,e,r){return this.layout.encode(this.encoder(t),e,r)}getSpan(t,e){return this.layout.getSpan(t,e)}}function Kl(n){return new vR(ps(32),t=>new X(t),t=>t.toBuffer(),n)}Se([Zn("version"),Zn("state"),Kl("authorizedPubkey"),Kl("nonce"),Se([RR("lamportsPerSignature")],"feeCalculator")]);new X("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new X("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var ql={exports:{}};(function(n,t){var e=typeof self<"u"?self:oR,r=function(){function s(){this.fetch=!1,this.DOMException=e.DOMException}return s.prototype=e,new s}();(function(s){(function(o){var a={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function u(c){return c&&DataView.prototype.isPrototypeOf(c)}if(a.arrayBuffer)var h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(c){return c&&h.indexOf(Object.prototype.toString.call(c))>-1};function b(c){if(typeof c!="string"&&(c=String(c)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(c))throw new TypeError("Invalid character in header field name");return c.toLowerCase()}function R(c){return typeof c!="string"&&(c=String(c)),c}function _(c){var d={next:function(){var y=c.shift();return{done:y===void 0,value:y}}};return a.iterable&&(d[Symbol.iterator]=function(){return d}),d}function S(c){this.map={},c instanceof S?c.forEach(function(d,y){this.append(y,d)},this):Array.isArray(c)?c.forEach(function(d){this.append(d[0],d[1])},this):c&&Object.getOwnPropertyNames(c).forEach(function(d){this.append(d,c[d])},this)}S.prototype.append=function(c,d){c=b(c),d=R(d);var y=this.map[c];this.map[c]=y?y+", "+d:d},S.prototype.delete=function(c){delete this.map[b(c)]},S.prototype.get=function(c){return c=b(c),this.has(c)?this.map[c]:null},S.prototype.has=function(c){return this.map.hasOwnProperty(b(c))},S.prototype.set=function(c,d){this.map[b(c)]=R(d)},S.prototype.forEach=function(c,d){for(var y in this.map)this.map.hasOwnProperty(y)&&c.call(d,this.map[y],y,this)},S.prototype.keys=function(){var c=[];return this.forEach(function(d,y){c.push(y)}),_(c)},S.prototype.values=function(){var c=[];return this.forEach(function(d){c.push(d)}),_(c)},S.prototype.entries=function(){var c=[];return this.forEach(function(d,y){c.push([y,d])}),_(c)},a.iterable&&(S.prototype[Symbol.iterator]=S.prototype.entries);function N(c){if(c.bodyUsed)return Promise.reject(new TypeError("Already read"));c.bodyUsed=!0}function A(c){return new Promise(function(d,y){c.onload=function(){d(c.result)},c.onerror=function(){y(c.error)}})}function C(c){var d=new FileReader,y=A(d);return d.readAsArrayBuffer(c),y}function D(c){var d=new FileReader,y=A(d);return d.readAsText(c),y}function x(c){for(var d=new Uint8Array(c),y=new Array(d.length),w=0;w<d.length;w++)y[w]=String.fromCharCode(d[w]);return y.join("")}function L(c){if(c.slice)return c.slice(0);var d=new Uint8Array(c.byteLength);return d.set(new Uint8Array(c)),d.buffer}function K(){return this.bodyUsed=!1,this._initBody=function(c){this._bodyInit=c,c?typeof c=="string"?this._bodyText=c:a.blob&&Blob.prototype.isPrototypeOf(c)?this._bodyBlob=c:a.formData&&FormData.prototype.isPrototypeOf(c)?this._bodyFormData=c:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(c)?this._bodyText=c.toString():a.arrayBuffer&&a.blob&&u(c)?(this._bodyArrayBuffer=L(c.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(c)||l(c))?this._bodyArrayBuffer=L(c):this._bodyText=c=Object.prototype.toString.call(c):this._bodyText="",this.headers.get("content-type")||(typeof c=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(c)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var c=N(this);if(c)return c;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?N(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(C)}),this.text=function(){var c=N(this);if(c)return c;if(this._bodyBlob)return D(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(x(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(j)}),this.json=function(){return this.text().then(JSON.parse)},this}var Y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function $(c){var d=c.toUpperCase();return Y.indexOf(d)>-1?d:c}function G(c,d){d=d||{};var y=d.body;if(c instanceof G){if(c.bodyUsed)throw new TypeError("Already read");this.url=c.url,this.credentials=c.credentials,d.headers||(this.headers=new S(c.headers)),this.method=c.method,this.mode=c.mode,this.signal=c.signal,!y&&c._bodyInit!=null&&(y=c._bodyInit,c.bodyUsed=!0)}else this.url=String(c);if(this.credentials=d.credentials||this.credentials||"same-origin",(d.headers||!this.headers)&&(this.headers=new S(d.headers)),this.method=$(d.method||this.method||"GET"),this.mode=d.mode||this.mode||null,this.signal=d.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&y)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(y)}G.prototype.clone=function(){return new G(this,{body:this._bodyInit})};function j(c){var d=new FormData;return c.trim().split("&").forEach(function(y){if(y){var w=y.split("="),E=w.shift().replace(/\+/g," "),T=w.join("=").replace(/\+/g," ");d.append(decodeURIComponent(E),decodeURIComponent(T))}}),d}function tt(c){var d=new S,y=c.replace(/\r?\n[\t ]+/g," ");return y.split(/\r?\n/).forEach(function(w){var E=w.split(":"),T=E.shift().trim();if(T){var B=E.join(":").trim();d.append(T,B)}}),d}K.call(G.prototype);function W(c,d){d||(d={}),this.type="default",this.status=d.status===void 0?200:d.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in d?d.statusText:"OK",this.headers=new S(d.headers),this.url=d.url||"",this._initBody(c)}K.call(W.prototype),W.prototype.clone=function(){return new W(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new S(this.headers),url:this.url})},W.error=function(){var c=new W(null,{status:0,statusText:""});return c.type="error",c};var V=[301,302,303,307,308];W.redirect=function(c,d){if(V.indexOf(d)===-1)throw new RangeError("Invalid status code");return new W(null,{status:d,headers:{location:c}})},o.DOMException=s.DOMException;try{new o.DOMException}catch{o.DOMException=function(d,y){this.message=d,this.name=y;var w=Error(d);this.stack=w.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function v(c,d){return new Promise(function(y,w){var E=new G(c,d);if(E.signal&&E.signal.aborted)return w(new o.DOMException("Aborted","AbortError"));var T=new XMLHttpRequest;function B(){T.abort()}T.onload=function(){var I={status:T.status,statusText:T.statusText,headers:tt(T.getAllResponseHeaders()||"")};I.url="responseURL"in T?T.responseURL:I.headers.get("X-Request-URL");var g="response"in T?T.response:T.responseText;y(new W(g,I))},T.onerror=function(){w(new TypeError("Network request failed"))},T.ontimeout=function(){w(new TypeError("Network request failed"))},T.onabort=function(){w(new o.DOMException("Aborted","AbortError"))},T.open(E.method,E.url,!0),E.credentials==="include"?T.withCredentials=!0:E.credentials==="omit"&&(T.withCredentials=!1),"responseType"in T&&a.blob&&(T.responseType="blob"),E.headers.forEach(function(I,g){T.setRequestHeader(g,I)}),E.signal&&(E.signal.addEventListener("abort",B),T.onreadystatechange=function(){T.readyState===4&&E.signal.removeEventListener("abort",B)}),T.send(typeof E._bodyInit>"u"?null:E._bodyInit)})}return v.polyfill=!0,s.fetch||(s.fetch=v,s.Headers=S,s.Request=G,s.Response=W),o.Headers=S,o.Request=G,o.Response=W,o.fetch=v,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;t=i.fetch,t.default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,n.exports=t})(ql,ql.exports);mt.rustEnum([mt.struct([],"uninitialized"),mt.struct([mt.option(mt.publicKey(),"authorityAddress")],"buffer"),mt.struct([mt.publicKey("programdataAddress")],"program"),mt.struct([mt.u64("slot"),mt.option(mt.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,mt.u32());function Io(n,t){var e,r;let i={};const s=n.args?n.args.length:0;if(t.length>s){if(t.length!==s+1)throw new Error(`provided too many arguments ${t} to instruction ${n==null?void 0:n.name} expecting: ${(r=(e=n.args)===null||e===void 0?void 0:e.map(o=>o.name))!==null&&r!==void 0?r:[]}`);i=t.pop()}return[t,i]}class js{static build(t,e,r){if(t.name==="_inner")throw new ir("the _inner name is reserved");const i=(...s)=>{const[o,a]=Io(t,[...s]);Af(t.accounts,a.accounts),IR(t,...s);const u=i.accounts(a.accounts);return a.remainingAccounts!==void 0&&u.push(...a.remainingAccounts),Yp("debug-logs")&&console.log("Outgoing account metas:",u),new $t({keys:u,programId:r,data:e(t.name,KE(t,...o))})};return i.accounts=s=>js.accountsArray(s,t.accounts,r,t.name),i}static accountsArray(t,e,r,i){return t?e.map(s=>{if(Jr(s)){const l=t[s.name];return js.accountsArray(l,s.accounts,r,i).flat()}let o;try{o=mn(t[s.name])}catch{throw new Error(`Wrong input type for account "${s.name}" in the instruction accounts object${i!==void 0?' for instruction "'+i+'"':""}. Expected PublicKey or string.`)}const a=s.optional&&o.equals(r),u=!!(s.writable&&!a),h=!!(s.signer&&!a);return{pubkey:o,isWritable:u,isSigner:h}}).flat():[]}}function IR(n,...t){}class SR{static build(t,e){return(...i)=>{var s,o,a;const[,u]=Io(t,[...i]),h=new Ct;if(u.preInstructions&&u.instructions)throw new Error("instructions is deprecated, use preInstructions");return(s=u.preInstructions)===null||s===void 0||s.forEach(l=>h.add(l)),(o=u.instructions)===null||o===void 0||o.forEach(l=>h.add(l)),h.add(e(...i)),(a=u.postInstructions)===null||a===void 0||a.forEach(l=>h.add(l)),h}}}class kR{static build(t,e,r,i){return async(...o)=>{var a;const u=e(...o),[,h]=Io(t,[...o]);if(i.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await i.sendAndConfirm(u,(a=h.signers)!==null&&a!==void 0?a:[],h.options)}catch(l){throw Xp(l,r)}}}}class TR{static build(t,e,r,i){var s;return((s=t.accounts)!==null&&s!==void 0?s:[]).reduce((o,a)=>(o[a.name]=new OR(t,a,r,i,e),o),{})}}class OR{get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}constructor(t,e,r,i,s){this._idlAccount=e,this._programId=r,this._provider=i??tc(),this._coder=s??new Jp(t),this._size=this._coder.accounts.size(e.name)}async fetchNullable(t,e){const{data:r}=await this.fetchNullableAndContext(t,e);return r}async fetchNullableAndContext(t,e){const r=await this.getAccountInfoAndContext(t,e),{value:i,context:s}=r;return{data:i&&i.data.length!==0?this._coder.accounts.decode(this._idlAccount.name,i.data):null,context:s}}async fetch(t,e){const{data:r}=await this.fetchNullableAndContext(t,e);if(r===null)throw new Error(`Account does not exist or has no data ${t.toString()}`);return r}async fetchAndContext(t,e){const{data:r,context:i}=await this.fetchNullableAndContext(t,e);if(r===null)throw new Error(`Account does not exist ${t.toString()}`);return{data:r,context:i}}async fetchMultiple(t,e){return(await this.fetchMultipleAndContext(t,e)).map(i=>i?i.data:null)}async fetchMultipleAndContext(t,e){return(await QE(this._provider.connection,t.map(i=>mn(i)),e)).map(i=>{if(i==null)return null;const{account:s,context:o}=i;return{data:this._coder.accounts.decode(this._idlAccount.name,s.data),context:o}})}async all(t){const e=this.coder.accounts.memcmp(this._idlAccount.name,t instanceof _t?t:void 0),r=[];return(e==null?void 0:e.offset)!=null&&(e==null?void 0:e.bytes)!=null&&r.push({memcmp:{offset:e.offset,bytes:e.bytes}}),(e==null?void 0:e.dataSize)!=null&&r.push({dataSize:e.dataSize}),(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[...r,...Array.isArray(t)?t:[]]})).map(({pubkey:s,account:o})=>({publicKey:s,account:this._coder.accounts.decode(this._idlAccount.name,o.data)}))}subscribe(t,e){const r=Ni.get(t.toString());if(r)return r.ee;const i=new ME;t=mn(t);const s=this._provider.connection.onAccountChange(t,o=>{const a=this._coder.accounts.decode(this._idlAccount.name,o.data);i.emit("change",a)},e);return Ni.set(t.toString(),{ee:i,listener:s}),i}async unsubscribe(t){let e=Ni.get(t.toString());if(!e){console.warn("Address is not subscribed");return}Ni&&await this._provider.connection.removeAccountChangeListener(e.listener).then(()=>{Ni.delete(t.toString())}).catch(console.error)}async createInstruction(t,e){const r=this.size;if(this._provider.publicKey===void 0)throw new Error("This function requires the Provider interface implementor to have a 'publicKey' field.");return Ie.createAccount({fromPubkey:this._provider.publicKey,newAccountPubkey:t.publicKey,space:e??r,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(e??r),programId:this._programId})}async getAccountInfo(t,e){return await this._provider.connection.getAccountInfo(mn(t),e)}async getAccountInfoAndContext(t,e){return await this._provider.connection.getAccountInfoAndContext(mn(t),e)}}const Ni=new Map,nc="Program log: ",o0="Program data: ",NR=nc.length,xR=o0.length;class CR{constructor(t,e,r){this._programId=t,this._provider=e,this._eventParser=new a0(t,r),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(t,e){var r;let i=this._listenerIdCount;return this._listenerIdCount+=1,this._eventListeners.has(t)||this._eventListeners.set(t,[]),this._eventListeners.set(t,((r=this._eventListeners.get(t))!==null&&r!==void 0?r:[]).concat(i)),this._eventCallbacks.set(i,[t,e]),this._onLogsSubscriptionId!==void 0||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,(s,o)=>{if(!s.err)for(const a of this._eventParser.parseLogs(s.logs)){const u=this._eventListeners.get(a.name);u&&u.forEach(h=>{const l=this._eventCallbacks.get(h);if(l){const[,b]=l;b(a.data,o.slot,s.signature)}})}})),i}async removeEventListener(t){const e=this._eventCallbacks.get(t);if(!e)throw new Error(`Event listener ${t} doesn't exist!`);const[r]=e;let i=this._eventListeners.get(r);if(!i)throw new Error(`Event listeners don't exist for ${r}!`);if(this._eventCallbacks.delete(t),i=i.filter(s=>s!==t),this._eventListeners.set(r,i),i.length===0&&this._eventListeners.delete(r),this._eventCallbacks.size===0){if(this._eventListeners.size!==0)throw new Error(`Expected event listeners size to be 0 but got ${this._eventListeners.size}`);this._onLogsSubscriptionId!==void 0&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0)}}}class a0{constructor(t,e){this.coder=e,this.programId=t}*parseLogs(t,e=!1){const r=new MR(t),i=new BR;let s=r.next();for(;s!==null;){let[o,a,u]=this.handleLog(i,s,e);o&&(yield o),a&&i.push(a),u&&i.pop(),s=r.next()}}handleLog(t,e,r){return t.stack.length>0&&t.program()===this.programId.toString()?this.handleProgramLog(e,r):[null,...this.handleSystemLog(e)]}handleProgramLog(t,e){if(t.startsWith(nc)||t.startsWith(o0)){const r=t.startsWith(nc)?t.slice(NR):t.slice(xR),i=this.coder.events.decode(r);if(e&&i===null)throw new Error(`Unable to decode event ${r}`);return[i,null,!1]}else return[null,...this.handleSystemLog(t)]}handleSystemLog(t){const e=t.split(":")[0];return e.match(/^Program (.*) success/g)!==null?[null,!0]:e.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:e.includes("invoke")?["cpi",!1]:[null,!1]}}class BR{constructor(){this.stack=[]}program(){if(!this.stack.length)throw new Error("Expected the stack to have elements");return this.stack[this.stack.length-1]}push(t){this.stack.push(t)}pop(){if(!this.stack.length)throw new Error("Expected the stack to have elements");this.stack.pop()}}class MR{constructor(t){this.logs=t}next(){if(this.logs.length===0)return null;let t=this.logs[0];return this.logs=this.logs.slice(1),t}}class LR{static build(t,e,r,i,s,o,a){return async(...h)=>{var l;const b=e(...h),[,R]=Io(t,[...h]);let _;if(i.simulate===void 0)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{_=await i.simulate(b,R.signers,(l=R.options)===null||l===void 0?void 0:l.commitment)}catch(A){throw Xp(A,r)}if(_===void 0)throw new Error("Unable to simulate transaction");const S=_.logs;if(!S)throw new Error("Simulated logs not found");const N=[];if(a.events){let A=new a0(o,s);for(const C of A.parseLogs(S))N.push(C)}return{events:N,raw:S}}}}function ka(n){return new c0(ps(8),t=>nu.fromBuffer(t),t=>t.toBuffer(),n)}function ks(n){return new c0(ps(32),t=>new X(t),t=>t.toBuffer(),n)}function Ta(n,t){return new PR(n,t)}class c0 extends Ro{constructor(t,e,r,i){super(t.span,i),this.layout=t,this.decoder=e,this.encoder=r}decode(t,e){return this.decoder(this.layout.decode(t,e))}encode(t,e,r){return this.layout.encode(this.encoder(t),e,r)}getSpan(t,e){return this.layout.getSpan(t,e)}}class PR extends Ro{constructor(t,e){super(-1,e),this.layout=t,this.discriminator=Zn()}encode(t,e,r=0){return t==null?this.layout.span+this.discriminator.encode(0,e,r):(this.discriminator.encode(1,e,r),this.layout.encode(t,e,r+4)+4)}decode(t,e=0){const r=this.discriminator.decode(t,e);if(r===0)return null;if(r===1)return this.layout.decode(t,e+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(t,e=0){return this.layout.getSpan(t,e+4)+4}}class nu extends Wn{toBuffer(){const t=super.toArray().reverse(),e=_t.from(t);if(e.length===8)return e;if(e.length>=8)throw new Error("u64 too large");const r=_t.alloc(8);return e.copy(r),r}static fromBuffer(t){if(t.length!==8)throw new Error(`Invalid buffer length: ${t.length}`);return new nu([...t].reverse().map(e=>`00${e.toString(16)}`.slice(-2)).join(""),16)}}const UR=Se([ks("mint"),ks("owner"),ka("amount"),Ta(ks(),"delegate"),(n=>{const t=s0(ER("discriminator"),null,n);return t.addVariant(0,Se([]),"uninitialized"),t.addVariant(1,Se([]),"initialized"),t.addVariant(2,Se([]),"frozen"),t})("state"),Ta(ka(),"isNative"),ka("delegatedAmount"),Ta(ks(),"closeAuthority")]);function DR(n){return UR.decode(n)}class zR{constructor(t,e,r,i,s,o,a,u){this._args=t,this._accounts=e,this._provider=r,this._programId=i,this._idlIx=s,this._idlTypes=a,this._customResolver=u,this._accountStore=new HR(r,o,i)}args(t){this._args=t}async resolve(){this.resolveEventCpi(this._idlIx.accounts),this.resolveConst(this._idlIx.accounts);let t=0;for(;await this.resolvePdasAndRelations(this._idlIx.accounts)+await this.resolveCustom()>0;)if(t++,t===16)throw new Error("Reached maximum depth for account resolution")}resolveOptionals(t){Object.assign(this._accounts,this.resolveOptionalsHelper(t,this._idlIx.accounts))}get(t){const e=t.reduce((r,i)=>r&&r[i],this._accounts);if(e&&e.toBase58)return e}set(t,e){let r=this._accounts;t.forEach((i,s)=>{var o;s===t.length-1&&(r[i]=e),r[i]=(o=r[i])!==null&&o!==void 0?o:{},r=r[i]})}resolveOptionalsHelper(t,e){const r={};for(const i of e){const s=i.name,o=t[s];o!==void 0&&(u0(o)?Jr(i)?r[s]=this.resolveOptionalsHelper(o,i.accounts):r[s]=l0(o):o!==null?r[s]=mn(o):i.optional&&(r[s]=this._programId))}return r}async resolveCustom(){if(this._customResolver){const{accounts:t,resolved:e}=await this._customResolver({args:this._args,accounts:this._accounts,provider:this._provider,programId:this._programId,idlIx:this._idlIx});return this._accounts=t,e}return 0}resolveEventCpi(t,e=[]){for(const r in t){const i=t[r];Jr(i)&&this.resolveEventCpi(i.accounts,[...e,i.name]);const s=+r+1;if(s===t.length)return;const o=t[r].name,a=t[s].name;if(o==="eventAuthority"&&a==="program"){const u=[...e,o],h=[...e,a];this.get(u)||this.set(u,X.findProgramAddressSync([_t.from("__event_authority")],this._programId)[0]),this.get(h)||this.set(h,this._programId);return}}}resolveConst(t,e=[]){for(const r of t){const i=r.name;if(Jr(r))this.resolveConst(r.accounts,[...e,i]);else{const s=r;if((s.signer||s.address)&&!this.get([...e,i])){if(s.signer){if(!this._provider.wallet)throw new Error("This function requires the `Provider` interface implementor to have a `wallet` field.");this.set([...e,i],this._provider.wallet.publicKey)}s.address&&this.set([...e,i],mn(s.address))}}}}async resolvePdasAndRelations(t,e=[]){let r=0;for(const i of t){const s=i.name;if(Jr(i))r+=await this.resolvePdasAndRelations(i.accounts,[...e,s]);else{const o=i;if((o.pda||o.relations)&&!this.get([...e,s])){r++;try{if(o.pda){const a=await Promise.all(o.pda.seeds.map(l=>this.toBuffer(l,e)));if(a.some(l=>!l))continue;const u=await this.parseProgramId(o,e),[h]=X.findProgramAddressSync(a,u);this.set([...e,s],h)}}catch{}try{if(o.relations){const a=this.get([...e,o.relations[0]]);if(a){const u=await this._accountStore.fetchAccount({publicKey:a});this.set([...e,s],u[s])}}}catch{}}}}return r}async parseProgramId(t,e=[]){var r;if(!(!((r=t.pda)===null||r===void 0)&&r.program))return this._programId;const i=await this.toBuffer(t.pda.program,e);if(!i)throw new Error(`Program seed not resolved: ${t.name}`);return new X(i)}async toBuffer(t,e=[]){switch(t.kind){case"const":return this.toBufferConst(t);case"arg":return await this.toBufferArg(t);case"account":return await this.toBufferAccount(t,e);default:throw new Error(`Unexpected seed: ${t}`)}}toBufferConst(t){return this.toBufferValue("bytes",t.value)}async toBufferArg(t){const[e,...r]=t.path.split("."),i=this._idlIx.args.findIndex(a=>a.name===e);if(i===-1)throw new Error(`Unable to find argument for seed: ${e}`);const s=r.reduce((a,u)=>(a??{})[u],this._args[i]);if(s===void 0)return;const o=this.getType(this._idlIx.args[i].type,r);return this.toBufferValue(o,s)}async toBufferAccount(t,e=[]){const[r,...i]=t.path.split("."),s=this.get([...e,r]);if(!s)return;if(!i.length)return this.toBufferValue("pubkey",s);if(!t.account)throw new Error(`Seed account is required in order to resolve type: ${t.path}`);let a=await this._accountStore.fetchAccount({publicKey:s,name:t.account}),u=i;for(;u.length>0;)a=a[u[0]],u=u.slice(1);if(a===void 0)return;const h=this.getType({defined:{name:t.account}},i);return this.toBufferValue(h,a)}toBufferValue(t,e){switch(t){case"u8":case"i8":return _t.from([e]);case"u16":case"i16":return new Wn(e).toArrayLike(_t,"le",2);case"u32":case"i32":return new Wn(e).toArrayLike(_t,"le",4);case"u64":case"i64":return new Wn(e).toArrayLike(_t,"le",8);case"u128":case"i128":return new Wn(e).toArrayLike(_t,"le",16);case"u256":case"i256":return new Wn(e).toArrayLike(_t,"le",32);case"string":return _t.from(e);case"pubkey":return e.toBuffer();case"bytes":return _t.from(e);default:if(t!=null&&t.array)return _t.from(e);throw new Error(`Unexpected seed type: ${t}`)}}getType(t,e=[]){var r;const i=(r=t==null?void 0:t.defined)===null||r===void 0?void 0:r.name;if(i){if(i==="tokenAccount")switch(e.at(0)){case"mint":case"owner":return"pubkey";case"amount":case"delagatedAmount":return"u64";default:throw new Error(`Unknown token account path: ${e}`)}const s=this._idlTypes.find(l=>l.name===i);if(!s)throw new Error(`Type not found: ${i}`);const[o,...a]=e,h=s.type.fields.find(l=>l.name===o);if(!h)throw new Error(`Field not found: ${o}`);return this.getType(h.type,a)}return t}}class HR{constructor(t,e,r){this._provider=t,this._cache=new Map,this._idls={},this._idls[r.toBase58()]=e}async fetchAccount({publicKey:t,name:e}){const r=t.toBase58();if(!this._cache.has(r)){const i=await this._provider.connection.getAccountInfo(t);if(i===null)throw new Error(`Account not found: ${r}`);if(e==="tokenAccount"){const s=DR(i.data);this._cache.set(r,s)}else{const s=await this.getAccountsNs(i.owner);if(s){const o=Object.values(s)[0];if(o){const a=o.coder.accounts.decodeAny(i.data);this._cache.set(r,a)}}}}return this._cache.get(r)}async getAccountsNs(t){const e=t.toBase58();if(!this._idls[e]){const r=await Qi.fetchIdl(t,this._provider);if(r){const i=new Qi(r,this._provider);this._idls[e]=i.account}}return this._idls[e]}}class FR{static build(t,e,r,i,s,o,a,u,h,l,b){return(...R)=>new $R(R,i,s,o,a,u,t,e,r,h,l,b)}}function u0(n){return typeof n=="object"&&n!==null&&!("_bn"in n)}function l0(n,t){const e={};for(const r in n){const i=n[r];if(i===null)throw new Error("Failed to resolve optionals due to IDL type mismatch with input accounts!");e[r]=u0(i)?l0(i):mn(i)}return e}class $R{constructor(t,e,r,i,s,o,a,u,h,l,b,R){this._args=t,this._ixFn=e,this._txFn=r,this._rpcFn=i,this._simulateFn=s,this._viewFn=o,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._resolveAccounts=!0,this._accountsResolver=new zR(t,this._accounts,a,u,h,l,b,R)}args(t){this._args=t,this._accountsResolver.args(t)}accounts(t){return this.accountsPartial(t)}accountsPartial(t){return this._resolveAccounts=!0,this._accountsResolver.resolveOptionals(t),this}accountsStrict(t){return this._resolveAccounts=!1,this._accountsResolver.resolveOptionals(t),this}signers(t){return this._signers=this._signers.concat(t),this}remainingAccounts(t){return this._remainingAccounts=this._remainingAccounts.concat(t),this}preInstructions(t,e=!1){return e?this._preInstructions=t.concat(this._preInstructions):this._preInstructions=this._preInstructions.concat(t),this}postInstructions(t){return this._postInstructions=this._postInstructions.concat(t),this}async pubkeys(){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._accounts}async rpc(t){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:t})}async rpcAndKeys(t){return{pubkeys:await this.pubkeys(),signature:await this.rpc(t)}}async view(t){if(this._resolveAccounts&&await this._accountsResolver.resolve(),!this._viewFn)throw new Error("Method does not support views");return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:t})}async simulate(t){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:t})}async instruction(){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async prepare(){return{instruction:await this.instruction(),pubkeys:await this.pubkeys(),signers:this._signers}}async transaction(){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}}class KR{static build(t,e,r,i){const s=e.accounts.find(u=>u.writable),o=!!e.returns;return s||!o?void 0:async(...u)=>{let h=await r(...u);const l=`Program return: ${t} `;let b=h.raw.find(N=>N.startsWith(l));if(!b)throw new Error("View expected return log");let R=Rf(b.slice(l.length)),_=e.returns;if(!_)throw new Error("View expected return type");return Tt.fieldLayout({type:_},i.types).decode(R)}}}class qR{static build(t,e,r,i,s){const o={},a={},u={},h={},l={},b={},R=$E(t),_=t.accounts?TR.build(t,e,r,i):{};return t.instructions.forEach(S=>{const N=js.build(S,(Y,$)=>e.instruction.encode(Y,$),r),A=SR.build(S,N),C=kR.build(S,A,R,i),D=LR.build(S,A,R,i,e,r,t),x=KR.build(r,S,D,t),L=FR.build(i,r,S,N,A,C,D,x,_,t.types||[],s==null?void 0:s(S)),K=S.name;a[K]=N,u[K]=A,o[K]=C,h[K]=D,l[K]=L,x&&(b[K]=x)}),[o,a,u,_,h,l,b]}}class Qi{get programId(){return this._programId}get idl(){return this._idl}get rawIdl(){return this._rawIdl}get coder(){return this._coder}get provider(){return this._provider}constructor(t,e=tc(),r,i){const s=FE(t);this._idl=s,this._rawIdl=t,this._provider=e,this._programId=mn(t.address),this._coder=r??new Jp(s),this._events=new CR(this._programId,e,this._coder);const[o,a,u,h,l,b,R]=qR.build(s,this._coder,this._programId,e,i);this.rpc=o,this.instruction=a,this.transaction=u,this.account=h,this.simulate=l,this.methods=b,this.views=R}static async at(t,e){const r=mn(t),i=await Qi.fetchIdl(r,e);if(!i)throw new Error(`IDL not found for program: ${t.toString()}`);return new Qi(i,e)}static async fetchIdl(t,e){e=e??tc();const r=mn(t),i=await UE(r),s=await e.connection.getAccountInfo(i);if(!s)return null;let o=HE(s.data.slice(8));const a=CE(o.data);return JSON.parse(PE(a))}addEventListener(t,e){return this._events.addEventListener(t,e)}async removeEventListener(t){return await this._events.removeEventListener(t)}}new X("11111111111111111111111111111111");export{Vs as A,Sm as C,ME as E,ni as K,Km as L,X as P,$i as S,Ct as T,Nc as V,Cc as a,Ie as b,Fm as c,xc as d,Qi as e,gi as g};
